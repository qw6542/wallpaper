"use strict";angular.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},angular.offsetToAncestor=function(e,t){return{left:e.pageX-t.offset().left+t.scrollLeft(),top:e.pageY-t.offset().top+t.scrollTop()}},angular.frameTimeout=function(t,e,a){for(var i=function(e){return function(){t(e)}},n=i(a),o=1;o<e;++o)n=i(n);n()},String.prototype.beginsWith=function(e){return 0===this.indexOf(e)},Math.clamp=function(e,t,a){return Math.max(t,Math.min(e,a))},Math.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},Math.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},Array.prototype.findAndRemove=function(e){if(angular.isFunction(e))for(var t=0;t<this.length;++t)e(this[t])&&(this.splice(t,1),--t);else{var a=this.indexOf(e);0<=a&&this.splice(a,1)}},Array.prototype.findAndReplace=function(e,t){for(var a=0;a<this.length;++a)if(e(this[a]))return this.splice(a,1,t);return[]},Array.prototype.pushIfNew=function(e,t){angular.isFunction(t)?e&&this.findIndex(t)<0&&this.push(e):e&&!this.includes(e)&&this.push(e)},Array.prototype.unshiftIfNew=function(e){e&&!this.includes(e)&&this.unshift(e)},Array.prototype.sliceLimit=function(e,t){return e>this.length||t<0?[]:this.slice(Math.max(0,e),Math.min(this.length,t))},Array.prototype.shuffle=function(){var e,t,a,i=this;for(a=i.length-1;0<a;a--)e=Math.floor(Math.random()*(a+1)),t=i[a],i[a]=i[e],i[e]=t;return i},Array.prototype.last=function(){return 0<this.length?this[this.length-1]:void 0},String.prototype.hashCode=function(){for(var e=0,t=this.length,a=0;a<t;a++)e=31*e+this.charCodeAt(a),e&=e;return e},JSON.validate=function(e,t){try{JSON.parse(e)}catch(e){return angular.isObject(t)&&(t.exception=e&&e.message),!1}return!0},JSON.clean=function(e){return angular.isObject(e)||angular.isArray(e)?angular.fromJson(angular.toJson(e)):angular.isString()?angular.toJson(angular.fromJson(e)):void 0},window.safeApply=function(e){var t=e.$root.$$phase;"$apply"!==t&&"$digest"!==t&&e.$apply()},window.cancelEventBubble=function(e){e.stopPropagation(),e.preventDefault()},window.cancelEventImmediately=function(e){e.stopImmediatePropagation(),e.preventDefault()},angular.module("wallpaperbrowserApp",["ngRoute","ui.bootstrap","ngAnimate","rzModule","angularSpectrumColorpicker","toastr","ngSanitize","ngTagsInput","pascalprecht.translate"]).config(["$routeProvider",function(e){e.when("/browsewallpapers",{templateUrl:"views/views/browsewallpapers.html",controller:"BrowseWallpapersCtrl",options:{caption:"ui_caption_browse"}}).when("/settings",{templateUrl:"views/views/settings.html",controller:"SettingsCtrl",options:{caption:"ui_caption_settings"}}).when("/editor",{templateUrl:"views/views/editor.html",controller:"EditorCtrl",options:{caption:"ui_caption_editor",helpEnabled:!0}}).when("/welcome",{templateUrl:"views/views/welcome.html",controller:"WelcomeCtrl",options:{caption:" ",isDialog:!0,hideTitle:!1}}).when("/",{templateUrl:"views/views/empty.html",controller:"EmptyCtrl"}).otherwise({redirectTo:"/"})}]).config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|file|data):/)}]).config(["toastrConfig",function(e){angular.extend(e,{positionClass:"toast-bottom-right"})}]).config(["$translateProvider",function(e){e.preferredLanguage("en-us"),e.fallbackLanguage("en-us"),e.useLoader("localeLoader"),e.useSanitizeValueStrategy("sce")}]).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","https://www.youtube.com/**"])}]).filter("filename",function(){return function(e){return e?e.replace(/^.*[\\\/]/,""):e}}).factory("localeLoader",["$q","$http","localeLoaderSupport",function(e,t,o){return function(i){var n=e.defer();return t.get("applocale://"+i.key).then(function(e){"en-us"===i.key&&angular.extend(e.data,{"system_language_ar-sa":"اللغة العربية الفصحى","system_language_bg-bg":"български","system_language_cs-cz":"čeština","system_language_da-dk":"Dansk","system_language_de-de":"Deutsch","system_language_el-gr":"Eλληνικά","system_language_en-us":"English","system_language_es-es":"Español","system_language_et-ee":"Eesti keel","system_language_eu-es":"Euskara","system_language_fa-ir":"فارسى","system_language_fi-fi":"Suomi","system_language_fr-fr":"Français","system_language_he-il":"עברית","system_language_hr-hr":"Hrvatski","system_language_hu-hu":"Magyar","system_language_id-id":"Bahasa Indonesia","system_language_it-it":"Italiano","system_language_ja-jp":"日本語","system_language_ko-kr":"한국어","system_language_lt-lt":"Lietuvių kalba","system_language_nl-nl":"Nederlands","system_language_nn-no":"Norsk","system_language_pl-pl":"Polski","system_language_pt-br":"Português-Brasil","system_language_pt-pt":"Português","system_language_ro-ro":"Română","system_language_ru-ru":"Русский язык","system_language_sk-sk":"Slovenčina","system_language_sl-si":"Slovenščina","system_language_sr-sr":"српски","system_language_sv-se":"Svenska","system_language_th-th":"ภาษาไทย","system_language_tr-tr":"Türkçe","system_language_uk-ua":"Українська","system_language_vi-vn":"tiếng việt","system_language_zh-chs":"简体中文","system_language_zh-cht":"繁體中文"});var t=e.data,a=o.getTranslations(i.key);angular.isObject(a)&&(angular.extend(a,t),t=a),n.resolve(t)}).catch(function(){n.resolve({})}),n.promise}}]).run(["$rootScope","$timeout","utils",function(e,t,a){var i;window.rootScope=e,window.utilsService=a,i=e.$on("$routeChangeSuccess",function(){t(function(){angular.isFunction(i)&&(window.global.jsInit(),i(),i=void 0)})})}]),angular.module("wallpaperbrowserApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("wallpaperbrowserApp").directive("titlebar",["$rootScope","$route","skin",function(e,t,n){return{templateUrl:"views/templates/titlebar.html",restrict:"E",link:function(a){function i(e){angular.isObject(e)&&angular.isObject(e.options)&&(a.caption=e.options.caption,a.isDialog=e.options.isDialog,a.hideTitle=e.options.hideTitle,n.setHelpEnabled(e.options.helpEnabled))}a.isMaximized=n.isMaximized(),a.isHelpEnabled=n.isHelpEnabled(),a.isDialog=!1,a.maximizeEnabled=!0,a.closeWindow=function(){n.runCloseCallbacks().then(function(){window.ui.close()})},a.$on("onMaximizedChanged",function(e,t){a.isMaximized=t,window.safeApply(a)}),a.$on("onMaximizeEnabledChanged",function(e,t){a.maximizeEnabled=t,window.safeApply(a)}),a.$on("onHelpEnabledChanged",function(e,t){a.isHelpEnabled=t,window.safeApply(a)}),a.$on("$routeChangeSuccess",function(e,t){i(t)}),a.toggleHelp=function(){e.$broadcast("onHelpToggled")},i(t.current)}}}]),angular.module("wallpaperbrowserApp").service("skin",["$rootScope","$q","$document","$timeout",function(t,e,a,i){var n,o=!1,r=!1,l=0,s=[];this.setWindowsVersion=function(e){l=e},this.getWindowsVersion=function(){return l},this.isMaximized=function(){return o},this.setAvailableSkins=function(e){n=e},this.applySkin=function(t){n&&n.find(function(e){return e.key===t})&&window.ui.changeTheme(t)},this.isHelpEnabled=function(){return r},this.setMaximized=function(e){o=e,t.$broadcast("onMaximizedChanged",e)},this.setMaximizeEnabled=function(e){t.$broadcast("onMaximizeEnabledChanged",e)},this.setHelpEnabled=function(e){r=e,t.$broadcast("onHelpEnabledChanged",e)},this.flashWindow=function(){a[0].body.className=a[0].body.className.replace(" captionFlashAnim",""),i(function(){a[0].body.className+=" captionFlashAnim"}),i(function(){a[0].body.className=a[0].body.className.replace(" captionFlashAnim","")},1e3)},this.onOSModalChanged=function(e){t.osModalActive=e,t.$apply()},this.addCloseCallback=function(e){s.push(e)},this.removeCloseCallback=function(e){s.findAndRemove(e)},this.runCloseCallbacks=function(){var t=e.when();return angular.forEach(s,function(e){t=t.then(e)}),t},window.skinService=this}]),angular.module("wallpaperbrowserApp").controller("BrowseWallpapersCtrl",["$document","$http","$filter","$translate","$parse","$timeout","$q","$rootScope","$scope","$location","contextMenu","utils","modals","host","skin","dragdrop","localeLoaderSupport",function(e,t,o,h,a,b,_,i,w,n,y,k,S,x,r,l,s){var E,c,d,p,u,g=["76561197975619619","76561198008830389","76561198447701318"],f=angular.element("#PlaylistContainer"),m=angular.element("#PlaylistContainerRow"),v=angular.element("#BrowseWallpaperGrid"),C={},T=!1,I={},A=!1,O=[],P=1,M={},R={},D=[],W=[],j={current:1,count:1,pages:[],visible:!0},F={current:1,count:1,pages:[],visible:!1},L=angular.copy(j),N={name:function(e,t){return angular.isString(e.title)&&angular.isString(t.title)?e.title.localeCompare(t.title):0},rating:function(e,t){return e.rating===t.rating?N.name(e,t):t.rating-e.rating},subscriptiondate:function(e,t){return e.subscriptiondate===t.subscriptiondate&&0===e.subscriptiondate?N.name(e,t):e.subscriptiondate>t.subscriptiondate?-1:1},updatedate:function(e,t){return e.updatedate===t.updatedate&&0===e.updatedate?N.name(e,t):e.updatedate>t.updatedate?-1:1},favorite:function(e,t){return e.favorite!==t.favorite?e.favorite?-1:1:N.name(e,t)},filesize:function(e,t){return e.filesize===t.filesize&&0===e.filesize?N.name(e,t):e.filesize>t.filesize?-1:1}},H={name:function(e,t){return angular.isString(e.title)&&angular.isString(t.title)?t.title.localeCompare(e.title):0},rating:function(e,t){return e.rating===t.rating?H.name(e,t):e.rating-t.rating},subscriptiondate:function(e,t){return e.subscriptiondate===t.subscriptiondate&&0===e.subscriptiondate?H.name(e,t):t.subscriptiondate>e.subscriptiondate?-1:1},updatedate:function(e,t){return e.updatedate===t.updatedate&&0===e.updatedate?H.name(e,t):t.updatedate>e.updatedate?-1:1},favorite:function(e,t){return e.favorite!==t.favorite?t.favorite?-1:1:H.name(e,t)},filesize:function(e,t){return e.filesize===t.filesize&&0===e.filesize?H.name(e,t):t.filesize>e.filesize?-1:1}};function $(e,t,a){var i=[];a=a||1,t=t||1;for(var n=Math.max(1,t-4),o=Math.min(a,t+4),r=1;r<=a;++r)(1!==r&&r<n||r!==a&&o<r)&&(i.push({label:"…",class:"noClick normalText"}),r=r<n?n:a),i.push({label:r});e.current=t,e.count=a,e.pages=i}function B(){var e=k.getResolutionTags(),t={};return angular.forEach(e,function(e){t[e]=!0}),t}function q(e){var t=k.getAvailableTags();e||t.findAndRemove("Unspecified");var a={};return angular.forEach(t,function(e){a[e]=!0}),a}function U(e){return"workshop"===e?{type:"",categorytags:{Wallpaper:!0,Preset:!0},typetags:{Scene:!0,Web:!0,Application:!0,Video:!0},sourcetags:{Official:!0,Workshop:!0,Local:!0},ratingtags:{Mature:!1,Questionable:!1,Everyone:!0},resolutiontags:B(),tags:q(),utilitytags:{},sort:"trend_year",descending:!1,text:"",filterTitle:!0}:{type:"",categorytags:{Wallpaper:!0,Preset:!0},typetags:{Scene:!0,Web:!0,Application:!0,Video:!0},sourcetags:{Official:!0,Workshop:!0,Local:!0},ratingtags:{Mature:!0,Questionable:!0,Everyone:!0},resolutiontags:B(),tags:q(!0),utilitytags:{},sort:D[0].value,descending:!1,text:""}}function V(){T=!0,b(function(){T=!1})}function z(){return S.open("genericConfirm",{data:{title:"ui_browse_modal_no_steam_title",message:"ui_browse_modal_no_steam_body",okVisible:!0}})}function G(){return!angular.isObject(w.steamWorkshopStatus)||!w.steamWorkshopStatus.error}function Y(e){return 3.5<e.w/e.h||3.5<e.h/e.w}function Q(){w.sourceIsExplore?(angular.forEach(w.sortedExploreQueries,function(e){angular.isArray(e.wallpapers)&&(e.wallpapers=e.wallpapers.slice())}),w.sortedFolders=[]):w.sourceIsWorkshop&&(w.sortedFolders=[]),w.sortedWallpapers=w.sortedWallpapers.slice()}function K(){if(w.sourceIsInstalled)return w.sortedFoldersPrePagination.concat(w.sortedWallpapersPrePagination);if(w.sourceIsWorkshop)return w.queryWallpapers;if(w.sourceIsExplore){if(w.exploreNavigation[0].key){var t=[];return angular.forEach(w.sortedExploreQueries,function(e){angular.isArray(e.wallpapers)&&(t=t.concat(e.wallpapers))}),t}return w.sortedWallpapers}}function X(){if(!w.sourceIsInstalled)return w.sortedWallpapersPrePagination=[],w.sortedFoldersPrePagination=[],void Q();var t=w.currentFolder&&w.currentFolder.items,e=w.currentFolder&&w.currentFolder.subfolders||w.folders||[],i=[],a=w.wallpapers;angular.isObject(t)?angular.forEach(a,function(e){t[e.workshopid||e.file]&&i.push(e)}):angular.forEach(a,function(e){w.folderRootExclusion[e.workshopid||e.file]||i.push(e)}),a=i,i=[];var n=a.length,o=[],r=[];if(angular.forEach(w.filter.categorytags,function(e,t){e||r.push(t)}),angular.forEach(w.filter.typetags,function(e,t){e||r.push(t)}),angular.forEach(w.filter.sourcetags,function(e,t){e||r.push(t)}),angular.forEach(w.filter.resolutiontags,function(e,t){e||r.push(t)}),angular.forEach(w.filter.ratingtags,function(e,t){e||r.push(t)}),angular.forEach(w.filter.tags,function(e,t){e||r.push(t)}),angular.forEach(w.filter.utilitytags,function(e,t){1===e?o.push(t):2===e&&r.push(t)}),0<o.length&&(angular.forEach(a,function(t){angular.forEach(o,function(e){angular.isString(t.tags)&&0<=t.tags.indexOf(e)&&i.push(t)})}),a=i,i=[]),0<r.length&&(angular.forEach(a,function(t){var a=!1;angular.forEach(r,function(e){angular.isString(t.tags)&&0<=t.tags.indexOf(e)&&(a=!0)}),a||i.push(t)}),a=i,i=[]),angular.isString(w.filter.text)&&0<w.filter.text.length){var l=w.filter.text.toLowerCase().replace(/[\?\.\!]/g,"");angular.forEach(a,function(e){var t=e.title.toLowerCase().replace(/[\?\.\!]/g,"");(t.includes(l)||k.damerauLevenshteinDistance(t,l)<3)&&i.push(e)})}else i=a.slice();w.filter.descending?i.sort(H[w.filter.sort]):i.sort(N[w.filter.sort]),angular.forEach(i,function(e){e.localAndExternal&&!e.requestedThumbnail&&(e.requestedThumbnail=!0,w.requestThumbnailPath(e))});var s=(w.sortedWallpapers=i).length;w.showFilter.counts=s!==n,w.filteredCount=s,w.unfilteredCount=n,e=e.slice(),w.filter.descending?e.sort(H.name):e.sort(N.name),w.sortedFolders=e,w.sortedWallpapersPrePagination=w.sortedWallpapers.slice(),w.sortedFoldersPrePagination=w.sortedFolders.slice();var c=w.sortedFolders.length,d=s+c;if(j.visible=200<d,j.visible){var p=Math.floor(d/200)+1;$(j,j.current,p);var u=200*(j.current-1),g=200*j.current;w.sortedFolders=w.sortedFolders.sliceLimit(u,g),w.sortedWallpapers=w.sortedWallpapers.sliceLimit(u-c,g-c)}}function J(e,t){for(var a=0;a<O.length;++a)if(O[a].file===e)return O[a];var i,n=e,o="Local",r="images/preview_local.jpg",l=["Everyone","Local"];k.isURL(e)?(o+=" URL",r="images/preview_url.jpg",l.push("Web")):(i=e,c?d.wallpaperFiles.push(i):(d={wallpaperFiles:[i]},c=b(function(){c=void 0,x.callDeferred("browseWallpaperObject","updateLocalWallpaperProjectInfo",d.wallpaperFiles).then(function(e){angular.forEach(e,function(t){angular.forEach(O,function(e){e.file===t.file&&angular.merge(e,t)})})})})),k.isExtension(e,"video")?(o+=" Video",l.push("Video")):k.isExtension(e,"application")?(o+=" Application",l.push("Application")):k.isExtension(e,"web")?(o+=" Web",l.push("Web")):k.isExtension(e,"scene")&&(o+=" Scene",l.push("Scene")),n=k.getFilename(e));var s={file:e,title:n,preview:r,previewsmall:r,tags:l.join(","),local:!0,localAndExternal:!0,status:"installed",type:o,filesize:0,subscriptiondate:0,favorite:!1,rating:0};return angular.isDefined(t)&&(s.overridetype=t),O.push(s),w.wallpapers.push(s),s}function Z(e){if(angular.isArray(e))return angular.forEach(e,Z);var t;for(t=0;t<O.length;++t)O[t].file===e&&O.splice(t,1);for(t=0;t<w.wallpapers.length;++t)w.wallpapers[t].file===e&&w.wallpapers.splice(t,1)}function ee(t){var a;return angular.forEach(w.monitors,function(e){e.location===t&&(a=e)}),angular.forEach(w.monitorSplits,function(e){e.left&&e.left.location===t?a=e.left:e.right&&e.right.location===t&&(a=e.right)}),a||w.monitorGroups[t]}function te(){var t=w.monitors.slice();return angular.forEach(w.monitorSplits,function(e){e.left&&t.push(e.left),e.right&&t.push(e.right)}),angular.forEach(w.monitorGroups,function(e){t.push(e)}),t}function ae(t){var a;return angular.forEach(w.wallpapers,function(e){e.file===t&&(a=e)}),a}function ie(t){var a;return t=""+t,angular.forEach(w.wallpapers,function(e){e.workshopid===t&&(a=e)}),a}function ne(e){if(angular.isObject(e))return e.localAndExternal?J(e.file):ae(e.file)}function oe(){var e=angular.element("#PlaylistContainerTimeline");if(0===e.length?(p&&p.remove(),p=void 0):(p&&!e.has(p)&&(p.remove(),p=void 0),p||((p=angular.element(document.createElement("div"))).addClass("currentTimeIndicator"),e.append(p))),u=b(oe,1e4),p){var t=new Date,a=(60*t.getHours()+t.getMinutes())/1440*100;p.css({left:a+"%"})}}function re(e){for(var t=0,a=0,i=0;i<e.length;++i){var n=e[i],o=void 0;if(angular.isNumber(n.daytimeend)?o=n.daytimeend:i===e.length-1&&(o=1),angular.isNumber(o)){var r=i-t+1;if(0<r){r=1/r*(o-a);for(var l=t;l<=i;++l)e[l].flex=r}t=i+1,a=o}}u&&b.cancel(u),u=b(oe)}function le(e){return{settings:angular.copy(e.settings),name:e.name||"",items:e.items.map(function(e){if(angular.isNumber(e.daytimeend)||angular.isString(e.preset)){var t={file:e.wallpaper.file};return angular.isNumber(e.daytimeend)&&(t.daytimeend=e.daytimeend),angular.isString(e.preset)&&(t.preset=e.preset),t}return e.wallpaper.file})}}function se(e){for(var t={settings:angular.copy(e.settings),name:e.name,items:[]},a=0;a<e.items.length;++a){var i,n=e.items[a];angular.isString(n)?(i=ae(n),angular.isObject(i)&&(i={wallpaper:i})):angular.isObject(n)&&angular.isString(n.file)&&(i=ae(n.file),angular.isObject(i)&&(i={wallpaper:i,daytimeend:n.daytimeend,preset:n.preset})),angular.isObject(i)&&t.items.push(i)}return re(t.items),t}function ce(t){if(angular.isObject(t)||(t=w.selectedMonitor),t.playlistFlags={},0<t.playlist.items.length){delete t.playlist.items[t.playlist.items.length-1].daytimeend;var a=0;angular.forEach(t.playlist.items,function(e){angular.isObject(e.wallpaper)&&angular.isString(e.wallpaper.file)&&(t.playlistFlags[e.wallpaper.file]=!0),angular.isNumber(e.daytimeend)&&(e.daytimeend<a||"daytime"!==t.playlist.settings.mode?delete e.daytimeend:a=e.daytimeend)})}x.callDeferred("browseWallpaperObject","selectPlaylist",le(t.playlist),t.location),re(t.playlist.items)}function de(e){var t=ee(e);angular.isDefined(t)&&(t.wallpaper=void 0,w.selectedMonitor===t&&(w.currentSelection=void 0),t.playlistFlags={},t.playlist.items=[]),w.wallpaperConfig.selectedwallpapers[e]={},x.callDeferred("browseWallpaperObject","removeWallpaper",{location:e,playlist:!0})}function pe(a,e){e&&w.currentSelection===a&&(w.currentSelection=void 0);var t=te();angular.forEach(t,function(e){delete e.playlistFlags[a.file];var t=e.playlist.items.findIndex(function(e){return e.wallpaper===a});0<=t?(e.playlist.items.splice(t,1),ce(e)):e.wallpaper===a&&(e.wallpaper=void 0,x.callDeferred("browseWallpaperObject","removeWallpaper",{location:e.location,playlist:!1}))})}function ue(a,e){if(!angular.isArray(a)){if(!angular.isObject(a))return;a=[a]}var i=[],n=[],o=[],t={};if(angular.forEach(a,function(e){e.official?o.push(e):e.localAndExternal?n.push(e):angular.isString(e.workshopid)&&(i.push(e),t[e.workshopid]=!0)}),0<i.length&&0===n.length&&0===o.length&&!G())z();else{var r=i.concat(n).concat(o);if(0!==r.length){var l=[];if(angular.forEach(w.wallpapers,function(e){angular.isString(e.dependency)&&t[e.dependency]&&!i.includes(e)&&l.push(e)}),i=i.concat(l),e){var s=p(r),c=p(l);h(["ui_browse_modal_unsubscribe_body","ui_browse_modal_remove_local_body","ui_browse_modal_remove_preset_info"],{title:s,presets:c}).then(function(e){return S.open("genericConfirm",{data:{title:0<i.length?"ui_browse_modal_unsubscribe_header":"ui_browse_modal_remove_local_header",message:(0<i.length?e.ui_browse_modal_unsubscribe_body:e.ui_browse_modal_remove_local_body)+(0<l.length?e.ui_browse_modal_remove_preset_info:""),okVisible:!0,cancelVisible:!0}})}).then(d)}else d()}}function d(){if(0<i.length&&x.callDeferred("browseWallpaperObject","unsubscribe",i.map(function(e){return e.workshopid})),0<n.length){var e=n.map(function(e){return e.file});Z(e),x.callDeferred("browseWallpaperObject","removeLocalWallpaperFromHistory",e)}if(0<o.length){var t=o.map(function(e){return e.file});Z(t),x.callDeferred("browseWallpaperObject","removeOfficialWallpaper",t)}X(),a.includes(w.currentSelection)&&pe(w.currentSelection,w.sourceIsInstalled)}function p(e){for(var t="",a=Math.min(3,e.length),i=0;i<a;++i)t+=e[i].title,i+1<a&&(t+=", ");return a<e.length&&(t+=", ... ("+e.length+")"),t}}function ge(n,o){if(angular.isString(n)&&angular.isArray(w.browserSettings.applicationwhitelist)&&w.browserSettings.applicationwhitelist.includes(n))return _.when();var r=3;return h(["ui_browse_modal_application_warning_body","ui_browse_modal_application_warning_timer"],{filepath:n,time:r}).then(function(t){var a={title:"ui_browse_modal_application_warning_header",message:t.ui_browse_modal_application_warning_body+t.ui_browse_modal_application_warning_timer,leftIcon:"images/warning.png",okClass:"btn-danger",okText:"ui_browse_modal_proceed",okVisible:!0,okDisabled:!0,cancelVisible:!0,leftVisible:angular.isObject(o),leftClass:"btn-danger",leftText:"ui_browse_details_btn_unsubscribe",leftAction:"unsubscribe",checkboxCenterVisible:!0,checkboxChecked:!1,checkboxTitle:"ui_browse_modal_application_warning_disable_checkbox"},i=function(){h("ui_browse_modal_application_warning_timer",{time:r-=1}).then(function(e){a.message=t.ui_browse_modal_application_warning_body+e,0<r?b(i,1e3):a.okDisabled=!1})};return b(i,1e3),S.open("genericConfirm",{data:a},{backdropClass:"modal-backdrop-danger"}).then(function(e){return"unsubscribe"===e?(ue(o),_.reject()):(a.checkboxChecked&&(angular.isArray(w.browserSettings.applicationwhitelist)?w.browserSettings.applicationwhitelist.push(n):w.browserSettings.applicationwhitelist=[n]),e)})})}function fe(){var t=[];return angular.forEach(w.monitors,function(e){!e.isInGroup&&angular.isObject(w.monitorSplits[e.location])||t.push(e)}),angular.forEach(w.monitorSplits,function(e){e.left&&!e.left.isInGroup&&angular.isUndefined(w.monitorSplits[e.left.location])&&t.push(e.left),e.right&&!e.right.isInGroup&&angular.isUndefined(w.monitorSplits[e.right.location])&&t.push(e.right)}),angular.forEach(w.monitorGroups,function(e){t.push(e)}),t}function me(e){var i=[];return angular.forEach(e,function(e){"folder"===e.type?(angular.forEach(e.items,function(e,t){var a=ie(t)||ae(t);a&&i.push(a)}),i=i.concat(me(e.subfolders))):i.push(e)}),i}function ve(e,t){var a;if(0===w.multiSelection.length&&t)return a=[t],e&&(a=me(a)),a;a=w.multiSelection.slice(),w.currentSelection&&a.unshiftIfNew(w.currentSelection),t&&a.unshiftIfNew(t),e&&(a=me(a));var i=K();i=me(i);var n=[];return angular.forEach(a,function(e){i.includes(e)&&"downloadable"!==e.status&&n.push(e)}),n}function he(i){function n(e){if(!w.sourceIsExplore){var t=angular.element(e);t&&t[0].scrollIntoView&&t[0].scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}}b(function(){if(angular.isObject(w.wallpaperConfig)&&angular.isObject(w.selectedMonitor)&&angular.isObject(w.wallpaperConfig.selectedwallpapers)){var t=i||w.currentSelection;if(!angular.isObject(t)&&w.wallpaperConfig.selectedwallpapers.hasOwnProperty(w.selectedMonitor.location)){var e=w.wallpaperConfig.selectedwallpapers[w.selectedMonitor.location];t=w.currentSelection=ne(e)}if(angular.isObject(t)){window.safeApply(w);var a=0;angular.forEach(w.sortedWallpapers,function(e){t===e&&n("#wpimg"+a),++a}),a=0,angular.forEach(w.sortedFolders,function(e){t===e&&n("#wpfolder"+a),++a})}}})}function be(e){w.selectedMonitor=e;var t=w.wallpaperConfig.selectedwallpapers[e.location];w.currentSelection=angular.isObject(t)?ne(t):void 0,he()}function _e(){if(angular.isArray(w.monitors)&&angular.isObject(w.wallpaperConfig)&&angular.isObject(w.wallpaperConfig.selectedwallpapers)&&(angular.forEach(w.wallpaperConfig.selectedwallpapers,function(e,t){var a=ee(t);if(angular.isObject(a)){if(!angular.isArray(a.missingPlaylistItems)&&angular.isObject(e.playlist)&&(a.playlist=se(e.playlist),a.playlist.items=[],a.missingPlaylistItems=angular.isArray(e.playlist&&e.playlist.items)?e.playlist.items:[],a.missingPlaylistItems=a.missingPlaylistItems.map(function(e){return{name:e.file||e,daytimeend:e.daytimeend,preset:e.preset}})),angular.isArray(a.missingPlaylistItems))for(var i=0;i<a.missingPlaylistItems.length;++i){var n=a.missingPlaylistItems[i],o=ae(n.name);if(angular.isObject(o)){a.missingPlaylistItems.splice(i,1),--i;var r=a.playlist.items.indexOf(n.stub);angular.isObject(n.stub)&&0<=r?a.playlist.items.splice(r,1,{wallpaper:o,daytimeend:n.daytimeend,preset:n.preset}):a.playlist.items.push({wallpaper:o,daytimeend:n.daytimeend,preset:n.preset}),a.playlistFlags[n.name]=!0}else angular.isObject(n.stub)||(n.stub={wallpaper:{file:n.name,preview:"images/nopreview.jpg",status:"error"},daytimeend:n.daytimeend,preset:n.preset,isStub:!0},a.playlist.items.push(n.stub))}a.playlist&&a.playlist.items&&re(a.playlist.items)}}),!A)){var n=!0;angular.forEach(w.wallpaperConfig.selectedwallpapers,function(e,t){var a=ne(e),i=ee(t);n=angular.isDefined(a),angular.isObject(a)&&angular.isObject(i)&&(i.wallpaper=a)}),A=n}}function we(e,t){if(t=t||w.selectedMonitor&&w.selectedMonitor.location,!angular.isUndefined(t)&&angular.isObject(e)){var a=w.wallpaperConfig.selectedwallpapers[t]||{};if(a.file=e.file,w.wallpaperConfig.selectedwallpapers[t]=a,w.selectedMonitor&&w.selectedMonitor.location===t)w.currentSelection=e,w.selectedMonitor.wallpaper=e;else{var i=ee(t);angular.isObject(i)&&(i.wallpaper=e)}x.callDeferred("browseWallpaperObject","selectWallpaper",e.file,t,e.overridetype)}}function ye(e){x.callDeferred("browseWallpaperObject","updateProfile",e)}function ke(){if(angular.isArray(w.queryWallpapers)&&angular.isArray(w.wallpapers))for(var e=0;e<w.queryWallpapers.length;++e){var t=w.queryWallpapers[e];if(angular.isString(t.workshopid))for(var a=0;a<w.wallpapers.length;++a){var i=w.wallpapers[a];if(t.workshopid===i.workshopid&&t!==i){w.queryWallpapers.splice(e,1,i),w.currentSelection===t&&w.callbackWallpaperSelected(i);break}}}}function Se(e){angular.isObject(I)&&angular.forEach(e,function(e){var t=I[e.file];angular.isObject(t)&&(angular.isObject(e.properties)||(e.properties={}),angular.merge(e.properties,t.properties),e.defaultproperties=t.defaultproperties,e.propertyPresets=t.presets,e.monitorPresets=t.monitorpresets)})}function xe(e){if(angular.isArray(e))return angular.forEach(e,xe);w.multiSelection.includes(e)||w.multiSelection.push(e)}function Ee(e){if(angular.isArray(e))return angular.forEach(e,Ee);e===w.currentSelection&&(w.currentSelection=void 0),w.multiSelection.findAndRemove(e)}function Ce(e){if(!w.sourceIsWorkshop)return angular.isArray(e)?angular.forEach(e,Ce):void(w.multiSelection.includes(e)||w.currentSelection===e?Ee(e):xe(e))}function Te(){w.multiSelection=[]}function Ie(e){angular.isArray(e)||(e=[e]),angular.forEach(e,function(e){"folder"===e.type&&w.folders.findAndRemove(e)}),function e(a,t){angular.forEach(t,function(t){angular.forEach(a,function(e){"folder"===e.type?t.subfolders.findAndRemove(e):delete t.items[e.workshopid||e.file]}),e(a,t.subfolders)})}(e,w.folders)}function Ae(e,t){angular.isArray(e)||(e=[e]),e.findAndRemove(function(e){return e===t}),Ie(e),t?angular.forEach(e,function(e){"folder"===e.type?t.subfolders.push(e):t.items[e.workshopid||e.file]=!0}):angular.forEach(e,function(e){"folder"===e.type&&w.folders.pushIfNew(e)})}function Oe(e,t){Ae(ve(!1,e),t)}function Pe(e){ue(ve(!0,e),!0)}w.filterStatus={},w.updateWallpapers=function(e,t){var a=function(e,t){for(var a={newWallpapers:[],shouldSort:!1},i={},n=0;n<w.wallpapers.length;++n){var o=w.wallpapers[n];o.ispreset&&(angular.isArray(i[o.dependency])||(i[o.dependency]=[]),i[o.dependency].push(o))}var r=[];for(n=0;n<e.length;++n){var l,s,c=e[n],d=!1,p="unsubscribed"===c.status;if(angular.isDefined(c.workshopid))for(l=0;l<t.length;++l)if(s=t[l],angular.isDefined(s.workshopid)&&s.workshopid===c.workshopid)if(d=!0,p){var u=w.currentSelection===s;w.sourceIsInstalled?(u&&(w.currentSelection=void 0),a.shouldSort=!0):(angular.merge(s,c),s.status="downloadable"),pe(s,w.sourceIsInstalled),t.splice(l,1),--l}else{var g=!1;s.status!==c.status&&"installed"===c.status?(angular.isArray(i[c.workshopid])&&(r=r.concat(i[c.workshopid])),w.currentSelection===s&&(g=!(w.currentSelection=void 0))):w.currentSelection===s&&"installed"===c.status&&c.ispreset&&(g=!(w.currentSelection=void 0)),angular.merge(s,c),g&&w.callbackWallpaperSelected(s)}if(c.local)for(l=0;l<t.length;++l)(s=t[l]).local&&s.file===c.file&&(angular.merge(s,c),d=!0,a.shouldSort=!0);c.approved=0<=c.tags.indexOf("Approved"),d||p||a.newWallpapers.push(c)}for(n=0;n<a.newWallpapers.length;++n){var f=a.newWallpapers[n];angular.isArray(i[f.workshopid])&&(r=r.concat(i[f.workshopid]))}return 0<r.length&&(r=r.map(function(e){return e.workshopid}),x.callDeferred("browseWallpaperObject","queryWorkshopIds",r)),a}(e,w.wallpapers);if(Se(a.newWallpapers),Array.prototype.push.apply(w.wallpapers,a.newWallpapers),0<a.newWallpapers.length||a.shouldSort){var i=function(a){return function(t){var e=a.findAndReplace(function(e){return e.workshopid&&e.workshopid===t.workshopid},t);0<e.length&&e[0]===w.currentSelection&&w.callbackWallpaperSelected(t)}};w.sourceIsExplore?(angular.forEach(w.sortedExploreQueries,function(e){angular.isArray(e.wallpapers)&&angular.forEach(a.newWallpapers,i(e.wallpapers))}),angular.forEach(a.newWallpapers,i(w.sortedWallpapers))):w.sourceIsWorkshop&&angular.forEach(a.newWallpapers,i(w.sortedWallpapers)),X()}else Q();_e(),(angular.isUndefined(t)||angular.isUndefined(w.currentSelection))&&"workshop"!==w.source&&he(),ke()},w.selectWallpaperByProject=function(e){var t=ae(e.file);t&&(e.reload&&x.callDeferred("browseWallpaperObject","removeWallpaper",{location:w.selectedMonitor.location,playlist:!1}),we(t))},w.registerSteamUser=function(e){var t=w.steamUserInfos[e.id]||{};t.name=e.name,t.avatar=e.avatar,w.steamUserInfos[e.id]=t};var Me={},Re={};w.onTotalCountReceived=function(e){Re[e.preset]&&(Re[e.preset].resolve(e.count),delete Re[e.preset]),Me[e.preset]=e.count},w.getNumberOfWorkshopPresets=function(e){return angular.isNumber(Me[e.workshopid])?Me[e.workshopid]:(angular.isUndefined(Me[e.workshopid])&&(Me[e.workshopid]="?",x.callDeferred("browseWallpaperObject","queryWorkshop",{preset:e.workshopid,callback:"onTotalCountReceived",totalOnly:!0})),"?")},w.callbackWallpaperAllMouse=function(e,a,t){switch(t.stopPropagation(),e){case"left":if(t.ctrlKey&&w.sourceIsInstalled)Ce(a);else if(t.shiftKey&&w.sourceIsInstalled){Te(),xe(a);var i=!1;angular.forEach(K(),function(e){e!==a&&w.currentSelection!==e||(i=!i),i&&xe(e)})}else{w.callbackWallpaperSelected(a);var n=angular.element(t.target).closest(".browseWallpaperImage")[0];n&&n.scrollIntoView&&n.scrollIntoView({behavior:"smooth",inline:"nearest",block:"nearest"})}break;case"right":var o,r=y.builder();if(angular.isObject(a)){if("downloadable"!==a.status)r.button("ui_browse_context_menu_add_to_playlist","fas fa-plus",function(){w.callbackToggleAllWallpapersInCurrentMonitorPlaylist(a,!1,!0)}),w.selectedMonitor.playlistFlags[a.file]&&r.button("ui_browse_context_menu_remove_from_playlist","fas fa-minus",function(){w.callbackToggleAllWallpapersInCurrentMonitorPlaylist(a)});if("downloadable"!==a.status&&0<w.folders.length)if(1<w.folders.length||w.folders[0]!==a){var l=y.builder();angular.isObject(w.currentFolder)&&l.button("ui_browse_navigation_top",function(){Oe(a)}),function t(e,a,i,n,o){angular.forEach(e,function(e){e!==a&&(e!==w.currentFolder&&n.button(i+e.title,"",function(){o(e)}),t(e.subfolders,a,e.title+" / ",n,o))})}(w.folders,a,"",l,function(e){Oe(a,e)}),r.subMenu("ui_browse_context_menu_move_to",l)}if(a.workshopid){if("downloadable"===a.status?r.button("ui_browse_context_menu_subscribe","fas fa-download",function(){w.subscribeWorkshopItem(a)}):r.button("ui_browse_context_menu_unsubscribe","fas fa-times",function(){0===w.multiSelection.length?ue(a,!0):Pe(a)}),"Web"===a.type){var s=a.ispreset?ie(a.dependency)||{title:a.dependency,workshopid:a.dependency}:a;r.button(h.instant("ui_browse_details_properties_preset_browse_workshop",{count:"?"}),"fab fa-steam",function(){w.callbackBrowsePresets(s)}).id("presetbrowse"),function(e){if(angular.isNumber(Me[e.workshopid]))return _.when(Me[e.workshopid]);x.callDeferred("browseWallpaperObject","queryWorkshop",{preset:e.workshopid,callback:"onTotalCountReceived",totalOnly:!0});var t=_.defer();return(Re[e.workshopid]=t).promise}(s).then(function(e){return h("ui_browse_details_properties_preset_browse_workshop",{count:e})}).then(function(e){r.updateLabel("presetbrowse",e)})}r.button("ui_browse_context_menu_report","fas fa-exclamation-triangle",function(){G()?w.openReportDialog(a):z()},void 0,"browserReportButton")}else(a.localAndExternal||a.official)&&r.button("ui_browse_context_menu_remove","fas fa-times",function(){0===w.multiSelection.length?ue(a,!0):Pe(a)});if(a&&"folder"!==a.type&&(w.sourceIsInstalled||a.workshopid||"installed"===a.status)&&(r.divider(),a.workshopid&&r.button("ui_browse_context_menu_workshop","fab fa-steam",function(){w.openSteamWorkshopPage(a.workshopid)}),"installed"===a.status&&"URL"!==a.type&&(r.button("ui_editor_filemenu_open_in_explorer","fas fa-folder-open",function(){x.callDeferred("browseWallpaperObject","openInExplorer",a.project||a.file)}),r.button("ui_browse_context_menu_play_in_window","fas fa-window-maximize",function(){x.callDeferred("browseWallpaperObject","playInWindow",{file:a.file,location:w.selectedMonitor.location})})),w.sourceIsInstalled||"installed"===a.status)){var c=(m=a,angular.forEach(w.sharedSettings.hotkeys,function(e){e.value===m.file&&e.location===w.selectedMonitor.location&&"wallpaper"===e.action&&(v=e)}),v);c?r.button("ui_browse_context_menu_remove_hotkey","fas fa-times",function(){w.sharedSettings.hotkeys.findAndRemove(c)}):r.button("ui_browse_context_menu_assign_hotkey","fas fa-key",function(){S.open("browseAssignHotkey",{data:{hotkeys:w.sharedSettings.hotkeys}}).then(function(e){w.sharedSettings.hotkeys.push({action:"wallpaper",keys:e,location:w.selectedMonitor.location,value:a.file,title:a.title})})})}}if(w.sourceIsInstalled&&(r.empty()||r.divider(),r.button("ui_browse_context_menu_create_folder","fas fa-plus",function(){var a={title:"ui_browse_modal_folder_create_title",cancelVisible:!0,okVisible:!0,textinputVisible:!0};h("ui_browse_context_menu_new_folder_name").then(function(e){return a.textinput=a.textinputDefault=e,S.open("genericConfirm",{data:a})}).then(function(){var e=w.currentFolder&&w.currentFolder.subfolders||w.folders,t={type:"folder",title:0===a.textinput.length?a.textinputDefault.toString():a.textinput.toString(),subfolders:[],items:{}};e.push(t),X(),he(t)})}),a&&"folder"===a.type)){r.button("ui_browse_context_menu_remove_folder","fas fa-times",function(){var t={message:"ui_browse_modal_folder_remove_body",checkboxTitle:"ui_browse_modal_folder_remove_unsubscribe_and_remove_items",checkboxVisible:!0,okVisible:!0,cancelVisible:!0};h("ui_browse_modal_folder_remove_title",{title:a.title}).then(function(e){return t.title=e,S.open("genericConfirm",{data:t})}).then(function(){t.checkboxChecked&&ue(me([a])),Ie(a)})});var d=y.builder(),p=function(e){e?a.folderIcon=e:delete a.folderIcon};d.button("","fas fa-folder browseFolderIconEnlarge",p),d.button("","fas fa-star browseFolderIconEnlarge",p,"fas fa-star"),d.button("","fas fa-heart browseFolderIconEnlarge",p,"fas fa-heart"),d.button("","fas fa-gem browseFolderIconEnlarge",p,"fas fa-gem"),d.button("","fas fa-car browseFolderIconEnlarge",p,"fas fa-car"),d.button("","fas fa-rocket browseFolderIconEnlarge",p,"fas fa-rocket"),d.button("","far fa-snowflake browseFolderIconEnlarge",p,"fas fa-snowflake"),d.button("","fas fa-thumbs-up browseFolderIconEnlarge",p,"fas fa-thumbs-up"),d.button("","fas fa-gamepad browseFolderIconEnlarge",p,"fas fa-gamepad"),d.button("","fas fa-gift browseFolderIconEnlarge",p,"fas fa-gift"),d.button("","fas fa-music browseFolderIconEnlarge",p,"fas fa-music"),d.button("","fas fa-trash browseFolderIconEnlarge",p,"fas fa-trash"),d.button("","fas fa-bug browseFolderIconEnlarge",p,"fas fa-bug"),d.button("","fas fa-magic browseFolderIconEnlarge",p,"fas fa-magic"),r.subMenu("ui_browse_context_menu_change_icon",d);var u=y.builder(),g=function(e){e?a.folderColor=e:delete a.folderColor};u.button("ui_browse_context_menu_default",g),u.button("","fas fa-square browseFolderColorBlue",g,"browseFolderColorBlue"),u.button("","fas fa-square browseFolderColorMagenta",g,"browseFolderColorMagenta"),u.button("","fas fa-square browseFolderColorRed",g,"browseFolderColorRed"),u.button("","fas fa-square browseFolderColorBrightYellow",g,"browseFolderColorBrightYellow"),u.button("","fas fa-square browseFolderColorYellow",g,"browseFolderColorYellow"),u.button("","fas fa-square browseFolderColorGreen",g,"browseFolderColorGreen"),r.subMenu("ui_browse_context_menu_change_color",u)}r.divider();var f=y.builder().button("ui_browse_context_menu_icon_small","small"===w.browserSettings.viewiconsize?"fas fa-check":"",function(){w.browserSettings.viewiconsize="small"}).button("ui_browse_context_menu_icon_medium","medium"===w.browserSettings.viewiconsize?"fas fa-check":"",function(){w.browserSettings.viewiconsize="medium"}).button("ui_browse_context_menu_icon_large","large"===w.browserSettings.viewiconsize?"fas fa-check":"",function(){w.browserSettings.viewiconsize="large"}).divider().slider("fas fa-adjust",{value:w.browserSettings.viewopacity||100,max:100,min:20,onChange:function(e){e=Math.max(20,e),x.callDeferred("browseWallpaperObject","setBrowserOpacity",e),w.browserSettings.viewopacity!==e&&(o&&b.cancel(o),o=b(function(){w.browserSettings.viewopacity=e},250))}});r.subMenu("ui_browse_context_menu_view",f).open(w,t);break;case"dbl":if(a&&"folder"===a.type)return;w.callbackOk(!0)}var m,v},w.callbackWallpaperSelectionRectangle=function(e,t){t.ctrlKey?Ce(e):(t.shiftKey||(Te(),w.currentSelection=void 0),xe(e))};var De=0;function We(t){return t&&t.isGroup?t:(t&&t.isInGroup&&w.monitorGroups&&angular.forEach(w.monitorGroups,function(e){0<=e.monitors.indexOf(t.location)&&(a=e)}),a);var a}function je(){var e,t=w.monitorProfile.splits||{},a=w.monitorProfile.groups||{},i=angular.copy(t),g={};if(w.monitorGroups={},w.monitorSplits={},angular.forEach(w.monitors,function(e){e.isInGroup=!1,e.isClone=!1,e.group=void 0}),0===w.wallpaperConfig.layout){angular.forEach(t,function(e,t){if(angular.isObject(e)){var a=ee(t);!angular.isObject(a)||a.isInGroup||a.isGroup||function e(t,a,i,n,o){o=o||{splitIndex:1,rootLocation:i,deviceName:n.name+" Split "},a.left=a.left||{},a.right=a.right||{},a.left.index=n.index,a.right.index=n.index,a.location=i,a.left.location=i+"/L",a.right.location=i+"/R",a.left.rootLocation=o.rootLocation,a.right.rootLocation=o.rootLocation,a.left.isSplit=!0,a.right.isSplit=!0,a.w=n.w,a.h=n.h,a.left.playlistFlags={},a.left.playlist={items:[],settings:{delay:60,order:"random",mode:"timer",clock:"clock24",transition:!1,videosequence:!1,updateonpause:!1}},a.right.playlistFlags={},a.right.playlist={items:[],settings:{delay:60,order:"random",mode:"timer",clock:"clock24",transition:!1,videosequence:!1,updateonpause:!1}},0===a.direction?(a.left.h=n.h,a.right.h=n.h,a.left.w=a.position*n.w,a.right.w=n.w-a.position*n.w,a.left.x=n.x,a.right.x=n.x+a.position*n.w,a.left.y=n.y,a.right.y=n.y):(a.left.w=n.w,a.right.w=n.w,a.left.h=a.position*n.h,a.right.h=n.h-a.position*n.h,a.left.x=n.x,a.right.x=n.x,a.left.y=n.y,a.right.y=n.y+a.position*n.h),angular.isObject(t[a.left.location])?e(t,t[a.left.location],a.left.location,a.left,o):(a.left.splitIndex=o.splitIndex++,a.left.name=o.deviceName+a.left.splitIndex),angular.isObject(t[a.right.location])?e(t,t[a.right.location],a.right.location,a.right,o):(a.right.splitIndex=o.splitIndex++,a.right.name=o.deviceName+a.right.splitIndex)}(i,i[t],t,a)}}),w.monitorSplits=i;var f=0;angular.forEach(a,function(a,e){if(angular.isObject(a)){var t,i,n,o,r,l,s,c,d,p,u={};t=a.monitors,i=e,n=u,c=!(s=l=-(r=o=99999)),d=[],p=[],angular.forEach(t,function(e){var t=ee(e);angular.isObject(t)?(o=Math.min(t.x,o),r=Math.min(t.y,r),l=Math.max(t.x+t.w,l),s=Math.max(t.y+t.h,s),d.push(t.name),p.push(t.location)):c=!0}),!c&&(n.x=o,n.y=r,n.w=l-o,n.h=s-r,n.location=i,n.monitors=p,n.name="Group ("+d.join(", ")+")",n.isGroup=!0,n.playlistFlags={},n.playlist={items:[],settings:{delay:60,order:"random",mode:"timer",clock:"clock24",transition:!1,videosequence:!1,updateonpause:!1}})&&(u.index=f++,u.layout=a.layout,g[e]=u,angular.forEach(a.monitors,function(e){var t=ee(e);t.isInGroup=!0,t.isClone=2===a.layout,t.group=u}))}})}else if(2===w.wallpaperConfig.layout){var n=w.monitors.find(function(e){return 0===e.index});angular.forEach(w.monitors,function(e){e.isClone=0!==e.index,e.isClone?e.group=n:e.group=void 0})}w.monitorGroups=g,e=fe(),w.showMonitorRow=1<e.length||0<e.length&&e[0].isGroup||1===w.monitors.length&&Y(w.monitors[0])}function Fe(a){angular.forEach(angular.copy(w.monitorProfile.splits),function(e,t){t.startsWith(a)&&t.substr(a.length).match(/^[\/LR]*$/)&&(de(t+"/L"),de(t+"/R"),delete w.monitorProfile.splits[t])})}function Le(e,t){var a=w.monitorProfile.splits[e],i=w.monitorProfile.splits[e+"/R"];if(angular.isObject(i)&&i.direction===a.direction){var n=a.position+(1-a.position)*i.position;n-=t,i.position=n/(1-t)}return!!angular.isObject(a)&&(a.position=t,!0)}function Ne(e,n,o){o=o||[],angular.forEach(e,function(e,t){var a={};a[t]=e.properties,e.properties=a,angular.isObject(I[e.file])||(I[e.file]={}),angular.merge(I[e.file],e);var i=ae(e.file);i&&o.push(i),n[t]={file:e.file,playlist:angular.copy(e.playlist)}})}function He(){return angular.isString(w.selectedMonitor&&w.selectedMonitor.location)&&angular.isObject(w.currentSelection)}function $e(e){var a={};return angular.forEach(e,function(e,t){a[t]=e.value}),a}function Be(a){var e,t,i,n={file:w.currentSelection.file,location:w.selectedMonitor.location,properties:(e=w.currentSelection.defaultproperties,t=a,i=angular.copy(e||{}),angular.forEach(t,function(e,t){i[t]=i[t]||{},i[t].value=e}),i)};x.callDeferred("browseWallpaperObject","applySingleProperty",angular.toJson(n));var o=w.currentSelection.properties[w.selectedMonitor.location];angular.forEach(o,function(e,t){angular.isDefined(a[t])&&(e.value=a[t])})}function qe(t){function e(){x.callDeferred("browseWallpaperObject","saveWallpaperPresets",{file:t.file,presets:JSON.clean(t.propertyPresets)})}var a=_.when();return angular.isArray(t.propertyPresets)||(a=x.callDeferred("browseWallpaperObject","getWallpaperPresets",{file:t.file}).then(function(e){t.propertyPresets=e.presets,t.monitorPresets=e.monitorpresets})),a.then(function(){return S.open("browseCollections",{data:{type:"presets",isSaving:!1,collections:t.propertyPresets,onDeleted:e}})})}function Ue(e){for(var t=0;t<e.length;++t){var a=e[t];angular.isString(a.title)&&0!==a.title.length?a.approved=0<=a.tags.indexOf("Approved"):(e.splice(t,1),--t)}}w.callbackWallpaperSelected=function(e){if("folder"!==e.type){if(w.currentSelection!==e&&"error"!==e.status&&0===De){angular.isObject(w.currentSelection)&&angular.isObject(e)&&(w.currentSelection.title!==e.title||w.currentSelection.workshopid!==e.workshopid)&&(w.preview.play=!1);var t,a=_.when();"application"!==e.type.toLowerCase()||"installed"!==e.status||!angular.isDefined(e.workshopid)||(t=e,0<=g.indexOf(t.authorsteamid)||0<=t.tags.indexOf("Approved"))||e.local||(De=e.workshopid,a=ge(e.file,e)),"installed"===e.status&&(a=a.then(function(){return w.promptWallpaperDependencySubscription(e)})),a.then(function(){"installed"===(w.currentSelection=e).status&&we(e)}).finally(function(){De=0})}}else w.navigateFolder(e)},w.callbackRemoveWallpaperAndPlaylistFromMonitor=function(e){de(e)},w.navigateFolder=function(e){w.currentFolder=e,X(),w.folderNavigation=function a(e,i){var n;return angular.forEach(e,function(e){if(e===i)n=[e];else{var t=a(e.subfolders,i);t&&(n=[e].concat(t))}}),n}(w.folders,e),Te()},w.navigateFolderUp=function(){!angular.isArray(w.folderNavigation)||w.folderNavigation.length<2?w.navigateFolder():w.navigateFolder(w.folderNavigation[w.folderNavigation.length-2])},w.callbackSplitSelectedMonitor=function(t){S.open("browseSplitMonitor",{data:{config:{direction:0,position:.5},name:t.name,bounds:[{max:t.w},{max:t.h}]}}).then(function(e){w.monitorProfile.splits=w.monitorProfile.splits||{},w.monitorProfile.splits[t.location]=e.config,je(),ye(w.monitorProfile),w.callbackSelectMonitor(w.monitorSplits[t.location].left),t.wallpaper&&we(t.wallpaper)})},w.callbackRemoveSplit=function(e){var t=e.location.slice(0,-2);Fe(t),je(),ye(w.monitorProfile),angular.forEach(w.monitors,function(e){e.location===t&&w.callbackSelectMonitor(e)});var a="L"===t[t.length-1],i=t.slice(0,-2);angular.forEach(w.monitorSplits,function(e,t){t===i&&w.callbackSelectMonitor(a?e.left:e.right)})},w.callbackSplitMoved=function(e,t){if(Le(e,t)){var a=w.selectedMonitor&&w.selectedMonitor.location;je(),ye(w.monitorProfile);var i=a&&ee(a);i&&w.callbackSelectMonitor(i)}},w.callbackSplitDblClick=function(t){var e=ee(t),a=w.monitorProfile.splits[t];angular.isObject(a)&&angular.isObject(e)&&S.open("browseSplitMonitor",{data:{config:angular.copy(a),name:e.name,bounds:[{max:e.w},{max:e.h}]}}).then(function(e){a.direction===e.config.direction?Le(t,e.config.position):a=angular.merge(a,e.config),je(),ye(w.monitorProfile)})},w.callbackCreateGroup=function(e){var t=w.monitorSelectionState.createGroup;if(w.monitorSelectionState.createGroup=0,!(e.length<2)){var a,i;2!==t&&angular.forEach(e,function(e){e.isGroup||Fe(e.location)});var n=e.find(function(e){return e.isGroup?e:e.isInGroup?We(e):void 0});if(angular.isObject(n)){a=n.location;var o=w.monitorProfile.groups[n.location];angular.isObject(o)&&(o.layout=t,angular.forEach(e,function(e){if(e.isGroup){var t=w.monitorProfile.groups[e.location];angular.forEach(t&&t.monitors,function(e){-1===o.monitors.indexOf(e)&&o.monitors.push(e)})}else{-1===o.monitors.indexOf(e.location)&&o.monitors.push(e.location)}})),angular.forEach(e,function(e){e!==n&&e.isGroup&&delete w.monitorProfile.groups[e.location]})}else{w.monitorProfile.groups=w.monitorProfile.groups||{};var r="";for(angular.forEach(e,function(e){r+=e.location}),a="group_"+r.hashCode();angular.isDefined(w.monitorProfile.groups[a]);)a="group_"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,6);var l={monitors:e.map(function(e){return e.location}),layout:t};w.monitorProfile.groups[a]=l,n=ee(a),w.selectedMonitor&&(i=w.selectedMonitor.wallpaper)}je(),ye(w.monitorProfile),n=ee(a),angular.isObject(n)&&(w.callbackSelectMonitor(n),angular.isDefined(i)&&we(i))}},w.callbackRemoveGroup=function(a){var i;if(w.monitorProfile.groups&&(a.isGroup?i={location:a.location,monitors:w.monitorProfile.groups&&w.monitorProfile.groups[a.location]&&w.monitorProfile.groups[a.location].monitors}:angular.forEach(w.monitorProfile.groups,function(e,t){e.monitors.includes(a.location)&&(i={location:t,monitors:e.monitors})}),angular.isObject(i))){var t;for(de(i.location),delete w.monitorProfile.groups[i.location],je(),ye(w.monitorProfile),angular.forEach(i.monitors,function(e){t=t||ee(e)});t&&angular.isDefined(w.monitorSplits&&w.monitorSplits[t.location]);)t=w.monitorSplits[t.location].left;t?w.callbackSelectMonitor(t):w.selectedMonitor=void 0}},w.callbackCancelMonitorGrouping=function(e){0!==w.monitorSelectionState.createGroup&&(w.monitorSelectionState.createGroup=0,e.stopPropagation(),e.preventDefault())},w.callbackMonitorRightClick=function(e,a){if(0===w.wallpaperConfig.layout){var t=y.builder(),i=fe(),n=1<i.length;if(1<i.length&&angular.isObject(a.wallpaper)){var o=y.builder(),r=y.builder();angular.forEach(i,function(t){a.location===t.location||t.isInGroup||(o.button(t.name,function(){we(a.wallpaper,t.location)}),r.button(t.name,function(){var e=t.wallpaper;we(a.wallpaper,t.location),angular.isObject(e)&&we(e,a.location)}))}),t.subMenu("ui_browse_monitors_copy_to",o),t.subMenu("ui_browse_monitors_swap_with",r)}!n&&!a.isGroup||t.empty()||t.divider(),n&&(a.isSplit||a.isGroup&&2===a.layout||t.button("ui_browse_monitors_add_stretch_group","fas fa-object-group",function(){w.callbackSelectMonitor(a),w.monitorSelectionState.createGroup=1}),t.button("ui_browse_monitors_add_clone_group","fas fa-clone",function(){w.callbackSelectMonitor(a),w.monitorSelectionState.createGroup=2})),a.isGroup&&t.button("ui_browse_monitors_remove_group","fas fa-object-ungroup",function(){w.callbackRemoveGroup(a)}),a.isGroup||a.isInGroup||(t.button("ui_browse_monitors_add_split","fas fa-cut",function(){w.callbackSplitSelectedMonitor(a)}),Y(a)&&!a.isSplit?t.button("ui_browse_monitors_auto_split","fas fa-magic",function(){x.callDeferred("browseWallpaperObject","readSurroundDisplayInfo").then(function(e){angular.isString(e.error)?S.open("genericConfirm",{data:{title:"ui_browse_monitors_auto_split_error_header",message:e.error,okVisible:!0}}):angular.isObject(e.splits)&&(Fe(a.location),angular.merge(w.monitorProfile.splits,e.splits),je(),ye(w.monitorProfile),w.callbackSelectMonitor(w.monitorSplits[a.location].left))})}):a.isSplit&&t.button("ui_browse_monitors_remove_all_splits","fas fa-times",function(){Fe(a.rootLocation),je(),ye(w.monitorProfile),w.callbackSelectMonitor(ee(a.rootLocation))})),t.empty()||t.open(w,e)}},w.callbackSplitRightClick=function(e,t){var a=y.builder();a.button("ui_browse_monitors_edit_split","fas fa-edit",function(){w.callbackSplitDblClick(t)}).button("ui_browse_monitors_remove_split","fas fa-times",function(){w.callbackRemoveSplit(ee(t+"/L"))}),a.open(w,e)},w.applyMonitorConfigurationAndWallpaperConfig=function(e,t){var a={x0:0,y0:0,x1:0,y1:0},i=436,n=178;angular.forEach(e,function(e){a.x0=Math.min(a.x0,e.x0),a.y0=Math.min(a.y0,e.y0),a.x1=Math.max(a.x1,e.x1),a.y1=Math.max(a.y1,e.y1)});var o=a.x1-a.x0,r=a.y1-a.y0,l=i/o,s=n/r,c=Math.min(l,s);w.monitorScale=c,w.monitorSelectionBoxStyle="width:"+o*c+"px;height:"+r*c+"px;position:absolute;";var d=[];angular.forEach(e,function(e){var t={};t.x=e.x0,t.y=e.y0,t.w=e.x1-e.x0,t.h=e.y1-e.y0,t.index=e.index,t.location=e.location,t.name=e.name,0===e.index&&(t.selected=!0),t.playlistFlags={},t.playlist={items:[],settings:{delay:60,order:"random",mode:"timer",clock:"clock24",transition:!1,videosequence:!1,updateonpause:!1}},d.push(t)}),d.sort(function(e,t){return e.index<t.index?-1:e.index>t.index?1:0}),w.monitors=d;var p=t.wallpaperconfig||{};if(p.selectedwallpapers=p.selectedwallpapers||{},w.wallpaperConfig=p,w.monitorProfile=t.wallpaperconfig&&t.wallpaperconfig.profile||{},je(),0<d.length){var u=d[0];if(angular.isDefined(u&&w.monitorSplits[u.location]))for(;angular.isDefined(w.monitorSplits[u.location]);)u=w.monitorSplits[u.location].left;u.isInGroup&&(u=We(u)||u),be(u)}w.browserSettings={advertiseexplore:!0,advertiseworkshop:!0,advertiseworkshoppopup:!0,viewiconsize:"medium",explore:{favorites:[],liked:[],disliked:[],custom:[]},folders:[]};var g=function(e){if(angular.isObject(e)){var a=angular.copy(e);return angular.forEach(e,function(e,t){angular.isNumber(e)&&(a[t]=2!==e)}),a}};angular.isObject(t.browser)&&(angular.merge(w.browserSettings,t.browser),angular.merge(M,t.browser.filterinfo.installed||{}),angular.merge(R,t.browser.filterinfo.workshop||{}),w.filterProxy.ratingtags=angular.copy(M.ratingtags),M.tags=g(M.tags),R.tags=g(R.tags)),w.folders=w.browserSettings.folders;var f={};Ne(t.wallpaperproperties,f),Se(w.wallpapers),p.selectedwallpapers=f,angular.isArray(t.localfiles)&&(t.localfiles.map(function(e){J(e)}),X()),_e(),he(),w.showMonitorRow?w.changeMonitorActive=!0:w.canAdvertiseWorkshop=!0;var m=[];if(angular.forEach(w.monitors,function(e){angular.isObject(e.wallpaper)&&m.push(e.wallpaper)}),Se(m),w.playlists=t.playlists||[],w.profiles=t.profiles||[],w.sharedSettings=t.shared||{},k.validateSharedSettings(w.sharedSettings),b(function(){E=!0}),t.browseroptions){if(t.browseroptions.safemodewarning){var v={title:"ui_browse_modal_safe_mode_header",message:"ui_browse_modal_safe_mode_body",okVisible:!0,cancelVisible:!0,checkboxLowVisible:!0,checkboxChecked:!0,checkboxTitle:"ui_browse_use_safe_mode"},h=function(){v.checkboxChecked||x.callDeferred("browseWallpaperObject","disableSafeMode")};S.open("genericConfirm",{data:v}).then(function(){x.callDeferred("browseWallpaperObject","reloadWallpaperConfig"),h()}).catch(function(){h()})}t.browseroptions.showworkshop&&w.setListSource("explore")}},w.updateConfigWallpaperProperties=function(e){if(w.wallpaperConfig&&w.wallpaperConfig.selectedwallpapers){var t=[];Ne(e,w.wallpaperConfig.selectedwallpapers,t),Se(t),A=!1,_e(),we(w.selectedMonitor&&w.selectedMonitor.wallpaper)}},w.applyUserVote=function(t,a){angular.forEach(K(),function(e){e.workshopid===t&&(e.uservote=a)}),window.safeApply(w)},w.setWallpaperProperties=function(t){var e=function(e){angular.isObject(e)&&e.file===t.file&&(e.properties=e.properties||{},e.properties[t.location]=t.properties,e.defaultproperties=t.defaultproperties,e.propertyPresets=t.presets,e.monitorPresets=t.monitorpresets)};angular.forEach(w.wallpapers,e),e(w.currentSelection),V()},w.updateWorkshopStatus=function(e){(w.steamWorkshopStatus=e).complete&&b(function(){w.steamWorkshopStatus.hidden=!0},5e3),G()||(w.canAdvertiseWorkshop=!1)},w.openSteamUserPage=function(e){window.ui.shellexecute("steam://url/SteamIDPage/"+e)},w.openSteamWorkshopPage=function(e){window.ui.shellexecute("steam://url/CommunityFilePage/"+e)},w.openReportDialog=function(e){S.open("browseReport",{data:{wallpaper:e,backendUrl:w.backendUrl,steamAuth:w.steamAuth}})},w.promptWallpaperDependencySubscription=function(t){var e=_.when();if(angular.isString(t.dependency)){var a=!0;angular.forEach(w.wallpapers,function(e){e.workshopid===t.dependency&&"unsubscribed"!==e.status&&(a=!1)}),a&&(e=h("ui_browse_modal_subscribe_preset_body",{title:t.title}).then(function(e){return S.open("genericConfirm",{data:{title:"ui_browse_modal_subscribe_preset_header",message:e,okVisible:!0,cancelVisible:!0,leftVisible:!0,leftClass:"btn-default",leftText:"ui_browse_modal_subscribe_preset_open_dependency",leftAction:"opendependency",leftCallback:function(){w.openSteamWorkshopPage(t.dependency)}}}).then(function(){x.callDeferred("browseWallpaperObject","subscribeWorkshopItem",t.dependency)})}))}return e},w.subscribeWorkshopItem=function(e){w.promptWallpaperDependencySubscription(e).then(function(){x.callDeferred("browseWallpaperObject","subscribeWorkshopItem",e.workshopid)})},w.openFromFile=function(){x.callDeferred("browseWallpaperObject","openFromFile").then(function(e){return e.toLowerCase().includes(".exe")?ge(e).then(function(){return e}):e}).then(function(e){var t=J(e);Ae(t,w.currentFolder),X(),we(t),he(),x.callDeferred("browseWallpaperObject","addLocalWallpaperToHistory",[t.file])})},w.openFromUrl=function(){S.open("openFromUrl").then(function(e){if(angular.isString(e)&&0<e.length){var t=J(e,"Web");Ae(t,w.currentFolder),X(),we(t),he(),x.callDeferred("browseWallpaperObject","addLocalWallpaperToHistory",[t.file])}})},w.getUserVote=function(e){x.callDeferred("browseWallpaperObject","getUserVote",e.workshopid)},w.setUserVote=function(e,t){G()?x.callDeferred("browseWallpaperObject","setUserVote",e.workshopid,t):z()},w.callbackSetFavorited=function(e,t){G()?x.callDeferred("browseWallpaperObject","setFavorited",e.workshopid,t):z()},w.sendCommand=function(e,t){angular.isDefined(t)?x.callDeferred("browseWallpaperObject",e,t):x.callDeferred("browseWallpaperObject",e)},w.toggleMonitorSelection=function(){w.changeMonitorActive=!w.changeMonitorActive,w.changeMonitorActive||(w.monitorSelectionState.createGroup=0),w.changeMonitorActive||!w.browserSettings.advertiseworkshop&&!w.browserSettings.advertiseexplore||(w.canAdvertiseWorkshop=!0)},w.callbackOk=function(e){e?"downloadable"===w.currentSelection.status?w.subscribeWorkshopItem(w.currentSelection):"installed"===w.currentSelection.status&&x.callDeferred("browseWallpaperObject","acceptAndClose"):x.callDeferred("browseWallpaperObject","acceptAndClose")},w.callbackClose=function(){x.callDeferred("browseWallpaperObject","cancelAndClose")},w.callbackSelectMonitor=function(e,t){0===w.wallpaperConfig.layout&&be(e),t&&w.toggleMonitorSelection()},w.callbackWallpaperPropertyChanged=function(e,t){if("slider"===t.type){if(C[e]===t.value)return;C[e]=t.value}if(!T&&angular.isString(w.selectedMonitor.location)){var a=angular.copy(t),i={file:w.currentSelection.file,location:w.selectedMonitor.location,properties:{}};i.properties[e]=a,x.callDeferred("browseWallpaperObject","applySingleProperty",angular.toJson(i))}},w.callbackResetCurrentWallpaperProperties=function(){He()&&S.open("genericConfirm",{data:{title:"ui_browse_details_properties_reset_prompt_header",message:"ui_browse_details_properties_reset_prompt_body",okVisible:!0,cancelVisible:!0}}).then(function(){w.currentSelection.properties[w.selectedMonitor.location]=angular.copy(w.currentSelection.defaultproperties),angular.forEach(w.currentSelection.properties[w.selectedMonitor.location],function(e,t){w.callbackWallpaperPropertyChanged(t,e)})})},w.callbackSaveWallpaperProperties=function(){He()&&S.open("browseCollections",{data:{isSaving:!0,type:"presets",collections:w.currentSelection.propertyPresets||[]}}).then(function(t){w.currentSelection.propertyPresets=w.currentSelection.propertyPresets||[];var e=w.currentSelection.propertyPresets.find(function(e){return e.name===t.name});if(angular.isObject(e))angular.merge(e.properties,$e(w.currentSelection.properties[w.selectedMonitor.location]));else{var a={name:t.name,properties:$e(w.currentSelection.properties[w.selectedMonitor.location])};w.currentSelection.propertyPresets.push(a)}x.callDeferred("browseWallpaperObject","saveWallpaperPresets",{file:w.currentSelection.file,presets:JSON.clean(w.currentSelection.propertyPresets)})})},w.callbackLoadWallpaperProperties=function(){He()&&qe(w.currentSelection).then(function(e){Be(e.properties)})},w.callbackShareWallpaperProperties=function(){if(He()){var t=$e(w.currentSelection.properties[w.selectedMonitor.location]);S.open("browseWallpaperSharePreset",{data:{preset:t}}).then(function(e){angular.isObject(e)&&!angular.equals(t,e)&&Be(e)})}},w.callbackShowSettings=function(){x.callDeferred("browseWallpaperObject","showSettingsDialog")},w.callbackShowEditor=function(){x.callDeferred("browseWallpaperObject","showEditorDialog")},w.callbackUnsubscribeOrRemove=function(e){ue(e,!0)},w.callbackSelectFileForProperty=function(t,e){x.callDeferred("browseWallpaperObject","selectFileForProperty",e,t.fileType||"").then(function(e){t.value=e,w.callbackWallpaperPropertyChanged(t.key,t)})},w.callbackRemoveFileForProperty=function(e){e.value="",w.callbackWallpaperPropertyChanged(e.key,e)},w.callbackOpenDirectory=function(e){angular.isString(e)&&x.callDeferred("browseWallpaperObject","openDirectory",e)},w.evalCondition=function(e){return w.selectedMonitor&&w.selectedMonitor.location&&w.$eval(e,w.currentSelection.properties[w.selectedMonitor.location])},w.callbackClickSteamStatus=function(){angular.isObject(w.steamWorkshopStatus)&&w.steamWorkshopStatus.error&&z()},w.callbackResetFilter=function(){w.sourceIsExplore||(w.filter=U(w.source),w.filterProxy.ratingtags=angular.copy(w.filter.ratingtags),w.sourceIsWorkshop?R=w.filter:w.sourceIsInstalled&&(M=w.filter))},w.callbackToggleResolutionFilter=function(e,t){e.preventDefault(),e.stopPropagation(),angular.forEach(w.filterResolutionTags,function(e){w.filter.resolutiontags[e.value]=t})},w.callbackToggleGenreFilter=function(e,t){e.preventDefault(),e.stopPropagation(),angular.forEach(w.filterAllTags,function(e){"Unspecified"===e.value&&w.sourceIsWorkshop?w.filter.tags[e.value]=!1:w.filter.tags[e.value]=t})};var Ve={},ze={},Ge={},Ye={},Qe=[],Ke={},Xe={},Je={},Ze=_.when(),et=!0,tt=!0,at={};function it(){return angular.isString(w.exploreNavigation[0].key)?ze[w.exploreNavigation[0].key]:[]}function nt(e){return w.browserSettings.explore&&w.browserSettings.explore.disliked.includes(e.name)}function ot(e){return w.browserSettings.explore&&w.browserSettings.explore.liked.includes(e.name)}function rt(){var t=0;angular.forEach(w.sortedExploreQueries,function(e){(e.loading||e.showError)&&++t});var e=w.exploreNavigation[0].key;e&&0===t&&(Xe[e]<=0&&(Xe[e]=5),w.refreshExplore())}var lt=0;function st(e){var t=it();t.findAndRemove(e);var a=w.exploreNavigation[0].key;if(a)if(0===t.length)ze[a]=Ye[a],Ye[a]=[];else for(;25<w.sortedExploreQueries.length;){var i=w.sortedExploreQueries.shift();Ye[a].push(i)}w.sortedExploreQueries.push(e),w.performExploreQuery(e)}function ct(e){return angular.isArray(e)||(e=[e]),e.filter(function(e){return e}).map(function(e){switch(e.tags=e.tags||["None"],angular.isNumber(e.weight)?e.weight=Math.floor(e.weight):e.weight=1,nt(e)?e.currentPriority=0:e.currentPriority=e.priority||0,k.updateQueryName(e),e.category){case"genre":e.title="trend_year"===e.querytype?"ui_browse_explore_category_genre_popular":"trend_week"===e.querytype?"ui_browse_explore_category_genre_recent":"subscriptions"===e.querytype?"ui_browse_explore_category_genre_most_subscribed":"ui_browse_explore_category_genre_new";break;case"creator":angular.isArray(e.includetags)&&0<e.includetags.length?e.title="published_desc"===e.querytype?"ui_browse_explore_category_creator_genre_recent":"ui_browse_explore_category_creator_genre_popular":e.title="published_desc"===e.querytype?"ui_browse_explore_category_creator_recent":"ui_browse_explore_category_creator_popular";break;case"collection":e.title="ui_browse_explore_category_collection";break;case"keyword":e.title="trend_year"===e.querytype?"ui_browse_explore_category_keyword_popular":"trend_week"===e.querytype?"ui_browse_explore_category_keyword_recent":"subscriptions"===e.querytype?"ui_browse_explore_category_keyword_most_subscribed":"ui_browse_explore_category_keyword_new"}return e}),e}function dt(){w.sortedWallpapers=[],F.visible=!1,F.current=1}function pt(){if(w.sourceIsWorkshop){var e=angular.isString(w.filterPreset.workshopid),a={requiredTags:[],excludedTags:[],sort:w.filter.sort,text:w.filter.text,preset:w.filterPreset.workshopid,page:L.current,filterTitle:w.filter.filterTitle,nocache:w.queryNoCache,token:++P};angular.forEach(w.filter.tags,function(e,t){e||a.excludedTags.push(t)}),angular.forEach(w.filter.utilitytags,function(e,t){1===e?a.requiredTags.push(t):2===e&&a.excludedTags.push(t)}),e||(angular.forEach(w.filter.categorytags,function(e,t){e||a.excludedTags.push(t)}),angular.forEach(w.filter.typetags,function(e,t){e||a.excludedTags.push(t)}),angular.forEach(w.filter.resolutiontags,function(e,t){e||a.excludedTags.push(t)})),angular.forEach(w.filter.ratingtags,function(e,t){e||a.excludedTags.push(t)}),w.queryActive=!0,w.showErrorInBackground=!1,w.sortedWallpapers=[],w.sortedFolders=[],w.sortedExploreQueries=[],x.callDeferred("browseWallpaperObject","queryWorkshop",a).then(function(e){w.queryActive=!1,w.queryNoCache=!1,w.sourceIsWorkshop&&(e.token===a.token?(w.queryWallpapers=e.wallpapers,ke(),w.sortedWallpapers=w.queryWallpapers,Ue(w.queryWallpapers),$(L,a.page,e.pagecount),"queryMostPopular"===e.action&&(w.filter.sort="trend_year")):pt())}).catch(function(){1<L.current?(L.current=1,w.queryNoCache=!0,pt()):w.hasShownSteamServiceError?(w.showErrorInBackground=!0,w.queryActive=!1):(w.hasShownSteamServiceError=!0,w.showErrorInBackground=!0,w.queryActive=!1,S.open("genericConfirm",{data:{title:"ui_browse_no_service_header",message:"ui_browse_no_service_body",okVisible:!0}}))})}}w.performExploreQuery=function(t,a){if(w.sourceIsExplore){"creator"===t.category&&angular.isUndefined(w.steamUserInfos[t.itemid])&&x.callDeferred("browseWallpaperObject","pollSteamUserInfo",t.itemid);var i={sort:t.querytype,category:t.category,text:t.keyword,requiredTags:angular.isArray(t.includetags)&&t.includetags.concat(["Everyone"]),excludedTags:t.excludetags,limit:a?0:20,page:F.current,nocache:w.queryNoCache,token:++P,fullQueryToken:++lt};switch(t.category){case"creator":case"collection":i.itemid=t.itemid;break;case"keyword":i.searchText=t.keyword;break;case"misc":delete i.requiredTags,delete i.excludedTags,delete i.text}a?(w.sortedWallpapers=[],w.queryActive=!0,w.showErrorInBackground=!1,F.query=t):(t.wallpapers=[],t.loading=!0,t.showError=!1,i.page=1);var e=Ze.then(function(){return x.callDeferred("browseWallpaperObject","queryWorkshop",i).then(function(e){t.loading=!1,w.sourceIsExplore&&e.token===i.token&&(a&&P!==i.token||(angular.isObject(e.collection)&&(t.collection=e.collection),w.queryWallpapers=e.wallpapers,ke(),Ue(w.queryWallpapers),0!==e.wallpapers.length||t.custom||w.sortedExploreQueries.findAndRemove(t),a?(w.queryActive=!1,w.sortedWallpapers=w.queryWallpapers,$(F,i.page,e.pagecount),F.visible=1<e.pagecount):(w.queryWallpapers.shuffle(),t.wallpapers=w.queryWallpapers,w.refreshExplore())))}).catch(function(){t.loading=!1,t.showError=!0,w.hasShownSteamServiceError||(w.hasShownSteamServiceError=!0,S.open("genericConfirm",{data:{title:"ui_browse_no_service_header",message:"ui_browse_no_service_body",okVisible:!0}}))})});a||(Ze=e)}},w.exploreScrollSentinelChanged=function(e){(et=e)&&rt()},w.refreshExplore=function(){if(w.sourceIsExplore&&tt){var t=w.exploreNavigation[0].key,e=t?Xe[t]:0;if(t&&et&&e<1&&(e=Xe[t]=1),t&&0<e){var a=it();if("home"===t){if(ct(a),0===a.length)return;!function(){Je={tagCounts:{},categoryCounts:{},maxTagCount:{},categoryMaxCounts:{}},angular.forEach(Ge.home,function(e){angular.forEach(e.tags,function(e){angular.isNumber(Je.tagCounts[e])?++Je.tagCounts[e]:Je.tagCounts[e]=1}),angular.isNumber(Je.categoryCounts[e.category])?++Je.categoryCounts[e.category]:Je.categoryCounts[e.category]=1}),angular.forEach(Ve.home,function(e){angular.forEach(e.tags,function(e){angular.isNumber(Je.maxTagCount[e])?++Je.maxTagCount[e]:Je.maxTagCount[e]=1}),angular.isNumber(Je.categoryMaxCounts[e.category])?++Je.categoryMaxCounts[e.category]:Je.categoryMaxCounts[e.category]=1}),angular.forEach(Ve.home,function(e){var t=ot(e),a=nt(e),i=t?1:a?-1:0;0!==i&&angular.forEach(e.tags,function(e){angular.isNumber(Je[e])?Je[e]+=i:Je[e]=i})});var t=0,a=0;angular.forEach(Je,function(e){e<0&&(t=Math.min(t,e)),0<e&&(a=Math.max(a,e))}),t=Math.min(-1,t),a=Math.max(1,a),Je.mins=t,Je.maxs=a}(),angular.forEach(Qe.slice(),function(e){var i={weight:0,tag:"",failCount:0};angular.forEach(e.dependenttags,function(e){var t=Math.floor(2.01*(Je[e]||0)),a=Ke[e]||0;a=Math.min(a,3),0<t&&a<t?t>i.weight&&(i.weight=t,i.tag=e):++i.failCount}),0<i.weight&&0===i.failCount&&(angular.isNumber(Ke[i.tag])?++Ke[i.tag]:Ke[i.tag]=1,Qe.findAndRemove(e),Ve[t].push(e),a.push(e))}),a.shuffle(),angular.forEach(a,function(a){var e,t,i,n,o,r=(e=a,angular.isNumber(Je.categoryCounts[e.category])?.9*(1-Je.categoryCounts[e.category]/Je.categoryMaxCounts[e.category])+.1:1),l=(t=a,i=1,angular.forEach(t.tags,function(e){if(angular.isNumber(Je.tagCounts[e])){var t=1-Je.tagCounts[e]/Je.maxTagCount[e];i=Math.min(t,i)}}),.9*i+.1),s=(n=a,o=1,angular.forEach(n.tags,function(e){angular.isNumber(Je[e])&&(o+=Je[e])}),o=(o-Je.mins)/(Je.maxs-Je.mins),nt(n)&&(o=0),Math.easeInOutQuad(o)*(ot(n)?1.9:2));if(a.currentWeight=Math.log(1+s*(l+r)),!nt(a))if(angular.isNumber(a.priority))a.currentWeight+=a.priority;else{var c=!1;angular.forEach(a.tags,function(e){if(angular.isNumber(at[e])){var t=Math.pow(Math.clamp(at[e]-3,0,4)/4,2);Math.random()<t&&(a.currentWeight=999,at[e]=0,c=!0)}}),c&&angular.forEach(angular.copy(at),function(e,t){at[t]=.21*e})}}),a.sort(function(e,t){return e.currentPriority!==t.currentPriority?t.currentPriority-e.currentPriority:t.currentWeight-e.currentWeight});var i=a[0],n=k.getAvailableTags();angular.forEach(n,function(e){i.tags.includes(e)?at[e]=0:(!angular.isNumber(Je[e])||0<=Je[e])&&(angular.isNumber(at[e])?++at[e]:at[e]=1)}),st(i),--Xe[t]}else if(w.browserSettings.explore){for(var o="favorites"===t?w.browserSettings.explore.favorites:w.browserSettings.explore.disliked,r=o.length-1;0<=r;--r){var l=o[r],s=function(e){return e.name===l};if(!Ve[t].find(s)){var c=Ve.home.find(s);angular.isObject(c)||(c=Qe.find(s)),c&&(Ve[t].push(c),a.push(c))}}if(ct(a),0===a.length)return;st(a[a.length-1]),--Xe[t]}}}},w.pushExplorePage=function(e){var t=w.exploreNavigation[0].key;t&&(Ge[t]=w.sortedExploreQueries),dt(),w.exploreNavigation.unshift(e),e.key?(w.sortedExploreQueries=[],Ge[e.key]=[],ze[e.key]=Ve[e.key].slice(),angular.frameTimeout(b,2,rt)):(w.sortedExploreQueries=[],w.performExploreQuery(e,!0))},w.popExplorePage=function(){if(dt(),1<w.exploreNavigation.length){w.exploreNavigation.shift();var e=w.exploreNavigation[0];e.key?(w.sortedExploreQueries=Ge[e.key],w.sortedExploreQueries.length<5&&(Xe[e.key]=5)):w.sortedExploreQueries=[],angular.frameTimeout(b,2,w.refreshExplore)}},w.addExploreCustomFavoriteQuery=function(){S.open("browseExploreCreateQuery",{data:{isEditing:!1,query:{category:"keyword"}}}).then(function(e){console.log("create query",e),w.browserSettings.explore.custom.push(angular.copy(e)),e.custom=!0,ct(e),Ve.favorites.push(e),w.sortedExploreQueries.unshift(e),w.performExploreQuery(e)})},w.exploreCustomRemoveCallback=function(t){w.browserSettings.explore.custom=w.browserSettings.explore.custom.filter(function(e){if(e.category!==t.category||e.querytype!==t.querytype||"keyword"===e.category&&e.keyword!==t.keyword||"creator"===e.category&&e.itemid!==t.itemid||"collection"===e.category&&e.itemid!==t.itemid)return!0}),w.sortedExploreQueries.findAndRemove(t),Ve.favorites.findAndRemove(t),t===w.exploreNavigation[0]&&w.popExplorePage()},w.exploreLikedCallback=function(e,t,a){angular.isDefined(e)?(e?(w.browserSettings.explore.liked.includes(a.name)?w.browserSettings.explore.liked.findAndRemove(a.name):w.browserSettings.explore.liked.push(a.name),w.browserSettings.explore.disliked.findAndRemove(a.name)):(w.browserSettings.explore.liked.findAndRemove(a.name),w.browserSettings.explore.disliked.includes(a.name)?w.browserSettings.explore.disliked.findAndRemove(a.name):w.browserSettings.explore.disliked.push(a.name)),w.browserSettings.explore.hasLikedAny=!0):angular.isDefined(t)&&(t?w.browserSettings.explore.favorites.push(a.name):w.browserSettings.explore.favorites.findAndRemove(a.name))};var ut,gt,ft={category:"preset",publishedItems:[]};function mt(e){if(50<w.selectedMonitor.playlist.items.length)return e;e=Math.clamp(e,0,1);return 5*Math.floor(1440*e/5)/1440}w.onReceivePresets=function(e){ft.publishedItems=ft.publishedItems.concat(e)},w.callbackPublishPreset=function(){if(!G())return z();var e={dependency:w.currentSelection.workshopid};ft.dependentProject={tags:w.currentSelection.tags.split(",")},ft.publishedItems=[];var a={};angular.forEach(w.currentSelection.properties[w.selectedMonitor.location],function(e,t){a[t]={value:e.value,type:e.type}}),x.callDeferred("browseWallpaperObject","preparePublishPreset",w.currentSelection.file,{properties:a,dependency:w.currentSelection.workshopid}).then(function(){return S.open("editorSteamPublish",{projectData:e,editorSettings:ft})})},w.callbackBrowsePresets=function(e){if(!G())return z();w.setListSource("workshop"),w.filterPreset.title=e.title,w.filterPreset.workshopid=e.workshopid,pt()},w.callbackClearPresetFilter=function(){delete w.filterPreset.workshopid,pt()},w.callbackShowPresetHint=function(){S.open("genericConfirm",{data:{title:"ui_browse_details_properties_preset_hint_header",message:"ui_browse_details_properties_preset_hint_body",okVisible:!0}})},w.showPresetPublishOptions=function(e){return e.workshopid&&!w.steamWorkshopStatus.error&&"Web"===e.type&&!e.ispreset},w.onFileSubscriptionError=function(){w.hasShownSteamServiceError||(w.hasShownSteamServiceError=!0,S.open("genericConfirm",{data:{title:"ui_browse_no_service_header",message:"ui_browse_no_service_body",okVisible:!0}}))},w.showWorkshopAdvertiseModal=function(e,t){t&&t.stopPropagation(),w.browserSettings.filterpreset=w.browserSettings.filterpreset||{};var n=[{value:"Animal"},{value:"Anime"},{value:"Fantasy"},{value:"Game"},{value:"Nature"},{value:"Pixel art"},{value:"Sci-Fi"},{value:"Vehicle"}];S.open("browseWallpaperWorkshopInfo",{data:{filterPreset:w.browserSettings.filterpreset,canCancel:e,genreList:n}}).then(function(t){w.filter.tags=q(!1),w.filter.utilitytags.Approved=0,w.filter.utilitytags["Audio responsive"]=0,w.filter.tags.Unspecified=!1,w.filter.tags.Memes=!1;var a=0;if(angular.forEach(n,function(e){t[e.value]&&++a}),1===a)angular.forEach(k.getAvailableTags(),function(e){w.filter.tags[e]=!1}),angular.forEach(n,function(e){t[e.value]&&(w.filter.tags[e.value]=!0)});else if(8===a)w.filter.tags.Memes=!0;else{var i={Animal:["Animal"],Anime:["Anime","Cartoon","Girls","Guys","MMD","Music","Television"],Fantasy:["Fantasy","Abstract","Relaxing","Medieval","Sports"],Game:["Game","CGI","Cyberpunk"],Nature:["Nature","Landscape"],"Pixel art":["Pixel art","Retro"],"Sci-Fi":["Sci-Fi","Technology"],Vehicle:["Vehicle"]};angular.forEach(n,function(e){t[e.value]||angular.forEach(i[e.value],function(e){w.filter.tags[e]=!1})})}t.Anime||(w.filter.tags.Anime=!1,w.filter.tags.MMD=!1)})},w.setListSource=function(e){if(w.source!==e){if(("workshop"===e||"explore"===e)&&!G())return z();"workshop"===e&&G()&&(w.browserSettings.advertiseworkshop=!1,w.browserSettings.advertiseworkshoppopup&&(w.browserSettings.advertiseworkshoppopup=!1,w.showFilter.visible=!0,w.showWorkshopAdvertiseModal())),"explore"===e&&G()&&(w.browserSettings.advertiseexplore=!1),w.canAdvertiseAny=!1,w.queryActive=!1,w.source=e,w.sourceIsWorkshop="workshop"===e,w.sourceIsExplore="explore"===e,w.sourceIsInstalled=!w.sourceIsWorkshop&&!w.sourceIsExplore,w.sourceIsWorkshop?(w.pagination=L,w.filter=R,w.sortOptions=W):w.sourceIsExplore?(w.pagination=F,w.filter={},w.sortOptions=[]):w.sourceIsInstalled&&(w.pagination=j,w.filter=M,w.sortOptions=D),w.filterProxy.ratingtags=angular.copy(w.filter.ratingtags),w.showFilter.counts=!1,w.sortedWallpapers=[],Te(),w.sourceIsExplore&&function(){if(w.sourceIsExplore){if(Ze=_.when(),Ve={home:ct(k.getStaticExploreQueries()),favorites:[],disliked:[]},ze={home:angular.copy(Ve.home),favorites:[],disliked:[]},Ge={home:[],favorites:[],disliked:[]},Ye={home:[],favorites:[],disliked:[]},Qe=[],Ke={},at={},F.visible=!1,F.current=1,Xe={home:5,favorites:5,disliked:5},w.exploreNavigation=[{title:"ui_browse_explore_home",key:"home"}],w.sortedWallpapers=[],w.sortedFolders=[],w.sortedExploreQueries=Ge.home,w.browserSettings.explore){var e=angular.copy(w.browserSettings.explore.custom).map(function(e){return e.custom=!0,e});ct(e),Ve.favorites=ze.favorites.concat(e),ze.favorites=Ve.favorites.slice()}t.get(w.backendUrl+"/api/explore/v1").then(function(e){var t=e&&e.data&&e.data.response&&e.data.response.items;if(angular.isArray(t)){var a=[],i=function(e){angular.isArray(e.dependenttags)&&0!==e.dependenttags.length?Qe.push(e):a.push(e)};angular.forEach(t,function(a){angular.isObject(a)&&angular.isString(a.category)&&angular.isArray(a.querytypes)&&("collection"===a.category?i(angular.copy(a)):angular.forEach(a.querytypes,function(e){var t=angular.copy(a);delete t.querytypes,t.querytype=e,i(t)}))}),ct(Qe),Qe.shuffle(),ct(a),angular.forEach(a,function(e){angular.isObject(e)&&(Ve.home.push(e),ze.home.push(e))}),rt()}}).catch(function(a){h("ui_browse_explore_server_error").then(function(e){var t=a&&a.status&&" (HTTP "+a.status+")";x.logError("Cannot connect to WEAPI server"+t),k.showWarning(e.toString())})}),w.refreshExplore()}}()}},w.getDisplayTags=function(e){e=e.split(",");var t=[],a=["Wallpaper","Preset","Web","Video","Scene","Application","Approved","Multi-monitor optimized","Workshop","Official","Local"];return angular.forEach(e,function(e){a.indexOf(e)<0&&t.push(e)}),t.join(", ")},w.callbackChangePage=function(e,t){var a=e;angular.isString(a)&&(a=w.pagination.current,"next"===e?++a:--a,a=Math.clamp(a,1,w.pagination.count)),(a!==w.pagination.current||t)&&($(w.pagination,a,w.pagination.count),w.sourceIsExplore?w.performExploreQuery(F.query,!0):w.sourceIsWorkshop?pt():(X(),v.scrollTop(0)))},w.callbackCancelEvent=window.cancelEventBubble,w.callbackToggleAllWallpapersInCurrentMonitorPlaylist=function(t,e,a){var i=w.selectedMonitor.playlist.items.findIndex(function(e){return e.wallpaper===t})<0||a,n=e?[t]:ve(!0,t);angular.forEach(n,function(t){var e=function(e){return e.wallpaper===t&&!a};(w.selectedMonitor.playlistFlags[t.file]=i)?w.selectedMonitor.playlist.items.pushIfNew({wallpaper:t},e):w.selectedMonitor.playlist.items.findAndRemove(e)}),ce()},w.callbackToggleEntryInCurrentMonitorPlaylist=function(a,e){var t=a.wallpaper,i=w.selectedMonitor.playlist.items.findIndex(function(e){return e===a}),n=w.selectedMonitor.playlist.items.filter(function(e){return e.wallpaper===t}).length,o=i<0,r=e?[t]:ve(!0,t);angular.forEach(r,function(e){w.selectedMonitor.playlistFlags[e.file]=o||1<n;var t=function(e){return e===a};o?w.selectedMonitor.playlist.items.pushIfNew({wallpaper:e},t):w.selectedMonitor.playlist.items.findAndRemove(t)}),ce()},w.callbackShowProfiles=function(o){var t=angular.copy(w.wallpaperConfig);t.selectedwallpapers=t.selectedwallpapers||{},t.profile=angular.copy(w.monitorProfile),angular.forEach(te(),function(e){angular.isObject(e.playlist)&&1<e.playlist.items.length&&angular.isObject(t.selectedwallpapers[e.location])?t.selectedwallpapers[e.location].playlist=le(e.playlist):angular.isObject(t.selectedwallpapers[e.location])&&delete t.selectedwallpapers[e.location].playlist});var e={isSaving:o,collectionItem:t,collections:w.profiles,hotkeys:w.sharedSettings.hotkeys,type:"profiles"};S.open("browseCollections",{data:e}).then(function(e){var t,a,i,n;o?(i=e,n=w.profiles.find(function(e){return e.name===i.name}),angular.isObject(n)?angular.merge(n,i):w.profiles.push(i),w.wallpaperConfig.name=i.name):(t=e,a=te(),angular.forEach(a,function(e){de(e.location),delete e.missingPlaylistItems}),w.wallpaperConfig=angular.copy(t),je(),A=!1,_e(),angular.forEach(angular.copy(w.wallpaperConfig.selectedwallpapers),function(e,t){angular.isString(e.file)&&we(ae(e.file),t)}),angular.forEach(a,ce),be(a[0]))})},w.callbackShowPlaylists=function(a){var e={isSaving:a,collectionItem:w.selectedMonitor.playlist,collections:w.playlists,hotkeys:w.sharedSettings.hotkeys,location:w.selectedMonitor.location,type:"playlists"};S.open("browseCollections",{data:e}).then(function(e){var t;a?function(t){t=le(t);var e=w.playlists.find(function(e){return e.name===t.name});angular.isObject(e)?(angular.merge(e,t),e.items=t.items):w.playlists.push(t)}(e):(t=se(t=e),w.selectedMonitor.playlist=t,w.selectedMonitor.playlistFlags={},angular.forEach(t.items,function(e){w.selectedMonitor.playlistFlags[e.wallpaper.file]=!0}),ce())})},w.callbackShowPlaylistSettings=function(){S.open("browsePlaylistSettings",{data:{settings:w.selectedMonitor.playlist.settings,defaultSettings:{delay:60,order:"random",mode:"timer",clock:"clock24",transition:!1,videosequence:!1,updateonpause:!1}}}).then(function(){ce()})},w.callbackClearPlaylist=function(){w.selectedMonitor.playlistFlags={},w.selectedMonitor.playlist.items=[],ce()},e.on("mousedown.daytimedrag",function(e){if(angular.element(e.target).hasClass("daytimeDragBorder")){var t=angular.element(angular.element(e.target).closest(".browseWallpaperPlaylistImage")[0]).scope();if(angular.isObject(t)&&angular.isObject(t.entry)){window.cancelEventImmediately(e);var a=angular.offsetToAncestor(e,m);ut={active:!1,entry:t.entry,lastX:a.left}}}}),e.on("mousemove.daytimedrag",function(e){if(angular.isDefined(ut)){var t=angular.offsetToAncestor(e,m);if(!ut.active)if(2<Math.abs(t.left-ut.lastX)){ut.active=!0,ut.indicator=angular.element(document.createElement("div")),ut.indicator.addClass("daytimeIndicator"),ut.indicator.css({left:t.left}),f.append(ut.indicator);var a=angular.element(document.createElement("div")),i=angular.element(document.createElement("div"));a.addClass("timeHint"),i.addClass("timeHintWrapper"),i.append(a),ut.indicator.append(i),a.text(o("date")(0,w.getTimelineFormat(),"+0000")),ut.timeHint=a}if(ut.active){ut.indicator.css({left:t.left});var n=t.left/m.innerWidth();n=mt(n)+1e-4,ut.timeHint.text(o("date")(24*n*60*60*1e3,w.getTimelineFormat(),"+0000"))}}}),e.on("mouseup.daytimedrag",function(e){if(angular.isObject(ut)&&ut.active){var t=angular.offsetToAncestor(e,m);ut.indicator.remove();var a=t.left/m.innerWidth();ut.entry.daytimeend=mt(a),ce()}ut=void 0,window.safeApply(w),window.cancelEventBubble(e)}),e.on("contextmenu.daytimedrag",function(e){var t,a,i=angular.element(e.target);if(i.hasClass("daytimeDragBorder")){if(t=angular.element(i.closest(".browseWallpaperPlaylistImage")[0]),a=t.scope(),!angular.isObject(a)||!angular.isObject(a.entry)||!angular.isNumber(a.entry.daytimeend))return;y.builder().button("ui_browse_context_menu_remove","fas fa-times",function(){delete a.entry.daytimeend,ce(),window.safeApply(w)}).open(w,e)}else if(i.hasClass("browseWallpaperPlaylistImageChild")){if(t=angular.element(i.closest(".browseWallpaperPlaylistImage")[0]),a=t.scope(),!angular.isObject(a)||!angular.isObject(a.entry))return;if(!angular.isObject(a.entry.wallpaper)||a.entry.wallpaper.isStub)return;var n=y.builder();a.entry.wallpaper!==w.currentSelection&&n.button("ui_browse_context_menu_replace_with_selection","fas fa-sync",function(){a.entry.wallpaper=w.currentSelection,ce(),window.safeApply(w)}),n.button("ui_browse_context_menu_choose_preset","fas fa-folder-open",function(){qe(a.entry.wallpaper).then(function(e){a.entry.preset=e.name,ce()})}),angular.isString(a.entry.preset)&&n.button("ui_browse_context_menu_remove_preset","fas fa-times",function(){delete a.entry.preset,ce()}),n.open(w,e)}}),w.getTimelineFormat=function(){return w.selectedMonitor&&w.selectedMonitor.playlist&&w.selectedMonitor.playlist.settings&&"clock12"===w.selectedMonitor.playlist.settings.clock?"hh:mma":"HH:mm"};var vt,ht,bt,_t=[];function wt(e){angular.forEach(e.items,function(e,t){w.folderRootExclusion[t]=!0}),angular.forEach(e.subfolders,wt)}function yt(){angular.forEach(w.filterUtilityTags,function(t){k.translateTag(t.value).then(function(e){t.label=e})}),angular.forEach(w.filterAllTags,function(t){k.translateTag(t.value).then(function(e){t.label=e})})}w.requestThumbnailPath=function(e){gt?_t.push(e.file):(gt=e.file,x.callDeferred("browseWallpaperObject","getThumbnail",gt))},w.onThumbnailReceived=function(t){t.file===gt&&(gt=void 0,0<_t.length&&(gt=_t.shift(),x.callDeferred("browseWallpaperObject","getThumbnail",gt))),angular.isString(t.preview)&&(angular.forEach(O,function(e){e.file===t.file&&(e.preview=t.preview,e.previewsmall=t.preview)}),vt||(vt=b(function(){w.sortedWallpapers=w.sortedWallpapers.slice(),vt=void 0},1e3)))},w.setSteamAuthTicket=function(e){w.steamAuth.ticket=e.ticket},w.resetSearchFilter=function(){w.filter.text="",angular.element("#browseSearchFilterText").focus()},(window.browseWallpapersCtrl=w).folders=[],w.folderRootExclusion={},w.currentFolder=void 0,w.steamAuth={},w.sortedExploreQueries=[],w.sourceIsInstalled=!0,w.steamUserInfos={},w.wallpapers=[],w.colorPickerOptions=k.getColorPickerDefaults(),w.source="installed",w.pagination=j,w.multiSelection=[],w.preview={play:!1},w.monitorSelectionState={createGroup:0},w.browserSettings={},w.filterProxy={},w.filter={},w.filterPreset={},w.showFilter={visible:!1,counts:!1},w.backendUrl="http://localhost:3000",w.canAdvertiseAny=!0,D=[{value:"name",label:"ui_browse_sort_name"},{value:"rating",label:"ui_browse_sort_rating"},{value:"favorite",label:"ui_browse_sort_favorite"},{value:"filesize",label:"ui_browse_sort_filesize"},{value:"subscriptiondate",label:"ui_browse_sort_subscription_date"},{value:"updatedate",label:"ui_browse_sort_last_updated"}],W=[{value:"trend_year",label:"ui_browse_query_sort_by_trend_year"},{value:"trend_month",label:"ui_browse_query_sort_by_trend_last_month"},{value:"trend_week",label:"ui_browse_query_sort_by_trend_last_week"},{value:"trend_today",label:"ui_browse_query_sort_by_trend_today"},{value:"most_recent",label:"ui_browse_query_sort_by_date"},{value:"most_up_votes",label:"ui_browse_query_sort_most_up_votes"},{value:"subscriptions",label:"ui_browse_query_sort_most_subscriptions"},{value:"top_rated",label:"ui_browse_query_sort_by_votes"},{type:"divider"},{value:"my_favorites",label:"ui_browse_query_sort_my_favorites"},{value:"voted_up",label:"ui_browse_query_sort_voted_up"},{value:"friends_favorites",label:"ui_browse_query_sort_friends_favorites"},{value:"friends_created",label:"ui_browse_query_sort_friends_created"},{value:"followers_created",label:"ui_browse_query_sort_by_followed_users"}],w.layouts=[{label:"ui_browse_monitors_layout_per_monitor",value:0},{label:"ui_browse_monitors_layout_fit",value:1},{label:"ui_browse_monitors_layout_clone_wallpaper",value:2}],w.$watch("currentSelection",function(e){C={},V(),angular.isDefined(e)&&(angular.isString(e.authorsteamid)&&angular.isUndefined(w.steamUserInfos[e.authorsteamid])&&x.callDeferred("browseWallpaperObject","pollSteamUserInfo",e.authorsteamid),angular.isDefined(e.workshopid)&&w.getUserVote(e)),angular.isObject(e&&e.localization)&&(s.insertTranslations(e.localization),h.refresh()),e&&Te()}),w.$watch("wallpaperConfig.layout",function(e,t){if(angular.isNumber(e)&&E&&e!==t)switch(x.callDeferred("browseWallpaperObject","changeLayout",e),je(),w.wallpaperConfig.layout){case 0:var a=w.monitors.find(function(e){return 0===e.index});be(a.group||a);break;case 1:be(w.monitors[0]);break;case 2:be(w.monitors.find(function(e){return 0===e.index}))}}),w.$on("onInternalDropStart",function(){w.isDragDropActive=!0}),w.$on("onInternalDropStop",function(){w.isDragDropActive=!1}),w.$watch("browserSettings",function(e){angular.isObject(e)&&E&&x.callDeferred("browseWallpaperObject","persistBrowserSettings",angular.toJson(e))},!0),w.$watch("sharedSettings",function(e){angular.isObject(e)&&E&&x.callDeferred("browseWallpaperObject","persistSharedSettings",angular.toJson(e))},!0),w.$watch("filter",function(e,t){if(angular.isObject(e)&&e!==t&&!w.sourceIsExplore){var a=bt!==w.sourceIsWorkshop;bt=w.sourceIsWorkshop,a||(w.pagination.current=1),w.filterStatus.type=w.filter.typetags&&(!w.filter.typetags.Scene||!w.filter.typetags.Video||!w.filter.typetags.Web||!w.filter.typetags.Application)||w.filter.categorytags&&(!w.filter.categorytags.Wallpaper||!w.filter.categorytags.Preset),w.filterStatus.rating=w.filter.ratingtags&&!w.filter.ratingtags.Everyone,w.filterStatus.source=w.filter.sourcetags&&(!w.filter.sourcetags.Workshop||!w.filter.sourcetags.Official||!w.filter.sourcetags.Local),w.filterStatus.resolution=!1,angular.forEach(w.filter.resolutiontags,function(e){!1===e&&(w.filterStatus.resolution=!0)}),w.filterStatus.tags=!1,angular.forEach(w.filter.utilitytags,function(e){0!==e&&(w.filterStatus.tags=!0)}),angular.forEach(w.filter.tags,function(e,t){!1===e&&"Unspecified"!==t&&(w.filterStatus.tags=!0)}),w.sourceIsWorkshop?(w.showFilter.counts=w.filterStatus.type||w.filterStatus.rating||w.filterStatus.source||w.filterStatus.resolution||w.filterStatus.tags,pt()):X(),angular.isDefined(ht)&&(b.cancel(ht),ht=void 0),E&&(ht=b(function(){w.browserSettings.filterinfo={installed:angular.copy(M),workshop:angular.copy(R)},delete w.browserSettings.filterinfo.installed.text,delete w.browserSettings.filterinfo.workshop.text},1e3))}},!0),w.$watch("filterProxy.ratingtags",function(e){w.sourceIsWorkshop&&angular.isObject(e)&&(e.Questionable||e.Mature)?w.browserSettings.agegateconfirmed?w.filter.ratingtags=angular.copy(e):S.open("ageGate").then(function(){w.filter.ratingtags=angular.copy(e),w.browserSettings.agegateconfirmed=!0}).catch(function(){w.filterProxy.ratingtags={Everyone:!0,Questionable:!1,Mature:!1}}):w.filter.ratingtags=angular.copy(e)},!0),w.$watch("folders",function(e,t){e!==t&&(w.folderRootExclusion={},angular.forEach(e,wt),X())},!0),w.$watch("playlists",function(e,t){angular.isArray(e)&&e!==t&&E&&x.callDeferred("browseWallpaperObject","playlistsChanged",angular.toJson(e))},!0),w.$watch("profiles",function(e,t){angular.isArray(e)&&e!==t&&E&&x.callDeferred("browseWallpaperObject","profilesChanged",angular.toJson(e))},!0),w.$on("onCppInit",function(e,t){w.filterAllTags=k.getAvailableTags(),w.filterUtilityTags=k.getAvailableTags(!0),w.filterSourceTags=k.getWallpaperSourceTags(),w.filterTypeTags=k.getWallpaperTypeTags(),w.filterCategoryTags=k.getWallpaperCategoryTags(),w.filterRatingTags=k.getWallpaperRatingTags(),w.filterResolutionTags=k.getResolutionTags(),w.filterAllTags=w.filterAllTags.map(function(e){return{label:e,value:e}}),w.filterUtilityTags=w.filterUtilityTags.map(function(e){return{label:e,value:e}}),w.filterUtilityTags.splice(2,1),w.filterResolutionTags=w.filterResolutionTags.map(function(e){return{label:e.replace(/Standard Definition/g,"SD"),value:e}}),M=U(),R=U("workshop"),w.sortOptions=D,w.filter=M,yt(),w.backendUrl=t?"http://localhost:3000":"https://www.wallpaperengineapi.com:3000"}),i.$on("$translateChangeEnd",yt),e.on("keydown.wpe.wallpaperbrowser",function(e){if(!(0<angular.element(":focus").length||S.isAnyModalVisible())){if(37<=e.keyCode&&e.keyCode<=40){var t=w.sortedWallpapers.indexOf(w.currentSelection),a=v,i=angular.element("#wpimg0"),n=a.width(),o=i.width(),r=Math.floor(n/o);switch(e.keyCode){case 37:t-=1;break;case 38:t-=r;break;case 39:t+=1;break;case 40:t+=r}angular.isNumber(t)&&0<=t&&t<w.sortedWallpapers.length&&!w.changeMonitorActive&&w.callbackWallpaperSelected(w.sortedWallpapers[t])}else 46===e.keyCode?Pe():e.ctrlKey&&65===e.keyCode&&(xe(w.sortedWallpapersPrePagination),xe(w.sortedFoldersPrePagination));window.safeApply(w)}});var kt={findElement:function(e){var t=angular.element(angular.element(e.target).closest(".browseWallpaperPlaylistImage")[0]),a=t.scope();if(angular.isObject(a)){var i=a.entry&&a.entry.wallpaper;return angular.isObject(i)?{element:t,data:a.entry}:void 0}}};l.registerInitiator(kt),w.dropFile=function(e){var t=[];if(angular.forEach(e,function(e){t.push(J(e))}),0<t.length){var a=t[0];Ae(t,w.currentFolder),X(),we(a),he(a),x.callDeferred("browseWallpaperObject","addLocalWallpaperToHistory",t.map(function(e){return e.file}))}};var St,xt=function(){return tt=!1,_.when()};function Et(){St&&(St.remove(),St=void 0)}function Ct(e,t){for(var a=m.children(),i=e.pageX-m[0].getBoundingClientRect().left,n=0,o=0;o<a.length;++o){var r=angular.element(a[o]).outerWidth(!0);if(i<n+.5*r)return t?n:o;n+=r}return t?n:a.length}r.addCloseCallback(xt),w.$on("$destroy",function(){r.removeCloseCallback(xt),e.off("keydown.wpe.wallpaperbrowser"),e.off("mousedown.daytimedrag"),e.off("mousemove.daytimedrag"),e.off("mouseup.daytimedrag"),e.off("contextmenu.daytimedrag"),l.unregisterInitiator(kt),l.unregisterContainer(f),l.unregisterContainer(v)}),l.registerContainer(f,{onMouseEnter:function(){(St=angular.element(document.createElement("div"))).addClass("browseWallpaperPlaylistHoverIndicator"),f.append(St)},onMouseLeave:function(){Et()},onMouseMove:function(e){!function(e){if(St){var t=Ct(e,!0);St.css({left:t})}}(e)},onElementDropped:function(e,t){Et(),delete t.daytimeend;var a=Ct(e,!1),i=w.selectedMonitor.playlist.items.indexOf(t);if(-1===i){var n=ve(!0,t);angular.forEach(n,function(e){w.selectedMonitor.playlistFlags[e.file]=!0,w.selectedMonitor.playlist.items.splice(a,0,{wallpaper:e})})}else a!==i&&(a<i?(w.selectedMonitor.playlist.items.splice(i,1),w.selectedMonitor.playlist.items.splice(a,0,t)):(w.selectedMonitor.playlist.items.splice(a,0,t),w.selectedMonitor.playlist.items.splice(i,1)));w.$apply(),ce()}}),l.registerContainer(v,{onMouseEnter:function(){},onMouseLeave:function(){},onMouseMove:function(){},onElementDropped:function(e,t){var a=angular.element(e.target).closest(".browseWallpaperImage")[0];a=a&&a.ctx&&a.ctx.wallpaper,angular.isObject(a)&&"folder"===a.type&&Oe(t,a)}})}]).filter("orderObjectBy",function(){return function(e,a,t){var i=[];return angular.forEach(e,function(e,t){e.key=t,i.push(e)}),i.sort(function(e,t){return(e[a]||0)>(t[a]||0)?1:-1}),t&&i.reverse(),i}}).directive("validationRemoveQuotes",function(){return{require:"ngModel",link:function(e,t,a,i){i.$parsers.push(function(e){var t=e.replace(/["]/g,"'");return t!==e&&(i.$setViewValue(t),i.$render()),t})}}}),window.youtubeLoaded=function(e){if(e.contentDocument.getElementById("player")){var t=angular.element("<style>.html5-video-container {width: 100% !important;height: 100% !important; }video {width: 100% !important;height: 100% !important;top: 0px !important;left: 0px !important;object-fit: cover;} </style>");angular.element(e.contentDocument).find("html > head").append(t)}},angular.module("wallpaperbrowserApp").controller("SettingsCtrl",["$q","$timeout","$translate","$document","$scope","skin","modals","host","utils","toastr",function(t,n,e,o,r,a,i,l,s,c){var d,p=!1,u={38:"konamiUp",40:"konamiDown",37:"konamiLeft",39:"konamiRight",66:"konamiPunch",65:"konamiPunch",13:"konamiSpin"},g=[38,38,40,40,37,39,37,39,66,65,13],f=0;window.settingsCtrl=r;var m=s.getQualityPreset("low"),v=s.getQualityPreset("medium"),h=s.getQualityPreset("high");function b(e){p=e}function _(e){window.settingsObject.applyGeneral(angular.toJson(e))}function w(e,t,a){var i=[{label:"ui_settings_playback_keep_running",value:"run"}];return t&&i.push({label:"ui_settings_playback_mute",value:"mute"}),e?(i.push({label:"ui_settings_playback_pause_per_monitor",value:"pause"}),i.push({label:"ui_settings_playback_pause_all",value:"pauseall"})):i.push({label:"ui_settings_playback_pause",value:"pause"}),a&&i.push({label:"ui_settings_playback_stop",value:"stop"}),i}r.antiAliasingOptions=[{label:"ui_settings_antialiasing_none",value:"none"},{label:"MSAA x2",value:"x2"},{label:"MSAA x4",value:"x4"},{label:"MSAA x8",value:"x8"}],r.resolutionOptions=[{label:"ui_settings_resolution_half",value:"half"},{label:"ui_settings_resolution_full",value:"full"}],r.monitorDetectionOptions=[{label:"GDI",value:"gdi"},{label:"GDI All",value:"gdiall"},{label:"Device Path",value:"devicepath"},{label:"Device Path All",value:"devicepathall"},{label:"Deprecated",value:"deprecated"}],r.graphicsApiOptions=[{label:"DirectX 11",value:"dxgi"},{label:"DirectX 9",value:"directx"},{label:"OpenGL",value:"opengl"}],r.videoFrameworkOptions=[{label:"ui_settings_video_framework_prefer_media_foundation",value:"mf"},{label:"ui_settings_video_framework_prefer_directshow_lav",value:"dshow.lav.vmr9"}],r.videoReadOptions=[{label:"ui_settings_read_from_disk",value:"fromdisk"},{label:"ui_settings_read_from_memory",value:"frommemory"}],r.videoLoopOptions=[{label:"ui_settings_loop_default",value:"default"},{label:"ui_settings_loop_sync_clock",value:"syncclock"},{label:"ui_settings_loop_sync_topo",value:"synctopo"}],r.logLevelOptions=[{label:"ui_settings_log_none",value:"none"},{label:"ui_settings_log_errors",value:"error"},{label:"ui_settings_log_verbose",value:"verbose"}],r.uiSkins=[{label:"ui_settings_skin_white",value:"white"},{label:"ui_settings_skin_dark",value:"dark"}],r.adjustDWMColorModes=[{label:"ui_settings_adjust_windows_color_disabled",value:"disabled"},{label:"ui_settings_adjust_windows_color_accent",value:"accent"},{label:"ui_settings_adjust_windows_color_everything",value:"everything"}],r.priorityOptions=[{label:"ui_settings_process_priority_normal",value:"normal"},{label:"ui_settings_process_priority_below_normal",value:"belownormal"}],r.windows7WallpaperModeOptions=[{label:"ui_settings_windows_7_wallpaper_mode_compatibility",value:"compatibility"},{label:"ui_settings_windows_7_wallpaper_mode_block_background",value:"blockbackground"}],r.tabInfo={activeIndex:0},r.fpsSlider={hideLimitLabels:!0,floor:10,ceil:50,onStart:function(){b(!1)},onEnd:function(){b(!0),_(r.generalSettings)}},r.iconOpacitySlider={hideLimitLabels:!0,floor:0,ceil:100},r.audioSlider={hideLimitLabels:!0,floor:0,ceil:200,onStart:function(){b(!1)},onEnd:function(){b(!0),_(r.generalSettings)}},r.colorPickerOptions=s.getColorPickerDefaults(),r.refreshSlider=function(){n(function(){r.$broadcast("rzSliderForceRender")},50)},r.applyPreset=function(e){switch(e){case 0:angular.merge(r.generalSettings,m);break;case 1:angular.merge(r.generalSettings,v);break;case 2:angular.merge(r.generalSettings,h)}},r.callbackOk=function(){var e;(e=t.defer(),r.generalState.isRestartRequired?i.open("genericConfirm",{data:{title:"ui_settings_advanced_restart_setting_modal_header",message:"ui_settings_advanced_restart_setting_modal_body",cancelVisible:!0,okVisible:!0}}).then(function(){l.callDeferred("settingsObject","restartApp")}):e.resolve(),e.promise).then(function(){window.settingsObject.close(!0)})},r.callbackCancel=function(){window.settingsObject.close(!1)},r.applySettings=function(e){var t=e.runtime.multimonitor;r.playbackOptionsFocus=w(t,!0,!1),r.playbackOptionsMaximized=w(t,!0,!0),r.playbackOptionsFullscreen=w(t,!0,!0),r.playbackOptionsSleep=w(!1,!1,!0),r.playbackOptionsBattery=w(!1,!1,!0),r.playbackOptionsAudio=w(!1,!0,!1),r.generalSettings=e.user||{},a.setAvailableSkins(e.runtime.skins),r.uiSkinsFull=[],angular.forEach(e.runtime.skins,function(e){r.uiSkinsFull.push({label:e.label,value:e.key})}),0===r.uiSkinsFull.length&&(r.uiSkinsFull=r.uiSkins.slice()),r.runtime=e.runtime,r.sharedSettings=e.shared,r.fpsSlider.ceil=e.runtime.frequencymax,r.plugins=[],angular.isObject(r.generalSettings.plugins)||(r.generalSettings.plugins={}),r.pluginsInitialState={},angular.forEach(e.discoveredplugins,function(e){var t=e.key;"cueextensions"===t&&(t="iCUE (Corsair Utility Engine)");var a=r.generalSettings.plugins[e.key]||{};r.generalSettings.plugins[e.key]=a,angular.isUndefined(a.enabled)&&(a.enabled=!0);var i=angular.copy(e);i.state=a,i.name=t,r.plugins.push(i),r.pluginsInitialState[t]=a.enabled}),n(function(){p=!0,r.refreshSlider()})},r.setBuildVersion=function(e){r.buildVersion=e},r.toggleAutoStartRegistry=function(t){l.callDeferred("settingsObject","toggleAutoStartRegistry",!1,t).then(function(e){e&&(r.generalSettings.autostart=t)})},r.toggleAutoStartScheduler=function(t){i.showHighPriorityWarning(t,r.generalSettings).then(function(){l.callDeferred("settingsObject","toggleAutoStartHighPriority",t,!t).then(function(e){e&&(r.generalSettings.autostartscheduler=t)})})},r.showChangelog=function(){i.open("changelog")},r.resetConfig=function(){i.open("genericConfirm",{data:{title:"ui_settings_advanced_reset_config_modal_header",message:"ui_settings_advanced_reset_config_modal_body",cancelVisible:!0,okVisible:!0}},{backdropClass:"modal-backdrop-danger"}).then(function(){l.callDeferred("settingsObject","resetConfig")})},r.editPerApplicationSettings=function(){r.generalSettings.apprules=r.generalSettings.apprules||[],i.open("settingsPerApplication",{data:{rules:r.generalSettings.apprules,runtime:r.runtime}})},r.editHotkeys=function(){s.validateSharedSettings(r.sharedSettings),i.open("settingsHotkeys",{data:{hotkeys:r.sharedSettings.hotkeys,runtime:r.runtime}})},r.editPluginSettings=function(t){r.generalSettings.plugins=r.generalSettings.plugins||{},angular.isObject(r.generalSettings.plugins[t.key])||(r.generalSettings.plugins[t.key]={}),angular.forEach(t.options,function(e){angular.isDefined(r.generalSettings.plugins[t.key][e.name])||(r.generalSettings.plugins[t.key][e.name]=e.default)}),i.open("settingsPlugin",{data:{plugin:t,pluginSettings:r.generalSettings.plugins}})},r.$watch("generalSettings",function(e){p&&_(e)},!0),r.generalSettings=angular.copy(m),r.generalState={isRestartRequired:!1},angular.merge(r.generalSettings,{graphicsapi:"dxgi",playbackfocus:"run",playbackmaximized:"pause",playbackfullscreen:"pause",language:"en-us"}),r.$watch("generalSettings.uiskin",function(e){angular.isString(e)&&a.applySkin(e)}),r.$watch("generalSettings.language",function(e,t){angular.isString(e)&&angular.isString(t)&&e!==t&&(s.setLanguage(e),l.callDeferred("settingsObject","languageChanged",e))}),r.$watchGroup(["generalSettings.monitordetection","generalSettings.windows7mode","generalSettings.trayicon"],function(){p&&(r.generalState.isRestartRequired=!0)}),r.$watch("plugins",function(e){p&&angular.forEach(e,function(e){e.state.enabled!==r.pluginsInitialState[e.name]&&(r.generalState.isRestartRequired=!0)})},!0),r.$watch("sharedSettings",function(e){angular.isObject(e)&&p&&l.callDeferred("settingsObject","persistSharedSettings",angular.toJson(e))},!0),o.on("keydown.wpe.konami",function(e){var t=e.keyCode;if(g[f]===t&&2===r.tabInfo.activeIndex){var a=angular.element(o[0].body),i=u[t];a.css({animation:""}),n(function(){var e="konamiSpin"===i?" 200ms":" 100ms";a.css({animation:i+e})}),++f===g.length&&(c.success("Skins unlocked",""),f=0,window.settingsObject.konamiUnlock(),r.generalSettings.konami=!0,r.generalSettings.uiskin="dark")}else f=0;angular.isDefined(d)&&(n.cancel(d),d=void 0),d=n(function(){f=0},1e3)}),r.$on("$destroy",function(){o.off("keydown.wpe.konami")}),r.$on("onCppInit",function(){r.isWindows10OrGreater=10<=a.getWindowsVersion(),r.isWindows8OrGreater=8<=a.getWindowsVersion(),r.availableLanguages=s.getAvailableLanguages()})}]),angular.module("wallpaperbrowserApp").directive("droplist",["$timeout",function(a){return{templateUrl:"views/templates/droplist.html",restrict:"E",scope:{dpOptions:"=",dpSelected:"=",dpDisabled:"=",dpChange:"&",dpEmptyText:"@"},link:function(i,t){var n;t=angular.element(t),i.selectItem=function(e){i.dpSelected=e.value,i.selected=e,angular.isFunction(i.dpChange)&&a(function(){i.$eval(i.dpChange)}),angular.element(t.find(".dropdown-toggle")[0]).focus()},angular.isUndefined(i.dpSelected)&&angular.isArray(i.dpOptions)&&i.selectItem(i.dpOptions[0]),i.$watch("dpSelected",function(t){if(angular.isDefined(t)){var a=!1;angular.forEach(i.dpOptions,function(e){e.value===t&&(i.selected=e,a=!0)}),a||(n=t)}}),i.$watch("dpOptions",function(e,t){if(angular.isArray(e)&&angular.isArray(t)&&e!==t){var a=!1;angular.forEach(e,function(e){angular.equals(e,i.selected)&&(a=!0)}),a||(i.selected=e[0],i.dpSelected=i.selected&&i.selected.value)}angular.isDefined(n)&&angular.isDefined(e)&&angular.isUndefined(i.selected)&&(angular.forEach(e,function(e){e.value===n&&(i.selected=e)}),n=void 0)}),i.keyDown=function(e){if(38===e.keyCode||40===e.keyCode){var t=38===e.keyCode?-1:1,a=i.dpOptions.map(function(e){return e.value}).indexOf(i.dpSelected);a<0||(a=Math.max(0,Math.min(i.dpOptions.length-1,a+t)),i.selectItem(i.dpOptions[a]),e.stopPropagation(),e.preventDefault())}}}}}]),angular.module("wallpaperbrowserApp").directive("checkbox",["$timeout",function(a){return{templateUrl:"views/templates/checkbox.html",restrict:"E",scope:{cbChecked:"=",cbDisabled:"=",cbTitle:"=",cbBit:"=",cbRecalculateBits:"&",cbChanged:"&",cbType:"@"},link:function(e){var t="normal";angular.isDefined(e.cbType)&&(t=e.cbType),e.toggle=function(){if(!e.cbDisabled){switch(t){case"tag":angular.isNumber(e.cbChecked)||(e.cbChecked=0),e.cbChecked+=1,2<e.cbChecked&&(e.cbChecked=0);break;case"bit":e.cbChecked=e.cbRecalculateBits(),e.cbChecked^=e.cbBit;break;default:e.cbChecked=!e.cbChecked}angular.isFunction(e.cbChanged)&&a(e.cbChanged)}},e.bitChecked=function(){return e.cbChecked&e.cbBit}}}}]),angular.module("wallpaperbrowserApp").controller("EditorCtrl",["$document","$q","$rootScope","$scope","$translate","$timeout","modals","host","help","utils","contextMenu",function(e,l,t,s,a,i,c,d,n,p,u){var g,o=!0,f=0,r=!1;function m(){var t;if(t=s.project,angular.forEach(s.filemenu,function(e){!function t(a,e){angular.forEach(e,function(e){angular.isFunction(e.shouldHide)&&angular.isObject(a)&&(e.hidden=e.shouldHide(a)),angular.isFunction(e.shouldDisable)&&(e.disabled=e.shouldDisable(a)),angular.isArray(e.children)&&t(a,e.children)})}(t,e.children)}),s.filemenu=angular.copy(s.filemenu),angular.forEach(s.filemenu,function(e){e.disabled=!1}),angular.isUndefined(s.project))for(var e=1;e<s.filemenu.length;++e)s.filemenu[e].disabled=!0}function v(e){angular.isUndefined(e)&&(e=!1),d.callEditor("setGridVisible",e)}function h(e){angular.isUndefined(e)&&(e=!1),d.callEditor("setSelectionBoxVisible",e)}function b(t,a){return R(),d.callEditor("openProject",t).then(function(e){angular.isObject(e.data.general)||(e.data.general={}),angular.isObject(e.data.general.properties)||(e.data.general.properties={}),angular.isObject(e.data.general.properties.schemecolor)||(e.data.general.properties.schemecolor={value:"0 0 0"}),angular.isObject(e.objectproperties)||(e.objectproperties={}),e.data.type=e.data.type.toLowerCase(),s.editorLayoutClass="scene"===e.data.type?"editorLayoutScene":"editorLayoutSimple",i(function(){window.dispatchEvent(new Event("resize"))},500),"scene"===e.data.type?(v(s.editorSettings.showgrid),h(s.editorSettings.showselectionbox),s.assetTreeViewMode="scene"):s.assetTreeViewMode=void 0,o=!1,_(t),w(e.data.workshopid),s.project=e,m(),s.showTreeView(),s.cameraMode="fly",s.gizmoMode="none",s.selectedResource.item=null,s.nativeDropOptions.previewExtension=angular.isObject(e.scene)?e.scene.is2d?["texture","sound"]:["model","sound"]:"",p.onProjectNameChanged(e.data.title),i(function(){o=!0,s.selectedResource.item=s.project.tree&&s.project.tree[0],s.setGizmoMode(e.scene.is2d?"multi":"translate"),angular.isArray(e.data.templateoptions)&&!e.data.templatewizardshownonce?(e.data.templatewizardshownonce=!0,O()):a&&a.backgroundfile&&(p.isExtension(a.backgroundfile,"texture")?P(a.backgroundfile,{instantImport:!0,lock:!0}):p.isExtension(a.backgroundfile,"model")&&A(a.backgroundfile))})})}function _(e){if(angular.isObject(s.editorSettings)){if(angular.isArray(s.editorSettings.recentfiles)||(s.editorSettings.recentfiles=[]),angular.isString(e)){for(var t=0;t<s.editorSettings.recentfiles.length;++t)if(s.editorSettings.recentfiles[t]===e){s.editorSettings.recentfiles.splice(t,1);break}4<s.editorSettings.recentfiles.length&&(s.editorSettings.recentfiles.length=4),s.editorSettings.recentfiles.unshift(e)}var a=[];angular.forEach(s.editorSettings.recentfiles,function(e){a.push({label:e,fn:function(){b(e)}})});var i=s.filemenu[0].children[2];i.children=a,i.disabled=0===a.length}}function w(e){var t=s.filemenu[3].children[0];t.id!==e&&(t.id=e,t.disabled=!angular.isDefined(e),t.fn=t.disabled?void 0:function(){window.ui.shellexecute("steam://url/CommunityFilePage/"+e)},m())}function y(e,t){angular.isNumber(t)||(t=angular.isNumber(e.index)?e.index:s.project.tree.length);var a=angular.copy(s.project.tree),i=[t,0].concat(e.items);return Array.prototype.splice.apply(a,i),s.project.tree=a,angular.isObject(e.objectproperties)&&angular.merge(s.project.objectproperties,e.objectproperties),s.selectedResource.item=e.items[0],s.selectedResource.item}function k(e){c.open("editorWelcome",{editorScope:s,options:{smallDialog:e}}).then(function(e){angular.isString(e.file)&&b(e.file,e)})}function S(e){s.editorSettings.previewratio=e.value}function x(t){if(angular.isString(t.project))return a("ui_editor_delete_project_modal_body",{title:t.title}).then(function(e){return c.open("genericConfirm",{data:{title:"ui_editor_delete_project_modal_header",message:e,leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}},{backdropClass:"modal-backdrop-danger"}).then(function(){return s.currentSelection=void 0,d.callEditor("deleteProject",t.project)})})}function E(){d.callEditor("resetView")}function C(){s.editorSettings.showgrid&&!0===s.editorSettings.showgrid||(s.editorSettings.showgrid=!1),s.editorSettings.showgrid=!s.editorSettings.showgrid,v(s.editorSettings.showgrid)}function T(){s.editorSettings.showselectionbox&&!0===s.editorSettings.showselectionbox||(s.editorSettings.showselectionbox=!1),s.editorSettings.showselectionbox=!s.editorSettings.showselectionbox,h(s.editorSettings.showselectionbox)}function I(){s.editorSettings.showstats&&!0===s.editorSettings.showstats||(s.editorSettings.showstats=!1),s.editorSettings.showstats=!s.editorSettings.showstats}function A(e){d.callEditor("importModel",e).then(function(e){return c.open("editorImportModel",{objInfo:e})}).then(y)}function O(){c.open("editorTemplateWizard",{projectData:s.project.data})}function P(e,t){var a={status:!1};d.callEditor("importImage",e).then(function(e){return e.renderableCount=s.project.tree&&s.project.tree.length,e.instantImport=t&&t.instantImport,e.jsonConfig=t&&{locktransforms:t.lock},c.open("editorImportModel",{objInfo:e})}).then(function(e){if(angular.isObject(e)){var t=angular.isArray(e.items)&&0<e.items.length&&e.items[0];return e.shouldAdjustProjection&&e.resolution&&t&&(s.project.scenegeneraldata.orthogonalprojection.width=e.resolution.width,s.project.scenegeneraldata.orthogonalprojection.height=e.resolution.height,d.callEditor("moveRenderable",e.items[0].id,.5*e.resolution.width,.5*e.resolution.height,0),a.status=!0),e}}).then(y).then(function(){a.status&&E()})}function M(e){d.callEditor("importSound",e).then(function(e){return d.callEditor("addSound",e.file)}).then(y)}function R(){angular.isFunction(s.endModalAction)&&(s.endModalAction(),s.endModalAction=void 0)}function D(e){s.selectedResource.stack.push(e);var t=s.selectedResource.stack.indexOf(e),a="renderable"!==e.key&&"camerapath"!==e.key;s.selectedResource.stack=t<0||!a?[e]:s.selectedResource.stack.slice(0,t+1)}function W(e,t){var a;return"renderable"===e?angular.forEach(s.project.tree,function(e){e.id===t&&(a=e)}):a=s.project.objectproperties[e][t],a}(window.editorCtrl=s).filemenu=[{label:"ui_editor_filemenu_file",children:[{label:"ui_editor_filemenu_new",icon:"glyphicon glyphicon-file",fn:function(){k(!0)}},{label:"ui_editor_filemenu_open",icon:"glyphicon glyphicon-folder-open",fn:function(){c.open("editorOpenWallpaper",{data:{deleteProject:x}}).then(function(e){angular.isString(e)&&b(e)})}},{label:"ui_editor_filemenu_open_recent",children:[]},{},{label:"ui_editor_filemenu_save",icon:"fas fa-save faMenuIcon",fn:function(){R();var e=l.when();angular.isObject(s.project.data)&&(e=e.then(function(){return d.callEditor("saveProjectData",angular.toJson(s.project.data))})),angular.isObject(s.project.scenegeneraldata)&&(e=e.then(function(){return d.callEditor("saveSceneGeneralData",angular.toJson(s.project.scenegeneraldata))})),e.then(function(){return d.callEditor("forceSave")})}},{label:"ui_editor_open_modal_delete",icon:"fas fa-trash faMenuIcon",fn:function(){x(s.project.data)}},{label:"ui_editor_filemenu_apply_wallpaper",icon:"fas fa-image faMenuIcon",fn:function(){d.callEditor("applyWallpaper")}},{},{label:"ui_editor_filemenu_quit",icon:"fas fa-power-off faMenuIcon",fn:function(){window.ui.close()}}]},{label:"ui_editor_filemenu_edit",children:[{label:"ui_editor_filemenu_undo",icon:"fas fa-undo faMenuIcon",fn:function(){d.callEditor("performUndoRedo",!1)},shouldHide:function(e){return"scene"!==e.data.type},shouldDisable:function(){return!(s.undoState&&s.undoState.canundo)}},{label:"ui_editor_filemenu_redo",icon:"fas fa-redo faMenuIcon",fn:function(){d.callEditor("performUndoRedo",!0)},shouldHide:function(e){return"scene"!==e.data.type},shouldDisable:function(){return!(s.undoState&&s.undoState.canredo)}},{shouldHide:function(e){return"scene"!==e.data.type}},{label:"ui_editor_filemenu_change_video_file",icon:"glyphicon glyphicon-film",fn:function(){s.replaceFile(s.project.tree[0])},shouldHide:function(e){return"video"!==e.data.type}},{label:"ui_editor_filemenu_import_model",icon:"fas fa-cube faMenuIcon",fn:A,shouldHide:function(e){return"scene"!==e.data.type||e.scene.is2d}},{label:"ui_editor_filemenu_add_light",icon:"far fa-lightbulb faMenuIcon",fn:function(){d.callEditor("addLight").then(y)},shouldHide:function(e){return"scene"!==e.data.type||e.scene.is2d}},{label:"ui_editor_filemenu_import_image",icon:"far fa-image faMenuIcon",fn:P,shouldHide:function(e){return"scene"!==e.data.type||!e.scene.is2d}},{label:"ui_editor_filemenu_import_sound",icon:"fas fa-volume-up faMenuIcon",fn:M,shouldHide:function(e){return"scene"!==e.data.type||!e.scene.is2d}},{label:"ui_editor_filemenu_change_project_settings",icon:"fas fa-cog faMenuIcon faMenuIcon",fn:function(){c.open("editorProjectSettings",{project:s.project})}},{label:"ui_editor_filemenu_open_in_explorer",icon:"fas fa-folder-open faMenuIcon",fn:function(){d.callEditor("openInExplorer")}},{shouldHide:function(e){return!angular.isArray(e.data.templateoptions)}},{label:"ui_editor_filemenu_template_wizard",icon:"fas fa-magic faMenuIcon",fn:O,shouldHide:function(e){return!angular.isArray(e.data.templateoptions)}}]},{label:"ui_editor_filemenu_view",children:[{label:"ui_editor_filemenu_restart_preview",icon:"fas fa-sync-alt faMenuIcon",fn:function(){d.callEditor("restartPreview")},shouldHide:function(e){return"scene"===e.data.type}},{label:"ui_editor_filemenu_preview_aspect_ratio",children:[{label:"ui_editor_filemenu_aspect_ratio_free",value:"free",binding:"previewratio",fn:S},{label:"4 : 3",value:"4x3",binding:"previewratio",fn:S},{label:"16 : 10",value:"16x10",binding:"previewratio",fn:S},{label:"16 : 9",value:"16x9",binding:"previewratio",fn:S},{label:"21 : 9",value:"21x9",binding:"previewratio",fn:S}]},{label:"ui_editor_filemenu_reset_camera",icon:"fas fa-undo faMenuIcon",fn:E,shouldHide:function(e){return"scene"!==e.data.type}},{label:"ui_editor_filemenu_show_grid",icon:"",value:!0,binding:"showgrid",fn:C,shouldHide:function(e){return"scene"!==e.data.type}},{label:"ui_editor_filemenu_show_selection_box",icon:"",value:!0,binding:"showselectionbox",fn:T,shouldHide:function(e){return"scene"!==e.data.type}},{label:"ui_editor_filemenu_show_stats",icon:"",value:!0,binding:"showstats",fn:I,shouldHide:function(e){return"scene"!==e.data.type}}]},{label:"Steam",children:[{label:"ui_editor_filemenu_show_in_workshop",icon:"fab fa-steam faMenuIcon",disabled:!0},{label:"ui_editor_workshop_rules_modal_title",icon:"fas fa-book faMenuIcon",fn:function(){c.open("editorWorkshopRules")}},{label:"ui_editor_filemenu_prepare_for_publishing",icon:"glyphicon glyphicon-share-alt",fn:function(){R(),c.open("editorSteamPublish",{projectData:s.project.data,editorSettings:{isMonetizationEnabled:r,category:"wallpaper"}})}}]}],s.setEditorSettings=function(e){s.editorSettings=e,s.$watch("editorSettings",function(e,t){e!==t&&d.callEditor("saveEditorSettings",angular.toJson(e))},!0),_(),m(),e.hasshownworkshoprules?k():c.open("editorWorkshopRules").then(function(){e.hasshownworkshoprules=!0,k()})},s.updateSteamProperties=function(e){angular.isObject(s.project&&s.project.data)&&angular.isObject(e)&&angular.extend(s.project.data,e)},s.updateGeneralSettings=function(e){angular.merge(s.project.data.general,e)},s.updateAssetProperties=function(o){angular.forEach(s.project.tree,function(e){if(e.id===o.id)for(var t=0;t<e.properties.length;++t)for(var a=e.properties[t],i=0;i<o.properties.length;++i){var n=o.properties[i];a.key===n.key&&(a.value=n.value,a.lastValue=a.value)}}),f+=1,i(function(){f-=1})},s.replaceAssets=function(e,t){if(s.project.tree=e,angular.forEach(t,function(e,a){s.project.objectproperties[a]=s.project.objectproperties[a]||{},angular.forEach(e,function(e,t){angular.isObject(s.project.objectproperties[a][t])||(s.project.objectproperties[a][t]={}),angular.extend(s.project.objectproperties[a][t],e)})}),angular.isObject(s.selectedResource.item)&&"renderable"===s.selectedResource.item.key){var a=s.selectedResource.item?s.selectedResource.item.id:-1;s.selectedResource.item=null,angular.forEach(s.project.tree,function(e){e.id===a&&(s.selectedResource.item=e)})}},s.updateAvailableAssets=function(e){s.project.availableassets=e},s.resetProject=function(){o=!1,s.project=void 0,s.assetTreeViewMode=void 0,s.editorLayoutClass="editorLayoutSimple",m(),s.showTreeView(),s.cameraMode="fly",s.gizmoMode="none",s.selectedResource.item=null,p.onProjectNameChanged()},s.replaceFile=function(t,e){d.callEditor("replaceFile",t.name,e).then(function(e){t.name=e,s.project.tree=angular.copy(s.project.tree)})},s.setGizmoMode=function(e){s.gizmoMode===e&&(e="none"),d.callEditor("setGizmoMode",e).then(function(){s.gizmoMode=e})},s.setCameraMode=function(e){d.callEditor("setCameraMode",e).then(function(){s.cameraMode=e})},s.onResourceRemove=function(e){var t=s.project.tree.indexOf(e);if(!(t<0)){s.project.tree.splice(t,1);var a=l.defer();return d.callEditor("removeFromScene",e.id).then(function(){s.selectedResource.item===e&&(s.selectedResource.item=null),a.resolve()}),a.promise}},s.onResourceDragged=function(e,t){d.callEditor("sendSceneOrderChange",e,t)},s.onResourceAddedToScene=function(e,t){return d.callEditor("addAssetToScene",angular.toJson(e),t).then(function(e){y(e,t)}),!0},s.sendAssetPropertyChange=function(t,e,a,i){if(!(0<f)){var n=angular.isArray(e)?e:[e],o=0,r={},l={properties:r,tag:i||"main"};angular.forEach(n,function(e){e.lastValue!==e.value&&(e.lastValue=e.value,l.id=l.id||e.owner||t.id,l.key=l.key||e.overrideresourcekey||t.key,r[e.key]=e.value,++o)}),0!==o&&(angular.isObject(a)&&(l.options=a),d.callEditor("sendAssetPropertyChange",l))}},s.showTreeView=function(){s.leftPane="treeView"},s.showCameraPaths=function(){R(),s.leftPane="cameraPaths"},s.showSceneOptions=function(){s.leftPane="sceneOptions"},s.addCameraPath=function(){d.callEditor("addCameraPath").then(function(e){var t=angular.copy(s.project.camerapaths);t.push(e),s.project.camerapaths=t})},s.onCameraPathRemove=function(e){var t=s.project.camerapaths.indexOf(e);if(!(t<0)){s.project.camerapaths.splice(t,1);var a=l.defer();return d.callEditor("removeCameraPath",e.id).then(function(){s.selectedResource.item===e&&(s.selectedResource.item=null),a.resolve()}),a.promise}},s.navigateProperty=function(e,t){var a=W(e,t);angular.isObject(a)&&(D(a),s.selectedResource.item=a)},s.addPropertyEffect=function(t,a){d.callEditor("listAvailableEffects").then(function(e){return c.open("editorEffectList",{data:{groupList:e}})}).then(function(e){return d.callEditor("addEffect",t.id.toString(),angular.toJson(e))}).then(function(e){a.value=e.items,angular.merge(s.project.objectproperties,e.objectproperties),angular.isArray(a.value)&&0<a.value.length&&s.editPropertyEffect(a.value[a.value.length-1])})},s.editPropertyEffect=function(e){s.navigateProperty("material",e.material)},s.addPropertySound=function(e,t){d.callEditor("importSound").then(function(e){s.onPropertySoundAssetDropped(t,e,t.value.length||0)})},s.onPropertySoundAssetDropped=function(e,t,a){return d.callEditor("addSound",t.file,s.selectedResource.item.id,a).then(function(){e.value=angular.copy(e.value),e.value.splice(a,0,{name:t.file})}),!0},s.onPropertyItemRemoved=function(e,t){var a=t.id||""+e.value.indexOf(t);return d.callEditor("removeRenderableItem",s.selectedResource.item.id,a).then(function(){e.value.splice(e.value.indexOf(t),1)})},s.onPropertyItemDragged=function(e,t){return d.callEditor("dragRenderableItem",s.selectedResource.item.id,e,t)},s.beginPaint=function(e){R();var t=s.selectedResource.stack[0].id;if(s.leftPane="treeView",s.paintOptions.enabled=!0,s.paintOptions.mode=e.mode,s.paintOptions.brushtype="",s.paintOptions.lastMode!==e.mode)switch(s.paintOptions.lastMode=e.mode,e.mode){case"opacitymask":case"flowmask":s.paintOptions.value=255;break;case"rgbmask":s.paintOptions.color="1 1 1"}s.endModalAction=function(){s.endPaint(!0)},d.callEditor("beginPaint",t,e.material,e.textureindex,s.paintOptions)},s.endPaint=function(e){s.endModalAction=void 0,s.paintOptions.enabled=!1,d.callEditor("endPaint",e)},s.clearPaint=function(){d.callEditor("clearPaint")},s.applyPaintHistory=function(e){d.callEditor("applyPaintHistory",e)},s.updatePaintHistoryState=function(e){s.paintHistoryState=e},s.dropFile=function(e){"scene"===s.project.data.type?p.isExtension(e,"sound")?M(e):s.project.scene.is2d?P(e):A(e):"video"===s.project.data.type&&s.replaceFile(s.project.tree[0],e)},s.importTextureFile=function(t,a,i,e,n,o){var r=l.when(e);angular.isString(e)||(r=r.then(function(){return d.callEditor("importImage").then(function(e){return e.file})})),r.then(function(e){return d.callEditor("importImage",e).then(function(e){return delete e.config.addcommand,"normalmap"===i&&(e.config.shaderpresetkey+="n"),e.config.textureonly=!0,e.config.subdirectory=o||"",c.open("editorImportModel",{objInfo:e})})}).then(function(e){d.callEditor("importTextureFile",{material:t,texture:a,texturepath:e,tag:n||"main"})})},s.exportTextureFile=function(e){d.callEditor("exportTextureFile",e)},s.openMaterialBrowser=function(t,a,e){return c.open("editorMaterials",{data:{currentPath:t.value,subDirectory:e}}).then(function(e){return d.callEditor("importTextureFile",{material:t.material,texture:t.textureindex,texturepath:e,tag:a||"main"})})},s.resetTextureFile=function(e,t,a){d.callEditor("importTextureFile",{material:e,texture:t,tag:a||"main"})},s.renderableDroppedOnTextureCondition=function(e){return(!angular.isObject(s.selectedResource.stack[0])||s.selectedResource.stack[0].id!==e.id)&&(angular.isNumber(e.type)&&3===e.type)},s.renderableDroppedOnTexture=function(e,t,a){d.callEditor("importTextureFile",{material:e,texture:t,texturepath:"_rt_imageLayerComposite_"+a.id+"_a",tag:"main"})},s.showAddRenderableModal=function(){d.callEditor("listAvailablePresets",s.project.scene.is2d?"scene2d":"scene3d").then(function(n){function e(e,t,a,i){n.push({name:e,description:a,type:t,group:"renderable",options:i})}return s.project.scene.is2d?(e("ui_editor_effects_modal_imagelayer_name","imagelayer","ui_editor_effects_modal_imagelayer_description"),e("ui_editor_effects_modal_fullscreenlayer_name","fullscreenlayer","ui_editor_effects_modal_fullscreenlayer_description"),e("ui_editor_effects_modal_composelayer_name","composelayer","ui_editor_effects_modal_composelayer_description",{resolution:{width:512,height:512}}),e("ui_editor_effects_modal_particle_system_name","particle","ui_editor_effects_modal_particle_system_description",{nameVisible:!0,name:"new particle system",droplistOptions:s.particleDefaultPresets,droplistSelected:s.particleDefaultPresets[0].value}),e("ui_editor_effects_modal_sound_name","sound","ui_editor_effects_modal_sound_description")):e("ui_editor_effects_modal_model_name","model","ui_editor_effects_modal_model_description"),c.open("editorEffectList",{data:{groupList:n}})}).then(function(e){switch(e.type){case"imagelayer":P();break;case"fullscreenlayer":d.callEditor("addCompositionLayer").then(y);break;case"composelayer":d.callEditor("addCompositionLayer",{width:e.options.resolution.width,height:e.options.resolution.height}).then(y);break;case"particle":d.callEditor("createParticle",{name:e.options.name,source:e.options.droplistSelected}).then(function(e){return d.callEditor("addParticle",e)}).then(function(e){var t=y(e);s.editParticle(t)});break;case"sound":d.callEditor("importSound").then(function(e){return d.callEditor("addSound",e.file)}).then(y);break;case"model":A();break;case"preset":d.callEditor("addPreset",angular.toJson(e)).then(y)}})},s.enableMonetization=function(){r=!0},s.updateRenderStats=function(e){s.renderStats=e},s.updateUndoState=function(e){s.undoState=e,m()},s.editParticle=function(t,a){angular.isUndefined(a)&&angular.forEach(t.properties,function(e){"particle"===e.type&&(a=e)});var i=[];angular.forEach(s.project.availableassets,function(e){"particle"===e.type&&i.push({label:e.name,value:e.file})}),c.open("editorParticleEditor",{data:{particle:a.value,existingParticles:i,editor:s}}).then(function(e){angular.isString(e)&&d.callEditor("applyParticle",t.id,e),d.callEditor("reloadParticles")})},s.callbackAssetContextMenu=function(e,i){var n=["origin","scale","angles"],o=function(t){var a;return angular.forEach(i.properties,function(e){e.key===t&&(a=e)}),a},t=u.builder();s.project.scene.is2d&&(t.button("ui_editor_context_menu_center","fas fa-fw fa-align-center",function(){d.callEditor("centerRenderable",i.id)}),t.button("ui_editor_context_menu_rotate_clockwise","fas fa-fw fa-redo",function(){d.callEditor("rotateRenderable",i.id,2,p.toRadians(-90))}),t.button("ui_editor_context_menu_rotate_counterclockwise","fas fa-fw fa-undo",function(){d.callEditor("rotateRenderable",i.id,2,p.toRadians(90))}),t.divider()),t.button("ui_editor_context_menu_copy_transforms","fas fa-fw fa-copy",function(){var t,a,e=(t=n,a=[],angular.forEach(i.properties,function(e){t.includes(e.key)&&a.push(e)}),a);g=angular.copy(e)}),t.button("ui_editor_context_menu_paste_transforms","fas fa-fw fa-paste",function(){var a=[];angular.forEach(g,function(e){var t=o(e.key);t&&(t.value=angular.copy(e.value),a.push(t))}),0<a.length&&s.sendAssetPropertyChange(i,a)},{},g?"":"fa-disabled");var a=o("locktransforms");if(a){var r=a.value;t.button(r?"ui_editor_context_menu_unlock":"ui_editor_context_menu_lock","fas fa-fw "+(r?"fa-lock-open":"fa-lock"),function(){a.value=!a.value,s.sendAssetPropertyChange(i,a)})}t.divider(),t.button("ui_editor_context_menu_duplicate","fas fa-fw fa-clone",function(){d.callEditor("duplicateRenderable",i.id).then(y)}),t.open(s,e)},e.on("keydown.editor.undo",function(e){!e.ctrlKey||"z"!==e.key&&"y"!==e.key||(e.preventDefault(),c.isAnyModalVisible()||(s.paintOptions.enabled?s.applyPaintHistory("z"===e.key):d.callEditor("performUndoRedo","y"===e.key)))}),s.propertyControl={navigateProperty:s.navigateProperty,sendAssetPropertyChange:s.sendAssetPropertyChange,textureDropCondition:s.renderableDroppedOnTextureCondition,textureDropped:s.renderableDroppedOnTexture,beginPaint:s.beginPaint,importTextureFile:s.importTextureFile,exportTextureFile:s.exportTextureFile,openMaterialBrowser:s.openMaterialBrowser,resetTextureFile:s.resetTextureFile,onPropertyEffectRemoved:s.onPropertyItemRemoved,onPropertyEffectDragged:s.onPropertyItemDragged,editPropertyEffect:s.editPropertyEffect,addPropertyEffect:s.addPropertyEffect,editParticle:s.editParticle,onPropertySoundRemoved:s.onPropertyItemRemoved,onPropertySoundDragged:s.onPropertyItemDragged,onPropertySoundAssetDropped:s.onPropertySoundAssetDropped,addPropertySound:s.addPropertySound},s.particleDefaultPresets=[{label:"ui_editor_particle_example_basic",value:"assets/particles/example.json"},{label:"ui_editor_particle_example_cursor_follow",value:"assets/particles/examplecursorfollow.json"},{label:"ui_editor_particle_example_cursor_avoid",value:"assets/particles/examplecursoravoid.json"},{label:"ui_editor_particle_example_turbulence",value:"assets/particles/exampleturbolence.json"}],s.$watch("project.data",function(e,t){o&&e!==t&&(d.callEditor("saveProjectData",angular.toJson(e)),w(e.workshopid))},!0),s.$watch("project.scenegeneraldata",function(e,t){o&&e!==t&&d.callEditor("saveSceneGeneralData",angular.toJson(e))},!0),s.$watch("selectedResource.item",function(e){angular.isObject(e)&&angular.isDefined(e.id)&&(d.callEditor("setSelectedRenderable",e.id,e.key),D(e),s.selectedResource.visible=[e],angular.isObject(e.next)&&s.selectedResource.visible.push(W(e.next.key,e.next.id)),angular.forEach(e.properties,function(e){"effects"===e.type&&angular.forEach(e.value,function(e){var t=W("material",e.material);e.properties=t&&t.properties})}),f+=1,i(function(){f-=1,s.$broadcast("rzSliderForceRender")}))}),s.$watch("paintOptions",function(e,t){angular.isObject(e)&&e!==t&&d.callEditor("updatePaintOptions",e)},!0),s.$on("$destroy",function(){e.off("keydown.editor.undo")}),s.colorPickerOptions=p.getColorPickerDefaults(),s.editorSettings={previewratio:"free"},s.editorLayoutClass="editorLayoutSimple",s.selectedResource={item:void 0,visible:[],stack:[]},s.colorPickerSettings=p.getColorPickerDefaults(),s.showTreeView(),s.paintOptions={enabled:!1,value:0,color:"1 1 1",size:40,opacity:100,hardness:50,mode:"opacitymask",showmask:!1,brushtype:""},s.paintOptionsSliderSize={ceil:1e3,floor:1,customValueToPosition:function(e,t,a){return((e=Math.log(e))-(t=Math.log(t)))/((a=Math.log(a))-t)},customPositionToValue:function(e,t,a){t=Math.log(t);var i=e*((a=Math.log(a))-t)+t;return Math.exp(i)}},s.nativeDropOptions={previewExtension:""},s.toggleShowGrid=C,s.toggleShowSelectionBox=T,s.toggleShowStats=I,n.registerMainContext(s),m()}]),angular.module("wallpaperbrowserApp").directive("filemenu",["$timeout","$translate",function(e,p){return{templateUrl:"views/templates/filemenu.html",restrict:"E",scope:{fmItems:"=",fmData:"=",fmDisabled:"="},link:function(n,t){var r,l=0;function o(e){var t=angular.element(document.createElement("span"));return t.addClass(e),t}function s(e,t){var a=angular.element(document.createElement("div")),i=function(e){a.text(e)};return p(e).then(i).catch(i),angular.isDefined(t)&&a.addClass(t),a}function c(t){var a=angular.element(document.createElement("button"));if(a.addClass("btn"),angular.isDefined(t.icon)&&a.append(o(t.icon+" pull-left itemIcon")),a.append(s(t.label,"item")),a.click(function(e){if(a.hasClass("disabled"))return e.stopPropagation(),void e.currentTarget.blur();angular.isFunction(t.fn)&&(t.fn(t),n.$apply())}),t.disabled&&a.addClass("disabled"),t.binding){var i=o("glyphicon glyphicon-ok pull-left");i.css({visibility:"visible","margin-right":10}),a.prepend(i),a.on("filemenu.resfresh",function(){var e=t.value===n.fmData[t.binding];i.css({visibility:e?"visible":"hidden"})})}return a}function d(e,t){var a,i,n=angular.element(document.createElement("div"));return n.addClass("btn filemenuNestedIndicatorElement"),n.append(s(t.label,"item")),n.append(o("glyphicon glyphicon-triangle-right")),n.click(function(e){e.stopPropagation()}),e.append(n),t.disabled?n.addClass("disabled"):(e.append((a=t.children,(i=angular.element(document.createElement("ul"))).addClass("dropdown-menu to-right nested"),angular.forEach(a,function(e){var t=angular.element(document.createElement("li")),a=c(e);t.append(a),i.append(t)}),i)),e.mouseover(function(){e.addClass("open")}),e.mouseout(function(){e.removeClass("open")})),n}n.onMouseOver=function(e){0<l&&r!==e.target&&(e=angular.element(e.target)).dropdown("toggle")},n.$watch("fmItems",function(o){r=void 0,e(function(){var e=t.find(".btn-group"),n=0;angular.forEach(e,function(e){(e=angular.element(e)).off("show.bs.dropdown"),e.off("hide.bs.dropdown"),e.on("show.bs.dropdown",function(){++l,r=e.children(".dropdown-toggle")[0],e.find("button").trigger("filemenu.resfresh")}),e.on("hide.bs.dropdown",function(){--l});var t,a,i=o[n++].children;e.children("ul").remove(),e.append((t=i,(a=angular.element(document.createElement("ul"))).addClass("dropdown-menu"),angular.forEach(t,function(e){if(!e.hidden){var t=angular.element(document.createElement("li"));angular.isString(e.label)?angular.isArray(e.children)?d(t,e):t.append(c(e)):t.addClass("separator"),a.append(t)}}),a))})})})}}}]);var _preventModalClose=!1;angular.element(document).on("keydown",function(e){if(27===e.which&&_preventModalClose&&(e.stopPropagation(),e.preventDefault()),13===e.which){if(document.activeElement&&["INPUT","TEXTAREA","BUTTON"].includes(document.activeElement.nodeName)&&!document.activeElement.classList.contains("ignoreModalFocus"))return;if(!_preventModalClose){e.stopPropagation(),e.preventDefault();var t=angular.element(".modal-footer")[0];(t=t&&angular.element(t).find(".btn-primary")[0])&&!t.disabled&&angular.element(t).click()}}}),angular.module("wallpaperbrowserApp").service("modals",["$q","$rootScope","$timeout","$uibModal","help",function(i,r,l,s,c){var d=0,n=this;this.open=function(e,t,a){var i={animation:!0,backdrop:"static",backdropClass:a&&a.backdropClass,resolve:t};switch(e){case"editorWelcome":i.templateUrl="views/modals/editorwelcomemodal.html",i.controller="EditorWelcomeModalCtrl";break;case"editorOpenWallpaper":i.templateUrl="views/modals/editoropenwallpapermodal.html",i.controller="EditorOpenWallpaperModalCtrl",i.windowClass="modal-dialog-full";break;case"editorSteamPublish":i.templateUrl="views/modals/editorsteampublishmodal.html",i.controller="EditorSteamPublishModalCtrl",i.size="lg";break;case"editorImportModel":i.templateUrl="views/modals/editorimportmodelmodal.html",i.controller="EditorImportModelModalCtrl",i.windowClass="modal-dialog-allow-overflow";break;case"editorProjectSettings":i.templateUrl="views/modals/editorprojectsettingsmodal.html",i.controller="EditorProjectSettingsModalCtrl";break;case"editorTemplateWizard":i.templateUrl="views/modals/editortemplatewizardmodal.html",i.controller="EditorTemplateWizardModalCtrl";break;case"editorWorkshopRules":i.resolve={data:{}},i.templateUrl="views/modals/editorworkshoprules.html",i.controller="GenericConfirmModalCtrl";break;case"editorEffectList":i.templateUrl="views/modals/editoreffectlistmodal.html",i.controller="EditorEffectListModalCtrl";break;case"editorParticleEditor":i.templateUrl="views/modals/editorparticleeditormodal.html",i.controller="EditorParticleEditorModalCtrl",i.size="xlg";break;case"editorMaterials":i.templateUrl="views/modals/editormaterialsmodal.html",i.controller="EditorMaterialsModalCtrl",i.size="xlg";break;case"editorRating":i.templateUrl="views/modals/editorratingmodal.html",i.controller="EditorRatingModalCtrl";break;case"openFromUrl":i.templateUrl="views/modals/openfromurlmodal.html",i.controller="OpenFromUrlModalCtrl";break;case"changelog":i.templateUrl="views/modals/settingschangelogmodal.html",i.controller="SettingsChangelogModalCtrl",i.size="lg";break;case"settingsPerApplication":i.templateUrl="views/modals/settingsperapplicationmodal.html",i.controller="SettingsPerApplicationModalCtrl";break;case"settingsHotkeys":i.templateUrl="views/modals/settingshotkeysmodal.html",i.controller="SettingsHotkeysModalCtrl";break;case"settingsPlugin":i.templateUrl="views/modals/settingspluginmodal.html",i.controller="SettingsPluginModalCtrl";break;case"browseCollections":i.templateUrl="views/modals/browsecollectionsmodal.html",i.controller="BrowseCollectionsModalCtrl";break;case"browsePlaylistSettings":i.templateUrl="views/modals/browseplaylistsettingsmodal.html",i.controller="BrowsePlaylistSettingsModalCtrl";break;case"browseSplitMonitor":i.templateUrl="views/modals/browsesplitmonitormodal.html",i.controller="BrowseSplitMonitorModalCtrl";break;case"browseWallpaperSharePreset":i.templateUrl="views/modals/browsewallpapersharepresetmodal.html",i.controller="BrowseWallpaperSharePresetModalCtrl";break;case"browseWallpaperWorkshopInfo":i.templateUrl="views/modals/browsewallpaperworkshopinfomodal.html",i.controller="BrowseWallpaperWorkshopInfoModalCtrl";break;case"browseReport":i.templateUrl="views/modals/browsereportmodal.html",i.controller="BrowseReportModalCtrl";break;case"browseExploreCreateQuery":i.templateUrl="views/modals/browseexplorecreatequerymodal.html",i.controller="BrowseExploreCreateQueryModalCtrl";break;case"browseAssignHotkey":i.templateUrl="views/modals/browseassignhotkey.html",i.controller="BrowseAssignHotkeyModalCtrl";break;case"genericConfirm":i.templateUrl="views/modals/genericconfirmmodal.html",i.controller="GenericConfirmModalCtrl";break;case"ageGate":i.templateUrl="views/modals/agegatemodal.html",i.controller="AgeGateModalCtrl"}function n(){_preventModalClose=!1,c.popModal(),l(function(){r.$broadcast("previewtoggle",-1)},350),r.$broadcast("modalVisible",--d)}var o=s.open(i);return c.pushModal(e),o.opened.then(function(){r.$broadcast("previewtoggle",1),r.$broadcast("modalVisible",++d)}),o.result.then(n).catch(n),o.result},this.setPreventModalClose=function(e){_preventModalClose=e},this.showHighPriorityWarning=function(e,t){var a=i.when();return e&&!t.hasshownhighprioritywarning&&(a=n.open("genericConfirm",{data:{title:"ui_settings_highpriority_warning_header",message:"ui_settings_highpriority_warning",okVisible:!0,cancelVisible:!0}}).then(function(){t.hasshownhighprioritywarning=!0})),a},this.isAnyModalVisible=function(){return 0<d}}]),angular.module("wallpaperbrowserApp").controller("EditorWelcomeModalCtrl",["$uibModalInstance","$rootScope","$scope","modals","host","utils","editorScope","help","options",function(t,e,n,a,o,r,i,l,s){function c(){var e;n.templates=[],o.callEditor("getTemplates",e).then(function(e){n.templates=e})}n.ok=function(){o.callEditor("createNewProject",angular.toJson(n.project)).then(function(e){t.close(e)})},n.cancel=function(){t.dismiss("cancel")},n.openPage=function(e){n.project={schemecolor:"0 0 0"};var t="glyphicon glyphicon-knight";switch(e){case"scene":n.newTitle="ui_editor_welcome_modal_new_scene_wallpaper";break;case"templates":n.newTitle="ui_editor_welcome_modal_new_template_wallpaper",n.project.resolution={width:1920,height:1080},c();break;case"video":n.newTitle="ui_editor_welcome_modal_new_video_wallpaper",t="fas fa-film";break;case"web":n.newTitle="ui_editor_welcome_modal_new_web_wallpaper",t="glyphicon glyphicon-globe";break;case"application":n.newTitle="ui_editor_welcome_modal_new_application_wallpaper",t="fas fa-gamepad"}n.project.type=e,n.page=e,n.pageIcon=t,n.project.template=""},n.importFile=function(){o.callEditor("importFile").then(function(e){n.fileDropped(e)})},n.openRecent=function(e){t.close(e)},n.showHelp=function(){e.$broadcast("onHelpToggled",{showonly:!0})},n.fileDropped=function(t){var e,a,i=r.getFilename(t,!0)||"New Wallpaper";r.isExtension(t,"texture")?(n.openPage("scene"),n.project.type="scene2d",n.project.file=t,n.project.title=i,e=t,a=n.project,o.callEditor("getDominantColorFromFile",e).then(function(e){a.schemecolor=e.schemecolor})):r.isExtension(t,"model")?(n.openPage("scene"),n.project.type="scene3d",n.project.file=t,n.project.title=i):r.isExtension(t,"video")?(n.openPage("video"),n.project.type="video",n.project.file=t,n.project.title=i):r.isExtension(t,"web")?o.callEditor("getImportFileList",t).then(function(e){n.openPage("web"),n.project.file=t,n.project.type="web",n.project.filelist=e,n.project.title=i}):r.isExtension(t,"application")&&o.callEditor("getImportFileList",t).then(function(e){n.openPage("application"),n.project.file=t,n.project.type="application",n.project.filelist=e,n.project.title=i})},n.$watch("project.template",function(t){n.currentPreview=void 0,angular.isString(t)&&angular.forEach(n.templates,function(e){e.value===t&&angular.isString(e.preview)&&(n.currentPreview="file://"+e.preview)})}),n.colorPickerOptions=r.getColorPickerDefaults(),n.project={},n.editorScope=i,n.smallDialog=0,n.title=s.smallDialog?"ui_editor_welcome_modal_title_new":"ui_editor_welcome_modal_title_welcome",n.recentFileDetails=[],angular.isArray(i.editorSettings.recentfiles)&&o.callEditor("getWallpaperDetails",i.editorSettings.recentfiles).then(function(e){n.recentFileDetails=e}),l.registerModalPageVar(n,"page")}]),angular.module("wallpaperbrowserApp").service("host",["$q","utils",function(s,c){var e,t=this;this.callDeferred=function(e,t){for(var a=s.defer(),i=[],n=2;n<arguments.length&&!angular.isUndefined(arguments[n]);++n)i.push(arguments[n]);var o=t+"Callback",r=t+"CallbackError",l=function(){window[o]=void 0,window[r]=void 0};return window[o]=function(){l(),a.resolve.apply(null,arguments)},window[r]=function(){l(),c.showError(arguments[0]),a.reject.apply(null,arguments)},window[e][t].apply(window[e],i),a.promise},this.callEditor=function(e){for(var t=["editorObject",e],a=1;a<arguments.length;++a)t.push(arguments[a]);return this.callDeferred.apply(null,t)},this.callUI=function(e){for(var t=["ui",e],a=1;a<arguments.length;++a)t.push(arguments[a]);return this.callDeferred.apply(null,t)},this.logError=function(e){window.ui&&window.ui.logError&&window.ui.logError(e)},this.getVirtualKeyNames=function(){return angular.isUndefined(e)&&(e=t.callDeferred("ui","getVirtualKeyNames")),e}}]),angular.module("wallpaperbrowserApp").directive("treeView",["$translate","dragdrop",function(P,M){return{restrict:"E",scope:{tvData:"=",tvMode:"=",tvSelectedItem:"=",tvDragDropEnabled:"=",tvDragDropTag:"@",tvRemoveClicked:"&",tvElementDragged:"&",tvElementDoubleClicked:"&",tvNewElementAdded:"&",tvSendAssetPropertyChange:"&",tvContextMenu:"&"},link:function(k,S,x){var E,a,s="treeViewDirectoryInvisible",C=[],e=S.parent(),T="directory"===k.tvMode;function I(){return"scene"===k.tvMode}function A(e){angular.isFunction(e.unregisterNameWatcher)&&e.unregisterNameWatcher(),angular.isFunction(e.unregisterVisibilityWatcher)&&e.unregisterVisibilityWatcher(),angular.isFunction(e.unregisterLockWatcher)&&e.unregisterLockWatcher()}function O(e,t){t?(angular.isDefined(E)&&E!==e&&O(E,!1),(E=e).addClass("active")):e.removeClass("active")}function i(t){angular.isDefined(E)&&O(E,!1),angular.forEach(C,function(e){e[0].item===t&&O(E=e,!0)})}function c(l,e){angular.forEach(e,function(e){var t,a,i,n,o;if(angular.isArray(e.children)){var r=angular.element(document.createElement("div"));a=" "+e.name,i=r,n=angular.element(document.createElement("a")),o=angular.element(document.createElement("span")),n.text(a),n.addClass("btn btn-default editorTreeViewSceneGraphBtn activeBackHighlight"),n.click(function(){i.toggleClass(s),o.toggleClass("glyphicon-folder-close"),o.toggleClass("glyphicon-folder-open")}),i.addClass("treeViewDirectory "+s),o.addClass("editorTreeViewItemIcon treeViewFolderIcon glyphicon glyphicon-folder-close "),n.prepend(o),t=n,l.append(t),l.append(r),c(r,e.children)}else t=function(a){var i=angular.element(document.createElement("a")),t=angular.element(document.createElement("span")),e=a.name;T||(e=" "+e),t.text(P.instant(e)),t.addClass("editorTreeViewItemLabel"),i.append(t),i.addClass("btn activeBackHighlight"),T&&i.addClass("treeViewDirectoryListingItem");var n=-1,o=-1,r=-1;if(angular.isArray(a.properties)&&0<a.properties.length){for(var l=0;l<a.properties.length;++l){var s=a.properties[l];"name"===s.key?n=l:"visible"===s.key?o=l:"locktransforms"===s.key&&(r=l)}if(0<=n){var c=k.$watch(function(){return a&&a.properties&&a.properties[n].value},function(e){angular.isString(e)&&0<e.trim().length?t.text(e):t.text(P.instant(a.name))});i.unregisterNameWatcher=c}}var d,p,u=angular.element(document.createElement("span"));if(u.addClass("editorTreeViewItemIcon"),d=angular.isString(a.icon)?a.icon:"glyphicon glyphicon-file",u.addClass(d),i.prepend(u),i.addClass("editorTreeViewSceneGraphBtn"),I()&&0<=r&&angular.isDefined(x.tvSendAssetPropertyChange)){u.on("mousedown",function(e){1===e.which&&(e.preventDefault(),e.stopPropagation(),k.$apply(function(){a.properties[r].value=!a.properties[r].value,k.tvSendAssetPropertyChange({resource:a,property:a.properties[r]})}))});var g=function(e){var t="fas fa-fw fa-lock warningText";e?(u.removeClass(d),u.addClass(t)):(u.removeClass(t),u.addClass(d))};g(a.properties[r].value);var f=k.$watch(function(){return a&&a.properties&&a.properties[r].value},g);i.unregisterLockWatcher=f}if(I()&&0<=o&&angular.isDefined(x.tvSendAssetPropertyChange)){var m=angular.element(document.createElement("a"));m.addClass("editorTreeViewVisibilityButton");var v=angular.element(document.createElement("span"));v.addClass("fas fa-fw fa-eye"),m.append(v),i.append(m),m.on("mousedown",function(e){1===e.which&&(e.preventDefault(),e.stopPropagation(),k.$apply(function(){a.properties[o].value=!a.properties[o].value,k.tvSendAssetPropertyChange({resource:a,property:a.properties[o]})}))});var h=k.$watch(function(){return a&&a.properties&&a.properties[o].value},function(e){v.removeClass("fa-eye fa-eye-slash"),v.addClass(e?"fa-eye":"fa-eye-slash"),m.removeClass("forceVisible"),!1===e&&m.addClass("forceVisible")});i.unregisterVisibilityWatcher=h}if(I()){var b=angular.element(document.createElement("a"));b.addClass("editorTreeViewRemoveButton");var _=angular.element(document.createElement("span"));_.addClass("glyphicon glyphicon-remove"),b.append(_),i.append(b),b.on("mousedown",function(e){e.stopPropagation(),k.$apply(function(){k.tvRemoveClicked({item:a}).then(function(){i.remove(),A(i)})})})}var w=!1;i[0].item=a,i.on("mousedown",function(e){1===e.which&&(p={x:e.offsetX,y:e.offsetY},w=!0)}),i.on("mouseup",function(){if(w&&(w=!1,I())){if(angular.isDefined(E)&&E.item===a)return;angular.isDefined(a)&&(O(i,!0),k.tvSelectedItem.item=a,k.$apply())}}),i.dblclick(function(){angular.isFunction(k.tvElementDoubleClicked)&&(k.tvElementDoubleClicked({item:a}),k.$apply())}),i.contextmenu(function(e){angular.isFunction(k.tvContextMenu)&&(k.tvContextMenu({item:a,$event:e}),k.$apply())});var y=function(){w=!1,M.finish();var e=i.css("opacity");i.css({opacity:.35}),S.addClass("treeViewInHover");var t={onCancelled:function(){i.css({opacity:e}),S.removeClass("treeViewInHover")},onDragged:function(){T?i.css({opacity:e}):i.remove(),S.removeClass("treeViewInHover")}};M.start(i,a,t,k.tvDragDropTag)};return i.on("mouseleave",function(){w&&k.tvDragDropEnabled&&y()}),i.on("mousemove",function(e){w&&k.tvDragDropEnabled&&5<Math.abs(e.offsetX-p.x)+Math.abs(e.offsetY-p.y)&&y()}),C.push(i),i}(e),l.append(t)})}function t(e){angular.forEach(C,function(e){A(e)}),C=[],S.empty(),E=void 0,c(S,e),k.tvSelectedItem&&k.tvSelectedItem.item&&i(k.tvSelectedItem.item)}function d(e,t){var a=S.children(),i=a.outerHeight(),n=e.pageY-S[0].getBoundingClientRect().top,o=Math.round(n/i);return o=Math.min(o,a.length),t&&(o*=i),o}k.$on("$destroy",function(){M.unregisterContainer(e)}),k.$on("renderableNameChanged",t),t(k.tvData),k.$watch("tvData",t,!1),k.$watch("tvSelectedItem.item",function(e,t){e!==t&&(angular.isDefined(E)&&E.item===e||i(e))}),M.registerContainer(e,{onMouseEnter:function(){k.tvDragDropEnabled&&!T&&((a=angular.element(document.createElement("div"))).addClass("treeViewHoverIndicator"),e.append(a))},onMouseLeave:function(){a&&(a.remove(),a=void 0)},onMouseMove:function(e){k.tvDragDropEnabled&&function(e){if(a){var t=d(e,!0);a.css({top:t})}}(e)},onElementDropped:function(e,t){if(!k.tvDragDropEnabled||T)return!1;var a=function(e){for(var t=0;t<k.tvData.length;++t)if(k.tvData[t]===e)return t;return-1}(t),i=d(e);if(0<=a){var n=S.children(),o=k.tvData[a];k.tvData.splice(a,1),a<i&&--i,k.tvData.splice(i,0,o);for(var r=k.tvData.length-1;0<=r;--r){for(var l,s=0;s<n.length;++s)n[s].item===k.tvData[r]&&(l=n[s]);l&&S.prepend(l)}return angular.isFunction(k.tvElementDragged)&&k.tvElementDragged({from:a,to:i}),!1}return!!angular.isFunction(k.tvNewElementAdded)&&k.tvNewElementAdded({item:t,index:i})}},k.tvDragDropTag)}}}]),angular.module("wallpaperbrowserApp").directive("preview",["$timeout","host",function(v,h){return{templateUrl:"views/templates/preview.html",restrict:"E",scope:{pOptions:"=",pAspectRatio:"="},link:function(s,e){var a=angular.element(e.find("#pluginCrossHairOverlay")[0]);s.pOptions=s.pOptions||{};var t,i="main"===s.pOptions.tag,n=s.pOptions.memory||"WallpaperEngineBackBufferMem",o=angular.element(e.children()[0]),r=angular.element(o.children()[0]),l=e.find("#previewPlugin")[0],c=0,d={};function p(){l&&l.postMessage&&(l.postMessage("setStreamName "+n),angular.isDefined(s.pOptions.defaultColor)&&l.postMessage("setDefaultColor "+s.pOptions.defaultColor))}function u(){angular.isObject(t)&&v.cancel(t),t=v(function(){var e=r.offset();h.callEditor("previewSizeChanged",e.left,e.top,r.width(),r.height(),s.pOptions.tag)},50)}function g(e){h.callEditor("previewToggleVisibility",e)}window[s.pOptions.ctrl]=s,angular.element(window).on("resize.doResize",function(){s.$apply()}),i&&(angular.element(".dropdown").on("show.bs.dropdown",function(){g(!1)}),angular.element(".dropdown").on("hidden.bs.dropdown",function(){g(!0)})),s.setWindowHandle=function(e){p(),l&&l.postMessage&&l.postMessage("setWindowHandle "+e)},i&&s.$on("previewtoggle",function(e,t){var a=0===c;0===(c+=t)?g(!0):1===c&&a&&g(!1)});var f=new ResizeObserver(u);function m(e){return e.y=r.innerHeight()-e.y,e.x=Math.round(e.x),e.y=Math.round(e.y),e}f.observe(r[0]),s.$on("$destroy",function(){f.disconnect(),angular.element(window).off("resize.doResize"),window[s.pOptions.ctrl]=void 0,e.off("pointerenter.preview"),a.off("pointerenter.preview"),e.off("pointerleave.preview"),a.off("pointerleave.preview"),e.off("pointermove.preview"),a.off("pointermove.preview"),e.off("pointerdown.preview"),a.off("pointerdown.preview"),e.off("pointerup.preview"),a.off("pointerup.preview"),e.off("touchend.preview"),a.off("touchend.preview"),e.off("pointercancel.preview"),a.off("pointercancel.preview")}),angular.isDefined(s.pAspectRatio)&&s.$watch(function(){return{width:o.outerWidth(),height:o.outerHeight(),aspect:s.pAspectRatio}},function(e){var t=e.aspect.toLowerCase().split("x");if(2===t.length){var a=Number(t[0])/Number(t[1]);if(a<=0)s.previewPadding="";else{var i=e.width,n=e.height,o=0,r=0;if(0<n&&0<i){var l=i/n;l<a?r=(n-i/a)/2:a<l&&(o=(i-n*a)/2)}s.previewPadding=Math.floor(r)+"px "+Math.floor(o)+"px"}}else s.previewPadding=""},!0),v(u,1e3),s.$on("onCppInit",u),s.$on("showPreviewCrosshair",function(e,t){a.css({display:t?"block":"none"})}),s.mouseEnter=function(e){document.documentElement.style["touch-action"]="none",d={},h.callEditor("sceneMouseMove",angular.toJson(m({tag:s.pOptions.tag,mode:"enter",x:e.offsetX,y:e.offsetY,type:e.originalEvent.pointerType})))},s.mouseLeave=function(e){document.documentElement.style["touch-action"]="auto",h.callEditor("sceneMouseMove",angular.toJson(m({tag:s.pOptions.tag,mode:"leave",x:e.offsetX,y:e.offsetY,type:e.originalEvent.pointerType})))},s.mouseMove=function(e){var t={x:Math.round(e.offsetX),y:Math.round(e.offsetY)};d.x===t.x&&d.y===t.y||(d=t,h.callEditor("sceneMouseMove",angular.toJson(m({tag:s.pOptions.tag,mode:"move",x:e.offsetX,y:e.offsetY,type:e.originalEvent.pointerType}))))},e.on("pointerenter.preview",s.mouseEnter),a.on("pointerenter.preview",s.mouseEnter),e.on("pointerleave.preview",s.mouseLeave),a.on("pointerleave.preview",s.mouseLeave),e.on("pointermove.preview",s.mouseMove),a.on("pointermove.preview",s.mouseMove),s.pOptions.interactive&&(s.mouseDown=function(e){1!==e.which&&3!==e.which||h.callEditor("sceneMouseMove",angular.toJson(m({tag:s.pOptions.tag,mode:"down",x:e.offsetX,y:e.offsetY,key:e.which,type:e.originalEvent.pointerType})))},s.mouseUp=function(e){1!==e.which&&3!==e.which||h.callEditor("sceneMouseMove",angular.toJson(m({tag:s.pOptions.tag,mode:"up",x:e.offsetX,y:e.offsetY,key:e.which,type:e.originalEvent.pointerType})))},s.mouseCancel=function(e){h.callEditor("sceneMouseMove",angular.toJson(m({tag:s.pOptions.tag,mode:"up",x:e.offsetX,y:e.offsetY,type:e.originalEvent.pointerType})))},s.mouseWheel=function(e,t){h.callEditor("sceneMouseWheel",{tag:s.pOptions.tag,delta:t,type:"mouse"})},s.touchEnd=function(e){h.callEditor("sceneMouseMove",angular.toJson(m({tag:s.pOptions.tag,mode:"up",x:e.offsetX,y:e.offsetY,key:1,type:"touch"})))},s.keyDown=function(e){h.callEditor("sceneKey",angular.toJson({tag:s.pOptions.tag,mode:"down",key:e.keyCode}))},s.keyUp=function(e){h.callEditor("sceneKey",angular.toJson({tag:s.pOptions.tag,mode:"up",key:e.keyCode}))},e.on("pointerdown.preview",s.mouseDown),a.on("pointerdown.preview",s.mouseDown),e.on("pointerup.preview",s.mouseUp),a.on("pointerup.preview",s.mouseUp),e.on("touchend.preview",s.touchEnd),a.on("touchend.preview",s.touchEnd),e.on("pointercancel.preview",s.mouseCancel),a.on("pointercancel.preview",s.mouseCancel)),s.previewPadding="",v(p)}}}]),angular.module("wallpaperbrowserApp").directive("previewToggle",["$rootScope",function(i){return{restrict:"A",link:function(e,t){var a=!1;t.on("shown.bs.dropdown.evt",function(){i.$broadcast("previewtoggle",1),a=!0}),t.on("hidden.bs.dropdown.evt",function(){i.$broadcast("previewtoggle",-1),a=!1}),e.$on("$destroy",function(){t.off("shown.bs.dropdown.evt"),t.off("hidden.bs.dropdown.evt"),a&&i.$broadcast("previewtoggle",-1)})}}}]),angular.module("wallpaperbrowserApp").controller("EditorOpenWallpaperModalCtrl",["$uibModalInstance","$scope","modals","host","data",function(e,a,t,i,n){function o(){i.callEditor("getProjects").then(function(e){a.wallpapers=e})}a.ok=function(){e.close(a.currentSelection.project)},a.cancel=function(){e.dismiss("cancel")},a.selectItem=function(e){a.currentSelection=e},a.deleteProject=function(e){if(angular.isString(e.project))return n.deleteProject(e).then(o)},a.callbackWallpaperAllMouse=function(e,t){"left"===e?a.currentSelection=t:"dbl"===e&&(a.currentSelection=t,a.ok())},o()}]),angular.module("wallpaperbrowserApp").controller("EditorSteamPublishModalCtrl",["$uibModalInstance","$q","$scope","$timeout","modals","host","projectData","editorSettings",function(e,t,i,a,n,o,r,l){(window.editorSteamPublishModalCtrl=i).close=function(){e.dismiss("cancel")},i.tagsInvalid=function(){return!angular.isArray(i.projectData.tags)||i.projectData.tags.length<1},i.getPublishButtonText=function(){return i.projectData.workshopid?"ui_editor_publish_modal_button_publish_update":"ui_editor_publish_modal_button_publish"},i.startPublish=function(){if(r.contentrating){var e=t.when();"wallpaper"!==l.category||!i.projectData||"scene"!==i.projectData.type||angular.isArray(i.projectData.templateoptions)||r.workshopid||(e=o.callEditor("checkSceneAnimated").then(function(e){if("noanimation"===e)return n.open("genericConfirm",{data:{title:"ui_editor_no_animation_modal_header",message:"ui_editor_no_animation_modal_body",leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}},{backdropClass:"modal-backdrop-danger"})})),e.then(function(){i.page="publish",i.publishPage="progress",i.publishPreventCancel=!1,i.publishProgressMessage="",i.publishProgressValue=0,i.publishProgressError=void 0,o.callUI("publishToSteam",i.projectData,i.editorSettings.dependentProject).then(function(e){i.needsToAcceptAgreement=e.needsToAcceptAgreement,i.itemId=e.id,i.publishPage="success"}).catch(function(){i.page="initial"})})}else n.open("editorRating",{data:i.projectData}).then(function(){a(i.startPublish)})},i.cancelPublish=function(){o.callUI("cancelPublishToSteam").then(function(e){e&&(i.page="initial",i.publishProgressValue=0)})},i.openItemInWorkshop=function(){window.ui.shellexecute("steam://url/CommunityFilePage/"+i.itemId)},i.setPublishProgress=function(e,t,a){i.publishProgressMessage=e,i.publishProgressValue=Math.floor(t),i.publishPreventCancel=a,n.setPreventModalClose(a)},i.setWorkshopId=function(e){i.projectData.workshopid=e},i.onPublishError=function(e){i.publishPage="error",i.publishPreventCancel=!1,i.publishProgressError=e,i.publishProgressValue=0,n.setPreventModalClose(!1)},i.isPublishDisabled=function(){return!i.projectData.title||(!i.projectData.preview||i.tagsInvalid())},i.$on("$destroy",function(){window.editorSteamPublishModalCtrl=void 0}),i.projectData=r,i.editorSettings=l,i.publishProgressValue=0,i.publishPage="progress"}]),angular.module("wallpaperbrowserApp").directive("workshopDetails",["$translate","modals","host","utils","toastr",function(o,t,r,l,s){return{templateUrl:"views/templates/workshopdetails.html",restrict:"E",scope:{wdProjectData:"=",wdEditorSettings:"="},link:function(i){var n={};function e(e){angular.isString(e)&&(i.wdProjectData.preview=e)}function a(){var e=i.selectedTag.tag;angular.isString(e)&&0<e.trim().length&&(i.wdProjectData.tags=[e])}i.visibilityOptions=[{label:"ui_workshop_tags_visibility_public",value:"public"},{label:"ui_workshop_tags_visibility_friends_only",value:"friends"},{label:"ui_workshop_tags_visibility_private",value:"private"}],i.takeSnapshot=function(){r.callUI("takeSnapshot").then(e)},i.importSnapshot=function(){r.callUI("importSnapshot").then(e)},i.openRatingModal=function(e){t.open("editorRating",{data:e})},i.getTags=function(){var i=[];return angular.forEach(l.getAvailableTags(),function(e){var t,a;i.push((a={label:t=e,value:t},"en-us"!==o.use()&&(angular.isString(n[a.value])&&0<n[a.value].length?a.label+=" ("+n[a.value]+")":o("ui_workshop_tags_"+a.value.toLowerCase().replace(/[\- ]/g,"_")).then(function(e){0<(e=""+e).length&&a.label!==e&&(n[a.value]=e,a.label+=" ("+e+")")})),a))}),i},i.canAddTag=function(){var e=!angular.isArray(i.tags)||i.tags.length<3;return e||o("ui_editor_workshop_tags_limit").then(function(e){s.error(e,"Error")}),e},i.colorPickerOptions=l.getColorPickerDefaults(),i.$watch("wdProjectData.preview",function(e){angular.isString(e)&&0<e.length&&(i.previewRefreshUrl=e+"?refresh="+(new Date).getTime())}),i.availableTags=i.getTags(),angular.isArray(i.wdProjectData.tags)&&0<i.wdProjectData.tags.length?i.selectedTag={tag:i.wdProjectData.tags[0]}:i.selectedTag={tag:"Unspecified"},i.$watch("selectedTag.tag",function(){a()}),i.selectedUploadOption={value:null},i.$watch("wdEditorSettings.publishedItems",function(e){i.uploadProjectOptions=[{label:"ui_editor_workshop_options_upload_as_new_item",value:null}];var a=i.uploadProjectOptions;angular.forEach(e,function(t){o("ui_editor_workshop_options_upload_as_update",{name:t.title}).then(function(e){a.push({label:e,value:t})})})}),"wallpaper"!==i.wdEditorSettings.category&&i.$watch("selectedUploadOption.value",function(e){if(angular.isObject(e)){i.wdProjectData.workshopid=e.workshopid,i.wdProjectData.title=e.title,i.wdProjectData.description=e.description,i.wdProjectData.tags=e.tags,i.wdProjectData.contentrating=e.contentrating,i.wdProjectData.visibility=e.visibility,delete i.wdProjectData.preview;var t=l.getAvailableTags();angular.forEach(e.tags.split(","),function(e){t.includes(e)&&(i.selectedTag.tag=e)})}else delete i.wdProjectData.workshopid,delete i.wdProjectData.title,delete i.wdProjectData.description,delete i.wdProjectData.contentrating,i.wdProjectData.visibility="public",i.selectedTag.tag="Unspecified",a()})}}}]),angular.module("wallpaperbrowserApp").service("utils",["$document","$rootScope","$translate","modals","toastr",function(t,a,i,n,o){var r,l,s,c,d=[],p=[],u=[],g=[],f=this;function m(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function v(e,t,a){return"#"+m(e)+m(t)+m(a)}function h(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:{r:0,g:0,b:0}}this.getAvailableTags=function(e){return angular.copy(e?p:d)},this.getResolutionTags=function(){return angular.copy(u)},this.getWallpaperSourceTags=function(){return[{value:"Official",label:"ui_browse_filter_source_official"},{value:"Workshop",label:"ui_browse_filter_source_workshop"},{value:"Local",label:"ui_browse_filter_source_my_wallpapers"}]},this.getWallpaperCategoryTags=function(){return[{value:"Wallpaper",label:"ui_browse_filter_category_wallpaper"},{value:"Preset",label:"ui_browse_filter_category_preset"}]},this.getWallpaperTypeTags=function(){return[{value:"Scene",label:"ui_browse_filter_type_scene"},{value:"Video",label:"ui_browse_filter_type_video"},{value:"Web",label:"ui_browse_filter_type_web"},{value:"Application",label:"ui_browse_filter_type_application"}]},this.getWallpaperRatingTags=function(){return[{value:"Everyone",label:"ui_workshop_tags_rating_everyone"},{value:"Questionable",label:"ui_workshop_tags_rating_questionable"},{value:"Mature",label:"ui_workshop_tags_rating_mature"}]},this.setAvailableTags=function(e,t,a){d=e,angular.isArray(t)&&(p=t),angular.isArray(a)&&(u=a)},this.prepareTagForTranslation=function(e){return e&&e.toLowerCase().replace(/[\- ]/g,"_")||""},this.translateTag=function(t){return i("ui_workshop_tags_"+f.prepareTagForTranslation(t)).then(function(e){return 0<e.toString().length?e.toString():t}).catch(function(){return t})},this.translateTagInstant=function(e){var t=e&&i.instant("ui_workshop_tags_"+e.toLowerCase().replace(/[\- ]/g,"_")).toString()||"";return 0<t.length?t:e},this.translateRatingTag=function(t){return i("ui_workshop_tags_rating_"+t.toLowerCase().replace(/[\- ]/g,"_")).then(function(e){return 0<e.toString().length?e.toString():t}).catch(function(){return t})},this.showError=function(e,t){var a={};angular.isNumber(t)&&(a.timeOut=t,a.extendedTimeOut=t),o.error(e,"Error",a)},this.showWarning=function(e){o.warning(e,"Warning")},this.showSuccess=function(e){o.success(e,"Success")},this.showBuildVersionError=function(e,t){s={callerVersion:e,appVersion:t},l={title:"ui_modal_updaterequired_title",message:"",leftIcon:"images/warning.png",okClass:"btn-primary",okText:"ui_ok",okVisible:!0},n.open("genericConfirm",{data:l},{backdropClass:"modal-backdrop-warning"}),i(r="ui_modal_updaterequired_body",s).then(function(e){l.message=e})},this.showAvailableDistroUpdate=function(e){s={distroVersion:e},l={title:"ui_modal_updaterequired_title",message:"",okClass:"btn-primary",okText:"ui_ok",okVisible:!0,cancelVisible:!0},n.open("genericConfirm",{data:l}).then(function(){window.ui.updatedistro()}),i(r="ui_modal_updateavailable_body_distro",s).then(function(e){l.message=e})},this.getColorPickerDefaults=function(e){var t={chooseText:"OK",cancelText:"Cancel",showPalette:!0,palette:[["white","silver","black"],["red","orange","yellow"],["lime","green","#254117"],["lightblue","blue","darkblue"],["cyan","purple","Magenta"]],preferredFormat:"hex",showInput:!0,maxSelectionSize:3};return e&&(t.flat=!0),t},this.convertVec3ToHex=function(e){if(!angular.isString(e))return"#000000";var t=e.split(" ");return 3===t.length?v(Math.round(255*parseFloat(t[0])),Math.round(255*parseFloat(t[1])),Math.round(255*parseFloat(t[2]))):e},this.convertVec3ToHex_255=function(e){if(!angular.isString(e))return"#000000";var t=e.split(" ");return 3===t.length?v(Math.round(parseFloat(t[0])),Math.round(parseFloat(t[1])),Math.round(parseFloat(t[2]))):e},this.convertHexToVec3=function(e){var t=h(e);return t.r/255+" "+t.g/255+" "+t.b/255},this.convertHexToVec3_255=function(e){var t=h(e);return t.r+" "+t.g+" "+t.b},this.onProjectNameChanged=function(e){angular.isString(e)&&0<e.length?a.captionPrefix=e+" - ":a.captionPrefix="Untitled - "},this.damerauLevenshteinDistance=function(e,t){if(!angular.isString(e)||e.length<1)return angular.isString(t)&&0<t.length?t.length:0;if(!angular.isString(t)||t.length<1)return angular.isString(e)&&0<e.length?e.length:0;for(var a,i,n,o,r=e.length,l=t.length,s=new Array(r+1),c=0;c<s.length;++c)s[c]=new Array(l+1);for(c=0;c<=r;++c)s[c][0]=c;for(c=0;c<=l;++c)s[0][c]=c;for(c=1;c<=r;c++)for(var d=1;d<=l;d++)a=e[c-1]===t[d-1]?0:1,i=s[c-1][d]+1,n=s[c][d-1]+1,o=s[c-1][d-1]+a,s[c][d]=Math.min(i,Math.min(n,o)),1<c&&1<d&&e[c-1]===t[d-2]&&e[c-2]===t[d-1]&&(s[c][d]=Math.min(s[c][d],s[c-2][d-2]+a));return s[r][l]},this.smartStringCompare=function(e,t){var a=e.toLowerCase().replace(/[\?\.\!]/g,""),i=t.toLowerCase().replace(/[\?\.\!]/g,"");return!!(i.includes(a)||f.damerauLevenshteinDistance(i,a)<3)},this.getQualityPreset=function(e){switch(e){case"low":return{msaa:"none",resolution:"full",fps:10,bloom:!1,reflection:!1,preset:"low"};case"medium":return{msaa:"x2",resolution:"full",fps:15,bloom:!0,reflection:!0,preset:"medium"};case"high":return{msaa:"x4",resolution:"full",fps:25,bloom:!0,reflection:!0,preset:"high"}}},this.getFilename=function(e,t){var a=e.split(/(\\|\/)/g).pop();return t&&(a=a.split(/(\.)/g)[0]||a||e),a},this.isURL=function(e){return e.beginsWith("http://")||e.beginsWith("https://")||e.beginsWith("www.")},this.setLanguage=function(e){"default"===e&&angular.isString(c)&&(e=c),i.use(e).then(i.refresh),a.languageClass="langCSS"+e},this.setSteamLanguage=function(e){c=e},this.setAvailableLanguages=function(e){(g=e).sort(function(e,t){return e.label.localeCompare(t.label)}),angular.forEach(g,function(t){"en-us"!==t.value&&i("system_language_"+t.value).then(function(e){t.label+=" ("+e+")"})});var t={label:"Default",icon:"fab fa-steam-square",value:"default"};g.splice(0,0,t),i("system_language_"+c).then(function(e){t.label+=" ("+e+")"})},this.getAvailableLanguages=function(){return g};var b={};this.setKnownExtensions=function(e){b=e},this.isExtension=function(e,t){var a="."+/(?:\.([^.]+))?$/.exec(e)[1];return a=a.toLowerCase(),0<=(b[t]||[]).indexOf(a)},this.toDegrees=function(e){return e*(180/Math.PI)},this.toRadians=function(e){return e*(Math.PI/180)},this.getElementBounds=function(e){var t={top:e.position().top,left:e.position().left};return t.bottom=t.top+e.innerHeight(),t.right=t.left+e.innerWidth(),t},this.checkBoundsOverlap=function(e,t){return!(e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)};var _,w={};this.updateTexturePreview=function(e){w[e.id]=e.data},this.getTexturePreviews=function(){return w},this.incrementNameIndex=function(e,t){for(;0<=t.indexOf(e);){var a=e.split(" "),i=parseInt(a[a.length-1]);return a.length<2||i<2?e+" 2":(a.pop(),a.join(" ")+(i+1))}return e},this.getStaticExploreQueries=function(){var e=[{querytype:"most_recent",tags:["Approved"],priority:1},{querytype:"trend_year",tags:["Approved"]},{querytype:"trend_week",tags:["Approved"]},{querytype:"trend_year",tags:["Audio responsive"],excludetags:["Relaxing","Anime","CGI","Game"]},{querytype:"trend_week",tags:["Audio responsive"],excludetags:["Relaxing","Anime","CGI","Game"]},{querytype:"trend_week",tags:["Abstract"]},{querytype:"trend_week",tags:["Animal"]},{querytype:"trend_year",tags:["Anime"]},{querytype:"trend_week",tags:["Anime"]},{querytype:"trend_week",tags:["Cartoon"]},{querytype:"trend_year",tags:["Cyberpunk"]},{querytype:"trend_week",tags:["Cyberpunk"]},{querytype:"trend_year",tags:["Fantasy"]},{querytype:"trend_week",tags:["Fantasy"]},{querytype:"trend_year",tags:["Game"]},{querytype:"trend_week",tags:["Game"]},{querytype:"trend_year",tags:["Landscape"]},{querytype:"trend_week",tags:["Landscape"]},{querytype:"trend_year",tags:["Medieval"]},{querytype:"trend_week",tags:["Medieval"]},{querytype:"trend_week",tags:["MMD","Anime"]},{querytype:"trend_year",tags:["Nature"]},{querytype:"trend_week",tags:["Nature"]},{querytype:"trend_year",tags:["Pixel art"]},{querytype:"trend_week",tags:["Pixel art"]},{querytype:"trend_year",tags:["Retro"]},{querytype:"trend_week",tags:["Retro"]},{querytype:"trend_year",tags:["Sci-fi"]},{querytype:"trend_week",tags:["Sci-fi"]},{querytype:"trend_year",tags:["Sports"]},{querytype:"trend_week",tags:["Sports"]},{querytype:"trend_year",tags:["Technology"]},{querytype:"trend_week",tags:["Technology"]},{querytype:"trend_year",tags:["Vehicle"]},{querytype:"trend_week",tags:["Vehicle"]},{querytype:"trend_year",tags:["Memes"]}],t=["Unspecified"];return angular.forEach(e,function(e){e.category="genre",e.includetags=[e.tags[0]],angular.isArray(e.excludetags)?e.excludetags=e.excludetags.concat(t):e.excludetags=t}),e=e.concat([{category:"misc",querytype:"followers_created",title:"ui_browse_explore_category_followed",tags:["Misc"]},{category:"misc",querytype:"friends_created",title:"ui_browse_explore_category_friends_created",tags:["Misc"]},{category:"misc",querytype:"friends_favorites",title:"ui_browse_explore_category_friends_favorites",tags:["Misc"]},{category:"misc",querytype:"my_favorites",title:"ui_browse_explore_category_user_favorites",tags:["Misc"]},{category:"misc",querytype:"voted_up",title:"ui_browse_explore_category_user_up_voted",tags:["Misc"]}])},this.updateQueryName=function(e){switch(e.category){case"genre":e.name=e.category+e.tags[0]+e.querytype;break;case"creator":case"collection":e.name=e.category+e.itemid+e.querytype;break;case"keyword":e.name=e.category+e.keyword+e.querytype;break;default:e.name=e.category+e.querytype}e.custom&&(e.name="custom"+e.name)},this.startHotkeyListener=function(e){_=e,window.ui.startHotkeyListener(),t.on("keydown.hotkey",window.cancelEventImmediately),t.on("keypress.hotkey",window.cancelEventImmediately),t.on("keyup.hotkey",window.cancelEventImmediately)},this.onHotkeyUpdate=function(e){angular.isFunction(_)&&_(e),(e.cancel||e.finished)&&(_=void 0,t.off("keydown.hotkey"),t.off("keypress.hotkey"),t.off("keyup.hotkey"))},this.stopHotkeyListener=function(){_=void 0,t.off("keydown.hotkey"),t.off("keypress.hotkey"),t.off("keyup.hotkey"),window.ui.stopHotkeyListener()},this.isUserHotkeyAction=function(e){return"wallpaper"===e||"playlist"===e||"profile"===e},this.validateSharedSettings=function(e){e.hotkeys=e.hotkeys||[]},a.$on("$translateChangeEnd",function(){angular.isObject(s)&&angular.isObject(l)&&i(r,s).then(function(e){l.message=e})})}]),angular.module("wallpaperbrowserApp").controller("EditorImportModelModalCtrl",["$uibModalInstance","$scope","$timeout","toastr","compiler","host","objInfo",function(t,n,e,a,i,o,r){n.close=function(){t.dismiss("cancel")},n.ok=function(){n.waitingForResponse=!0;var e=angular.copy(n.objInfo);angular.forEach(e.materials,function(e){e.config.spritesheet||delete e.config.spritesheetsequences}),o.callEditor(r.config.copycommand,angular.toJson(e)).then(function(e){n.waitingForResponse=!1,n.modelDestinationPath=e,n.compileCtrl.start()}).catch(function(){n.waitingForResponse=!1})};var l={onCompileFailed:function(e){a.error(e,"Error"),n.okButtonLabel="Retry",n.$apply()},onCompileFinished:function(){e(function(){angular.isString(n.modelDestinationPath)&&(angular.isString(r.config.addcommand)?o.callEditor(r.config.addcommand,n.modelDestinationPath,r.jsonConfig).then(function(e){e.shouldAdjustProjection=r.shouldAdjustProjection,t.close(e)}).catch(function(){n.compileCtrl.cancel(),n.okButtonLabel="Retry"}):t.close(n.modelDestinationPath))},1e3),n.$apply()}};n.$on("$destroy",function(){i.removeListener(l)}),n.compileCtrl={},n.okButtonLabel="OK",i.addListener(l),o.callEditor("getShaderPresets",r.config.shaderpresetkey).then(function(i){n.shaderPresets=i,n.objInfo=r,n.objInfo.shouldAdjustProjection=r.isImage&&0===r.renderableCount,angular.forEach(n.objInfo.materials,function(e){var t,a;e.shaderpreset=i[0].value,e.config=e.config||{},e.config.spritesheetsequences=[{width:64,height:64,frames:10,duration:1}],t=e.file,a=e,o.callEditor("getTexturePreview",{path:t,size:128}).then(function(e){a.previewUrl=e.data}),e.formats=i[0].textures[0].formats,angular.merge(e.config,i[0].textures[0].config),e.config.format=e.config.format||e.formats[0].value,n.objInfo.shouldAdjustProjection&&(e.config.clampuvs=!0)})}).then(function(){r.instantImport&&n.ok()})}]),angular.module("wallpaperbrowserApp").service("compiler",["utils",function(t){window.compilerService=this;var a=[];this.onCompileStarted=function(t){angular.forEach(a,function(e){angular.isFunction(e.onCompileStarted)&&e.onCompileStarted(t)})},this.onCompileFailed=function(t){angular.forEach(a,function(e){angular.isFunction(e.onCompileFailed)&&e.onCompileFailed(t)})},this.onCompileFinished=function(e){angular.isString(e)&&0<e.length&&t.showWarning(e),angular.forEach(a,function(e){angular.isFunction(e.onCompileFinished)&&e.onCompileFinished()})},this.addListener=function(e){a.push(e)},this.removeListener=function(e){a.splice(a.indexOf(e),1)}}]),angular.element.fn.getStyleObject=function(){var e,t,a=this.get(0),i={};if(window.getComputedStyle){for(var n=function(e,t){return t.toUpperCase()},o=0,r=(e=window.getComputedStyle(a,null)).length;o<r;o++){var l=(t=e[o]).replace(/\-([a-z])/g,n),s=e.getPropertyValue(t);i[l]=s}return i}if(e=a.currentStyle){for(t in e)i[t]=e[t];return i}return this.css()},angular.module("wallpaperbrowserApp").service("dragdrop",["$rootScope","$timeout","$q","$document",function(o,l,e,s){var r,c,d,p,n,u=this,g=angular.element(s[0].body),f=[],i=[];function m(){r.remove(),r=void 0,g.off("mousemove.dragdrop"),g.off("mouseup.dragdrop"),c=d=void 0}(window.dragdrop=this).finish=function(e){p&&p.dragDropListener&&p.dragDropListener.onMouseLeave(),c&&(e?c.onDragged():c.onCancelled()),o.$broadcast("onInternalDropStop",d)},this.start=function(e,t,a,i){r&&(u.finish(),m()),d=t,(c=a).dragDropTag=i,p=void 0,r=e.createDragDropElement&&e.createDragDropElement()||e.clone();var n=e.getStyleObject();r.css(n),r.css({opacity:0,position:"absolute","pointer-events":"none"}),g.append(r),g.on("mousemove.dragdrop",function(e){r.css({opacity:.5,left:e.pageX,top:e.pageY}),function(e){for(var t=0;t<f.length;++t){var a=f[t];if(angular.isDefined(a[0])){var i=a[0].getBoundingClientRect(),n=e.pageX>i.left&&e.pageX<i.left+i.width&&e.pageY>i.top&&e.pageY<i.top+i.height;n&&angular.isFunction(a.dragDropListener.condition)&&(n=a.dragDropListener.condition(d)),n&&p!==a&&(o=a,angular.isDefined(c)&&angular.isString(c.dragDropTag)===angular.isString(o.dragDropListener.dragDropTag)&&c.dragDropTag===o.dragDropListener.dragDropTag)?(p=a).dragDropListener.onMouseEnter():n||p!==a||(p=void 0,a.dragDropListener.onMouseLeave()),n&&p===a&&a.dragDropListener.onMouseMove(e)}}var o}(e)}),g.on("mouseup.dragdrop",function(e){p&&p.dragDropListener.onElementDropped(e,d)?u.finish(!0):u.finish(),m(),window.safeApply(o)}),o.$broadcast("onInternalDropStart",t)},this.registerContainer=function(e,t,a){(e.dragDropListener=t).dragDropTag=a,f.push(e)},this.unregisterContainer=function(e){var t=f.indexOf(e);0<=t&&f.splice(t,1)},this.registerInitiator=function(e){0===i.length&&(s.on("mousedown.dragdropservice.initiators",function(e){for(var t=0;t<i.length;++t){var a=i[t].findElement(e);if(a){(n=a).x=e.offsetX,n.y=e.offsetY;break}}}),s.on("mouseup.dragdropservice.initiators",function(){n=void 0}),s.on("mousemove.dragdropservice.initiators",function(e){if(angular.isObject(n)&&5<Math.abs(e.offsetX-n.x)+Math.abs(e.offsetY-n.y)){var t=n,a=t.element.css("opacity");t.element.css({opacity:.35});var i={onCancelled:function(){t.element.css({opacity:a})},onDragged:function(){t.element.css({opacity:a})}};u.start(t.element,t.data,i,t.tag),n=void 0}})),i.push(e)},this.unregisterInitiator=function(e){i.findAndRemove(e),0===i.length&&(s.off("mousedown.dragdropservice.initiators"),s.off("mouseup.dragdropservice.initiators"),s.off("mousemove.dragdropservice.initiators"))},this.beginDragTest=function(e,t){var a={x:e.offsetX,y:e.offsetY,isAccepted:!1};return s.on("mouseup.dragdropservice.tmpDragTest",function(e){s.off("mouseup.dragdropservice.tmpDragTest"),s.off("mousemove.dragdropservice.tmpDragTest"),a.isAccepted?t.finish&&t.finish(e):t.cancel&&t.cancel(e)}),s.on("mousemove.dragdropservice.tmpDragTest",function(e){a.isAccepted?t.move&&t.move(e):5<Math.abs(e.offsetX-a.x)+Math.abs(e.offsetY-a.y)&&(a.isAccepted=!0,t.start&&t.start(e))}),a},this.beginAutoScroll=function(e,a){var t="dragdropservice."+e+".autoscroll",i={cancel:function(){s.off("mousemove."+t),s.off("mouseup."+t),i.timer&&(l.cancel(i.timer),i.timer=void 0)},timer:void 0,speed:0},n=function(){a.scrollTop(Math.clamp(a.scrollTop()+i.speed,0,a[0].scrollHeight-a.innerHeight())),i.timer=l(n)},o=function(){i.timer||(i.timer=l(n))},r=function(){i.timer&&(l.cancel(i.timer),i.timer=void 0)};return s.on("mouseup."+t,function(){i.cancel()}),s.on("mousemove."+t,function(e){if(e.target===a||angular.element.contains(a[0],e.target)){var t=angular.offsetToAncestor(e,a);t.top-=a.scrollTop(),t.top<50?(i.speed=t.top-50,o()):t.top>a.innerHeight()-50?(i.speed=t.top-a.innerHeight()+50,o()):r()}else r()}),i};var v=[];this.onNativeDropStart=function(e,t,a){v=e,o.osDropActive=!0,o.$broadcast("onNativeDropStart",{files:v,x:t,y:a}),window.safeApply(o)},this.onNativeDropStop=function(){o.osDropActive=!1,o.$broadcast("onNativeDropStop"),window.safeApply(o)},this.onNativeDropMove=function(e,t){o.$broadcast("onNativeDropMove",{x:e,y:t}),window.safeApply(o)},this.onNativeDropEvent=function(e,t){o.osDropActive=!1,o.$broadcast("onNativeDropDropped",{files:v,x:e,y:t}),window.safeApply(o)}}]),angular.module("wallpaperbrowserApp").directive("propertyList",["$timeout","host","utils",function(l,a,e){return{templateUrl:"views/templates/propertylist.html",restrict:"E",scope:{pList:"=",pOwner:"=",pCtrl:"=",pConditionScope:"=",pModalDepth:"="},link:function(o){var i={},n=!1;function r(t){var a;return angular.forEach(o.pList,function(e){e.key===t&&(a=e)}),{resource:o.pOwner,property:a}}o.colorPickerSettings=e.getColorPickerDefaults(),o.selectedEffect={item:void 0},o.texturePreviews={},o.findProperty=function(t){var a;return angular.forEach(o.pList,function(e){e.key===t&&(a=e)}),a},o.evalCondition=function(e){return o.$eval(e,o.pConditionScope||o)},o.checkBit=function(e,t){return 0!=(e&t)},o.recalculateBitFlags=function(t){var a=0;return angular.forEach(o.pList,function(e){e.key===t&&(a|=e.value&e.bit)}),a},o.sendAssetPropertyChange=function(e,t,a){return n&&((a=a||{}).save=!1),o.pCtrl.sendAssetPropertyChange(e,t,a)},o.linkedSliderStart=function(){n=!0},o.linkedSliderEnd=function(e){n=!1;var t=r(e);delete t.property.lastValue,o.pCtrl.sendAssetPropertyChange(t.resource,t.property)},o.sendAssetPropertyChangeSliderStart=function(e){n=!0;var t=r(e);o.pCtrl.sendAssetPropertyChange(t.resource,t.property,{save:!1})},o.sendAssetPropertyChangeSliderChange=function(e){var t=r(e),a={};n&&(a.save=!1),o.pCtrl.sendAssetPropertyChange(t.resource,t.property,a)},o.sendAssetPropertyChangeSliderEnd=function(e){n=!1;var t=r(e);delete t.property.lastValue,o.pCtrl.sendAssetPropertyChange(t.resource,t.property)},o.sendAssetPropertyChangeColor=function(e,t){if(t.lastColorValue!==t.value){t.lastColorValue=t.value;var a=""+e.id+t.key;angular.isDefined(i[a])&&l.cancel(i[a]),o.pCtrl.sendAssetPropertyChange(e,t,{save:!1}),i[a]=l(function(){delete t.lastValue,o.pCtrl.sendAssetPropertyChange(e,t)},100)}},o.sendMultipleProperties=function(e,i){var n=[];angular.forEach(i.value,function(t,a){var e=angular.copy(i);e.key=a,e.value=t,n.push(e),angular.forEach(o.pList,function(e){e.key===a&&(e.value=t)})}),o.pCtrl.sendAssetPropertyChange(e,n)},o.getTexturePreview=function(e,t){return e.lastTexturePath!==t&&(e.lastTexturePath=t,a.callEditor("getTexturePreview",{id:e.id,path:t})),!0},o.toggleLock=function(e){var t=o.findProperty("locktransforms");t.value=e,o.pCtrl.sendAssetPropertyChange(o.pOwner,t)},o.toggleVisible=function(e){var t=o.findProperty("visible");t.value=e,o.pCtrl.sendAssetPropertyChange(o.pOwner,t)},o.texturePreviews=e.getTexturePreviews()}}}]),angular.module("wallpaperbrowserApp").directive("cameraTimeline",["$document","$timeout","$translate","host",function(e,c,D,W){return{restrict:"E",scope:{ctData:"="},link:function(s,d){var p,u,g,f,m,t,n,v=angular.element(e[0].body),h={cursorPosition:0,buttonPlayState:"play",buttonKeyState:"add",playInProgress:!1},b={active:!1,keyFrame:void 0},o={duration:0},_=[];function w(e,t){var a=e.pageX-p.offset().left,i=p.width();a=(a=Math.max(0,Math.min(i,a)))/i*g.duration*2;var n,o,r=(a=Math.round(a))/2;if(angular.isObject(b.keyFrame))if(t){var l=(n=b.keyFrame[0].dataId,angular.forEach(_,function(e){e.id===n&&(o=e)}),o);W.callEditor("moveCameraTransform",s.ctData.id,l.id,r).then(function(){S(l.timestamp=r,l.marker),angular.forEach(g.transforms,function(e){e.id===l.id&&(e.timestamp=l.timestamp)})}).catch(function(){S(l.timestamp,l.marker)})}else S(r);else S(h.cursorPosition=r)}function y(){1<_.length?f.removeClass("disabled"):f.addClass("disabled")}function k(){var t=!1;angular.forEach(_,function(e){t=t||e.timestamp===h.cursorPosition}),O(1,t?"remove":"add")}function i(e,t){t=t/g.duration*100,e.css({left:t+"%"}),k()}function S(e,t){i(t||b.keyFrame||u,e)}function a(){u.removeClass("play"),h.playInProgress=!1,W.callEditor("pausePlayback"),angular.isDefined(t)&&(c.cancel(t),t=void 0)}function x(){v.off("mousemove.cameraTimeline"),v.off("mouseup.cameraTimeline"),v.off("mouseleave.cameraTimeline")}function E(){var e=angular.element(document.createElement("span"));return e.addClass("timelineRow"),e}function C(){var e=angular.element(document.createElement("span"));return e.addClass("timestampContainer"),e}function T(e){var t=angular.element(document.createElement("span"));return t.text(Math.round(e)),t.addClass("timestamp"),t}function I(e,t){var a=angular.element(document.createElement("span"));return a.addClass(t?"smallLine":"line"),e&&a.addClass("left"),a}function A(){var e=angular.element(document.createElement("a")),t=angular.element(document.createElement("span")),a=angular.element(document.createElement("span"));return e.append(t),e.append(a),e.addClass("btn btn-primary fullWidth"),a.addClass("buttonText"),e}function O(e,t){var a=0===e?f:m,i=angular.element(a.children("span")[0]);i.removeClass();var n=angular.element(a.children("span")[1]);switch(t){case"play":n.text(" Play"),i.addClass("glyphicon glyphicon-play");break;case"pause":n.text(" Pause"),i.addClass("glyphicon glyphicon-pause");break;case"add":n.text(" Add Key"),i.addClass("glyphicon glyphicon-plus");break;case"remove":n.text(" Remove"),i.addClass("glyphicon glyphicon-remove")}0===e?h.buttonPlayState=t:h.buttonKeyState=t}function P(){"play"===h.buttonPlayState?(O(0,"pause"),h.cursorPosition+.25>g.duration&&(h.cursorPosition=0,S(h.cursorPosition)),u.addClass("play"),h.playInProgress=!0,W.callEditor("startPlayback",s.ctData.id,h.cursorPosition).then(function(){var e=function(){h.cursorPosition+.25>g.duration?(a(),O(0,"play")):(h.cursorPosition+=.5,S(h.cursorPosition),t=c(e,500))};t=c(e,500)})):(O(0,"play"),a())}function M(e,t){var a=angular.element(document.createElement("span"));return a.addClass("marker keyFrameMarker"),a.on("mousedown",function(e){h.playInProgress&&P(),e.stopPropagation(),b.keyFrame=a,b.active=!0}),_.push({marker:a,id:e,timestamp:t}),a[0].dataId=e,i(a,t),a}function R(){if("add"===h.buttonKeyState)W.callEditor("addCameraTransformToPath",s.ctData.id,h.cursorPosition).then(function(e){var t=M(e.id,e.timestamp);p.prepend(t),g.transforms.push({id:e.id,timestamp:e.timestamp}),y()});else{var t=(a=h.cursorPosition,angular.forEach(_,function(e){e.timestamp===a&&(i=e)}),i);if(!angular.isObject(t))return;W.callEditor("removeCameraTransformFromPath",s.ctData.id,t.id).then(function(){t.marker.remove(),_.splice(_.indexOf(t),1);for(var e=0;e<g.transforms.length;++e)if(g.transforms[e].id===t.id){g.transforms.splice(e,1);break}y(),k()})}var a,i}function r(e){d.empty(),_=[],(g=angular.copy(e)).transforms=e.transforms,g.duration=Math.ceil(g.duration);var t,a,i=function(){var e=angular.element(document.createElement("div"));e.addClass("editorCameraTimeline"),e.on("mousedown",function(e){h.playInProgress||(w(e),b.active=!0)}),x(),v.on("mousemove.cameraTimeline",function(e){b.active&&w(e)});var t=function(e){angular.isObject(b.keyFrame)&&w(e,!0),b.active=!1,b.keyFrame=void 0};return v.on("mouseup.cameraTimeline",t),v.on("mouseleave.cameraTimeline",t),e}();d.append(i);var n=E();n.addClass("timeStamps");var o,r=i.width()/g.duration<40;for(t=0;t<g.duration;++t){var l;a=C(g.duration),0===t&&((l=T(0)).addClass("left"),a.append(l)),r&&(t+1)%5!=0&&t!==g.duration-1||(l=T(t+1),a.append(l)),n.append(a)}for(i.append(n),n=E(),t=0;t<g.duration;++t){a=C(g.duration);var s=I();a.append(s),r||a.append(I(!1,!0)),0===t&&a.append(I(!0)),n.append(a)}i.append(n),u=function(){var e=angular.element(document.createElement("span"));e.addClass("marker cursorMarker");var t=angular.element(document.createElement("span"));return t.addClass("arrow fas fa-play"),e.append(t),e}(),(o=angular.element(document.createElement("span"))).addClass("markerContainer"),(p=o).append(u),i.append(p),angular.forEach(e.transforms,function(e){var t=M(e.id,e.timestamp);p.prepend(t)});var c=angular.element(document.createElement("div"));c.addClass("editorCameraTimelineControls"),f=A(),m=A(),O(0,h.buttonPlayState),O(1,h.buttonKeyState),y(),k(),c.append(f),c.append(m),d.append(c),f.click(P),m.click(R),S(h.cursorPosition)}function l(){d.empty();var e=angular.element(document.createElement("div"));e.addClass("editorCameraTimeline errorMessage");var t=angular.element(document.createElement("span"));D("ui_editor_camera_select_path").then(function(e){t.text(e)}),e.append(t),d.append(e)}l(),s.$watch("ctData",function(e){if(angular.isObject(e)){var a=!1,i=e.transforms||[];angular.forEach(e.properties,function(e,t){"duration"===e.key&&(a=!0,angular.isFunction(n)&&n(),n=s.$watch("ctData.properties["+t+"].value",function(e){(!angular.isNumber(e)||e<1)&&(e=1),r(o={duration:e,transforms:i})}))}),a||l()}else l()}),s.$on("$destroy",function(){x(),angular.element(window).off("resize.cameraTimelineResize")}),r(o),angular.element(window).on("resize.cameraTimelineResize",function(){r(o)})}}}]),angular.module("wallpaperbrowserApp").directive("disableAnimate",["$animate",function(a){return{restrict:"A",link:function(e,t){a.enabled(t,!1)}}}]),angular.module("wallpaperbrowserApp").controller("EditorProjectSettingsModalCtrl",["$scope","$uibModalInstance","$timeout","modals","utils","project",function(e,t,a,i,n,o){e.close=function(){t.close()},e.colorPickerOptions=n.getColorPickerDefaults(),e.project=o,e.$watch("project.data.title",function(e){n.onProjectNameChanged(e)}),a(function(){e.$broadcast("rzSliderForceRender")},300)}]),angular.module("wallpaperbrowserApp").directive("vecColorConverter",["utils",function(n){return{restrict:"A",require:"ngModel",link:function(e,t,a,i){"false"!==a.vecColorConverter?(i.$parsers.push(n.convertHexToVec3),i.$formatters.push(n.convertVec3ToHex)):(i.$parsers.push(n.convertHexToVec3_255),i.$formatters.push(n.convertVec3ToHex_255))}}}]).directive("vecComponentInput",["$rootScope","$document","$parse","utils","host",function(l,s,e,c,d){return{templateUrl:"views/templates/veccomponentinput.html",restrict:"E",replace:!0,require:"ngModel",scope:{model:"=ngModel",vciMode:"=",vciCount:"@",vciOptions:"=",vciOwner:"=",vciSliderOptions:"="},link:function(i,e,t,n){function o(e){if(angular.isString(e)){var t=e.split(" "),a={};return a.x=parseFloat(0<t.length&&t[0])||0,a.y=parseFloat(1<t.length&&t[1])||0,a.z=parseFloat(2<t.length&&t[2])||0,a.w=parseFloat(3<t.length&&t[3])||0,a}}angular.isUndefined(i.vciCount)&&(i.vciCount="3"),i.settings={},i.value={x:0,y:0,z:0,w:0},n.$render=function(){var e=n.$modelValue;if(angular.isString(e)){var t=o(e);"angle"===i.vciMode&&(t.x=c.toDegrees(t.x),t.y=c.toDegrees(t.y),t.z=c.toDegrees(t.z),t.w=c.toDegrees(t.w)),i.value=t}},n.$render(),i.$watch("model",function(e,t){e!==t&&n.$render()}),i.$watch("value",function(e){if(e=angular.copy(e),!i.settings.linked||e.x===e.y){"angle"===i.vciMode&&(e.x=c.toRadians(e.x),e.y=c.toRadians(e.y),e.z=c.toRadians(e.z),e.w=c.toRadians(e.w));var t=o(i.model);angular.isUndefinedOrNull(e.x)&&(e.x=t.x),angular.isUndefinedOrNull(e.y)&&(e.y=t.y),angular.isUndefinedOrNull(e.z)&&(e.z=t.z),angular.isUndefinedOrNull(e.w)&&(e.w=t.w);var a="";switch(i.vciCount){case"2":a=(e.x||"0")+" "+(e.y||"0");break;case"3":a=(e.x||"0")+" "+(e.y||"0")+" "+(e.z||"0");break;case"4":a=(e.x||"0")+" "+(e.y||"0")+" "+(e.z||"0")+" "+(e.w||"0")}a!==n.$modelValue&&n.$setViewValue(a)}},!0),i.$watch("vciOptions",function(e){i.settings.linked=angular.isObject(e)&&"linkedslider"===e.mode,i.usePositionListener=e&&"position"===e.mode}),i.toggleLinked=function(){i.settings.linked=!i.settings.linked,i.settings.linked&&(i.value.y=i.value.x)},i.sendAssetPropertyChangeSliderStart=function(){i.vciSliderOptions&&angular.isFunction(i.vciSliderOptions.onStart)&&i.vciSliderOptions.onStart(i.vciSliderOptions.id)},i.sendAssetPropertyChangeSliderEnd=function(){i.vciSliderOptions&&angular.isFunction(i.vciSliderOptions.onEnd)&&i.vciSliderOptions.onEnd(i.vciSliderOptions.id)};var a,r=!(i.sendAssetPropertyChangeSliderChange=function(e,t){if(i.settings.linked)switch(e){case"x":i.value.y=t;break;case"y":i.value.x=t}});i.$on("$destroy",function(){r&&i.cancelPickPosition(),a&&s.off(a)}),i.cancelPickPosition=function(){d.callEditor("endPickPosition",!1),l.$broadcast("showPreviewCrosshair",!1),r=!1},i.pickPosition=function(){d.callEditor("startPickPosition",i.vciOwner.id,i.vciOptions.key).then(function(e){i.value.x=e.x,i.value.y=e.y,l.$broadcast("showPreviewCrosshair",!1),r=!1}),l.$broadcast("showPreviewCrosshair",!0),r=!0},i.$watch("usePositionListener",function(e){a&&s.off(a),e&&(a="keydown.vec.position.picker."+i.vciOwner.id,s.on(a,function(e){r&&27===e.keyCode&&(i.cancelPickPosition(),i.$apply(),e.stopPropagation(),e.preventDefault())}))})}}}]).directive("radianConverter",["utils",function(n){return{restrict:"A",require:"ngModel",link:function(e,t,a,i){i.$parsers.push(n.toDegrees),i.$formatters.push(n.toRadians)}}}]),angular.module("wallpaperbrowserApp").directive("ngMouseWheel",function(){return{restrict:"A",scope:{ngMouseWheel:"&"},link:function(a,e){e.bind("DOMMouseScroll mousewheel onmousewheel",function(e){var t=Math.max(-1,Math.min(1,e.originalEvent.wheelDelta));0!==t&&(a.$apply(function(){a.ngMouseWheel({delta:t})}),e.returnValue=!1,e.preventDefault&&e.preventDefault())})}}}),angular.module("wallpaperbrowserApp").controller("EditorTemplateWizardModalCtrl",["$uibModalInstance","$timeout","$scope","host","toastr","compiler","utils","projectData",function(e,t,a,i,n,o,r,l){var s,c;function d(){c=s=void 0}a.ok=function(){e.close()},a.replaceTexture=function(t){d(),i.callEditor("replaceTexture",angular.toJson(t.parameters||{})).then(function(e){return s=t,c=e,a.currentTemplateOptionName=t.name,i.callEditor("replaceTextureCopyFiles",e,angular.toJson(t))}).then(function(){a.compileCtrl.start()})},a.setOptionConfigured=function(e){e.configured=!0};var p={onCompileStarted:function(){},onCompileFailed:function(e){n.error(e,"Error"),d(),a.$apply()},onCompileFinished:function(){angular.isObject(s)&&(s.configured=!0,s.last=c),d(),t(function(){a.compileCtrl.cancel(),a.compileCtrl.success=!1},1e3)}};a.$on("$destroy",function(){o.removeListener(p)}),o.addListener(p),a.compileCtrl={},a.selectedOption={value:void 0},a.templateoptions=l.templateoptions,a.colorPickerOptions=r.getColorPickerDefaults(!0),a.generalProperties=l.general&&l.general.properties||{},a.selectedOption.value=l.templateoptions[0]}]),angular.module("wallpaperbrowserApp").directive("compilerProgress",["$timeout","modals","compiler",function(r,l,s){return{templateUrl:"views/templates/compilerprogress.html",scope:{compileCtrl:"="},restrict:"E",link:function(t){var a,i;function n(e,t){if(angular.isUndefined(e))return 0;var a=1/e.total,i=a*e.current;return i+=a*t,i=Math.floor(100*i),Math.min(99,Math.max(1,i))}function o(){angular.isDefined(a)&&(r.cancel(a),a=void 0),i=0}var e={onCompileStarted:function(e){t.compileCtrl.success=!1,t.compileInfo=e,t.compileInfo.progress=n(e,0),o(),function e(){a=r(function(){i+=.02,i=Math.min(.9,i),t.compileInfo.progress=n(t.compileInfo,i),e()},500)}(),t.$apply()},onCompileFailed:function(){t.compileCtrl.active=!1,l.setPreventModalClose(!1),o(),t.$apply()},onCompileFinished:function(){l.setPreventModalClose(!1),o(),t.compileInfo.progress=100,t.compileCtrl.active=!1,t.compileCtrl.success=!0,t.$apply()}};t.compileCtrl={start:function(){t.compileInfo={},t.compileCtrl.active=!0,l.setPreventModalClose(!0)},cancel:function(){t.compileCtrl.active=!1,l.setPreventModalClose(!1),o()}},t.$on("$destroy",function(){s.removeListener(e)}),s.addListener(e)}}}]);var openSteamDownloads=function(){window.ui.shellexecute("steam://url/GameHub/431960\\discussions\\2\\2860219962087485227")};angular.module("wallpaperbrowserApp").directive("radialProgress",["$translate",function(h){return{restrict:"E",scope:{rpPercent:"=",rpLabel:"="},link:function(e,t){t.addClass("radialProgressContainer");var a={size:Math.max(5,t.innerWidth()),lineWidth:5,rotate:0},i=document.createElement("canvas"),n=angular.element(document.createElement("div")),o=angular.element(document.createElement("div")),r=angular.element(document.createElement("div")),l=angular.element(document.createElement("div"));n.addClass("steamHeader"),o.addClass("percent"),r.addClass("bytes"),l.addClass("bytes"),n.click(openSteamDownloads);var s=angular.element(document.createElement("div"));s.addClass("steamDownloadLink");var c=angular.element(document.createElement("a"));c.addClass("fas fa-question"),c.click(openSteamDownloads),s.append(c);var d=i.getContext("2d"),p=0;function u(){i.width=i.height=a.size,d.resetTransform(),d.translate(a.size/2,a.size/2),d.rotate((a.rotate/180-.5)*Math.PI),p=(a.size-a.lineWidth)/2}t.append(angular.element(document.createElement("div")).addClass("padTop")),t.append(n),t.append(o),t.append(r),t.append(l),t.append(s),t.append(i),l.hide(),h("ui_browse_download_header").then(function(e){n.text(e)}),h("ui_browse_download_waiting").then(function(e){l.text(e)});var g=function(e,t,a){a=Math.min(Math.max(0,a||1),1),d.beginPath(),d.arc(0,0,p,0,2*Math.PI*a,!1),d.strokeStyle=e,d.lineCap="round",d.lineWidth=t,d.stroke()},f=t.css("color"),m=t.css("border-color");function v(e){(p<=0||!m||!f)&&(a.size=Math.max(5,t.innerWidth()),t.addClass("radialProgressContainer"),f=t.css("color"),m=t.css("border-color"),u()),p<=0||(100<=e?(n.hide(),r.hide(),l.show()):(n.show(),r.show(),l.hide()),o.text(Math.floor(e)+"%"),d.save(),d.resetTransform(),d.clearRect(0,0,a.size,a.size),d.restore(),g(m,a.lineWidth,1),0<e&&g(f,a.lineWidth,e/100))}e.$watch("rpPercent",function(e){v(e)}),e.$watch("rpLabel",function(e){r.text(e)}),e.$on("onWallpaperThumbnailResized",function(){a.size=Math.max(5,t.innerWidth()),u(),v(e.rpPercent)}),u()}}}]),angular.module("wallpaperbrowserApp").directive("helpOverlay",["$document","$rootScope","$http","$timeout","help","skin","utils",function(l,s,c,d,p,u,g){return{templateUrl:"views/templates/helpoverlay.html",restrict:"E",link:function(i){var n,a,e;function o(e){i.helpItemsFull=n[e]||[];var t=p.getMainContext();if("editor"===e&&angular.isObject(t)){var a=t.project&&t.project.data&&t.project.data.type;angular.isString(a)&&0<a.length&&("scene"===a&&(a=t.project.scene.is2d?"scene2d":"scene3d"),i.helpItemsFull=(n[e+".type."+a]||[]).concat(i.helpItemsFull))}i.helpItemsFiltered=[],d(function(){i.helpItemsFiltered=i.helpItemsFull})}function t(){i.helpVisible&&s.$broadcast("previewtoggle",-1),i.helpVisible=!1}function r(){i.helpVisible?t():function(){i.helpVisible||s.$broadcast("previewtoggle",1),i.helpVisible=!0,i.filter="",angular.isObject(e)&&(d.cancel(e),e=void 0);var t=p.getHelpRoute();angular.isObject(n)?o(t):(angular.isObject(a)||(a=c.get("json/help.json")),a.success(function(e){a=void 0,n=angular.fromJson(e),o(t)}))}()}i.onItemSelected=function(e){if(angular.isString(e.id)){var t="steam://url/CommunityFilePage/"+e.id;window.ui.shellexecute(t)}},i.$on("onHelpToggled",function(e,t){(angular.isUndefined(t)||t.showonly&&!i.helpVisible)&&r()}),i.$on("$destroy",function(){l.off("keydown.wpe.help.toggle")}),i.$watch("filter",function(a){angular.isObject(e)&&(d.cancel(e),e=void 0),e=d(function(){if(angular.isString(a)&&0<a.length){var t=[];angular.forEach(i.helpItemsFull,function(e){(function(e,t){e=e.toLowerCase().replace(/[\?\.\!]/g,""),t=t.toLowerCase().replace(/[\?\.\!]/g,"");var a=e.split(" "),i=t.split(" ");if(e.includes(t)||t.includes(e))return 0;for(var n=9999,o=0;o<a.length;++o)for(var r=0;r<i.length;++r)n=Math.min(n,g.damerauLevenshteinDistance(a[o],i[r]));return n})(a,e.title)<2&&t.push(e)}),i.helpItemsFiltered=t}else i.helpItemsFiltered=i.helpItemsFull},500)}),i.hideHelp=t,i.helpItems=[],i.tutorialCategories=[{title:"ui_editor_help_tutorial_category_beginner_title",groups:[{isOpen:!0,title:"ui_editor_help_tutorial_group_getting_started",items:[{body:"ui_editor_help_tutorial_item_introduction",id:"768427357"}]},{title:"ui_editor_help_tutorial_group_new_wallpaper",items:[{body:"ui_editor_help_tutorial_item_wallpaper_from_video",id:"768433078",icon:"fas fa-film"},{body:"ui_editor_help_tutorial_item_wallpaper_from_gif",id:"805078680",icon:"glyphicon glyphicon-knight"},{body:"ui_editor_help_tutorial_item_wallpaper_web_based",id:"770801435",icon:"glyphicon glyphicon-globe"},{body:"ui_editor_help_tutorial_item_wallpaper_scene_3d",id:"768436684",icon:"glyphicon glyphicon-knight"},{body:"ui_editor_help_tutorial_item_wallpaper_scene_2d",id:"768442739",icon:"glyphicon glyphicon-knight"}]}]},{title:"ui_editor_help_tutorial_category_advanced_title",groups:[{title:"ui_editor_help_tutorial_group_advanced_general",items:[{body:"ui_editor_help_tutorial_item_project_structure",id:"770802221"}]},{title:"ui_editor_help_tutorial_group_advanced_web",items:[{body:"ui_editor_help_tutorial_item_web_properties",id:"785994149"},{body:"ui_editor_help_tutorial_item_web_audio",id:"786006047"},{body:"ui_editor_help_tutorial_item_web_images",id:"795674740"},{body:"ui_editor_help_tutorial_item_web_fps_limit",id:"786001446"}]},{title:"ui_editor_help_tutorial_group_advanced_scene",items:[{body:"ui_editor_help_tutorial_item_scene_shaders",id:"770803636"}]}]}],t(),l.on("keydown.wpe.help.toggle",function(e){i.helpVisible&&27===e.keyCode?(t(),i.$apply(),e.stopPropagation(),e.preventDefault()):112===e.keyCode&&u.isHelpEnabled()&&(r(),i.$apply(),e.stopPropagation(),e.preventDefault())})}}}]),angular.module("wallpaperbrowserApp").service("help",["$location",function(n){var t,o=[];this.pushModal=function(e){o.push({name:e})},this.popModal=function(){o.splice(o.length-1,1)},this.getHelpRoute=function(){var e=n.path().toString().replace(/[\\/]/,".");0<e.length&&"."===e[0]&&(e=e.substring(1));for(var t=0;t<o.length;++t){var a=o[t];if(e+="."+a.name,angular.isObject(a.scope)){var i=a.scope[a.pageVar];angular.isString(i)&&0<i.length&&(e+="."+i)}}return e},this.getMainContext=function(){return t},this.registerModalPageVar=function(e,t){var a=o[o.length-1];a.scope=e,a.pageVar=t},this.registerMainContext=function(e){t=e}}]),angular.module("wallpaperbrowserApp").controller("WelcomeCtrl",["$scope","$timeout","skin","host","modals","utils",function(a,t,e,i,n,o){var r=!1;a.adjustDWMColorModes=[{label:"ui_settings_adjust_windows_color_disabled",value:"disabled"},{label:"ui_settings_adjust_windows_color_accent",value:"accent"},{label:"ui_settings_adjust_windows_color_everything",value:"everything"}],(window.welcomeCtrl=a).applySettings=function(e){a.generalSettings=e.user,t(function(){r=!0,a.qualityPreset="medium",a.generalSettings.hasshownwelcomedialog=!0})},a.setBuildVersion=function(e){a.buildVersion=e},a.advancePage=function(){a.page++,3<a.page&&(a.page=3,window.welcomeExtensionObject.completedDialog(a.showBrowseWallpapers))},a.toggleAutoStartRegistry=function(t){i.callDeferred("welcomeObject","toggleAutoStartRegistry",!1,t).then(function(e){e&&(a.generalSettings.autostart=t)})},a.toggleAutoStartScheduler=function(t){n.showHighPriorityWarning(t,a.generalSettings).then(function(){i.callDeferred("welcomeObject","toggleAutoStartHighPriority",t,!t).then(function(e){e&&(a.generalSettings.autostartscheduler=t)})})},a.$watch("page",function(e,t){a.lastPage=t}),a.$watch("generalSettings",function(e){var t;r&&(t=e,window.welcomeObject.applyGeneral(angular.toJson(t),!0))},!0),a.$watch("qualityPreset",function(e){angular.isObject(a.generalSettings)&&angular.isString(e)&&angular.merge(a.generalSettings,o.getQualityPreset(e))}),a.$watch("generalSettings.language",function(e,t){angular.isString(e)&&angular.isString(t)&&e!==t&&(o.setLanguage(e),i.callDeferred("welcomeObject","languageChanged",e))}),a.$on("onCppInit",function(){r=!0,a.isWindows10OrGreater=10<=e.getWindowsVersion(),a.availableLanguages=o.getAvailableLanguages()}),a.page=0,a.showBrowseWallpapers=!0,a.generalSettings={}}]),angular.module("wallpaperbrowserApp").controller("OpenFromUrlModalCtrl",["$scope","$uibModalInstance",function(t,a){t.ok=function(){var e=t.url||"";e=e.replace(/["]/g,"'"),a.close(e)},t.cancel=function(){a.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").directive("tooltip",["$timeout","$document","$translate",function(l,s,c){return{restrict:"A",scope:{tooltip:"@",tValues:"=",tAlignRight:"="},link:function(a,e){var i,t;e=angular.element(e);var n={};function o(){if(angular.isDefined(t)&&(l.cancel(t),t=void 0),angular.isDefined(i)){i.removeClass("show");var e=i;l(function(){e.remove()},100),i=void 0}}function r(e){angular.isDefined(i)||(angular.isDefined(t)&&l.cancel(t),t=l(function(){!function(e){i=angular.element(document.createElement("span"));var t=function(e){i.text(e)};c(a.tooltip,a.tValues).then(t).catch(t),i.addClass("uiTooltip"),a.tAlignRight&&i.addClass("alignRight"),i.css({top:e.pageY+25,left:e.pageX}),angular.element(s[0].body).append(i),l(function(){i&&(i.addClass("show"),a.tAlignRight&&i.css({left:e.pageX-i.outerWidth()}))})}(e)},750))}a.$on("$destroy",function(){o(),e.off("mousemove.tooltip"),e.off("mouseleave.tooltip"),e.off("mouseenter.tooltip")}),e.on("mousemove.tooltip",function(e){n.left===e.pageX&&n.top===e.pageY||(n.left=e.pageX,n.top=e.pageY,o(),r(e))}),e.on("mouseleave.tooltip",function(){n={},o()}),e.on("mouseenter.tooltip",function(e){n={},o(),r(e)})}}}]),angular.module("wallpaperbrowserApp").directive("modalmove",["$document",function(l){return{restrict:"A",link:function(e,t){var i=angular.element(t).closest(".modal-dialog");t=angular.element(t).find(".modal-header");var n=!1,o={left:0,top:0},r={};e.$on("$destroy",function(){t.off("mousedown.modalmove"),t.off("mouseup.modalmove"),t.off("mousemove.modalmove")}),t.on("mousedown.modalmove",function(e){n||(n=!0,r.left=e.pageX-o.left,r.top=e.pageY-o.top)}),l.on("mouseup.modalmove",function(){n=!1}),l.on("mousemove.modalmove",function(e){if(n){var t=Math.max(0,Math.min(l.width(),e.pageX)),a=Math.max(0,Math.min(l.height(),e.pageY));o={left:t-r.left,top:a-r.top},i.css(o)}}),i.css({position:"relative"})}}}]),angular.module("wallpaperbrowserApp").controller("SettingsChangelogModalCtrl",["$scope","$uibModalInstance",function(e,t){e.close=function(){t.close()}}]),angular.module("wallpaperbrowserApp").controller("GenericConfirmModalCtrl",["$scope","$uibModalInstance","data",function(e,t,a){e.data=a,e.ok=function(){a.okDisabled||t.close()},e.leftClicked=function(){angular.isFunction(a.leftCallback)?a.leftCallback(a.leftAction):t.close(a.leftAction)},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").controller("EmptyCtrl",["$scope",function(e){switch(Math.floor(4*Math.random())){case 0:e.btnText="I globbed up!";break;case 1:e.btnText="JJ Flip! What the zip?";break;case 2:e.btnText="Don't just lick stuff!";break;case 3:e.btnText="Floop the pig!"}}]),angular.module("wallpaperbrowserApp").controller("BrowseCollectionsModalCtrl",["$scope","$uibModalInstance","data",function(i,n,o){var r=angular.isArray(o.hotkeys);switch(o.collectionItem=o.collectionItem||{},o.collectionItem.name=o.collectionItem.name||"",i.data=o,i.context={hotkey:[]},o.type){case"presets":i.type={labelHeader:o.isSaving?"ui_browse_preset_modal_save_header":"ui_browse_preset_modal_open_header",labelSave:"ui_browse_preset_modal_save_name",labelSaveDescription:"ui_browse_preset_modal_save_description",labelEmpty:"ui_browse_preset_modal_empty"};break;case"playlists":i.type={hotkeyAction:"playlist",labelHeader:o.isSaving?"ui_browse_playlist_modal_save_header":"ui_browse_playlist_modal_open_header",labelSave:"ui_browse_playlist_modal_save_name",labelSaveDescription:"ui_browse_playlist_modal_save_description"};break;case"profiles":i.type={hotkeyAction:"profile",labelHeader:o.isSaving?"ui_browse_profiles_modal_save_header":"ui_browse_profiles_modal_open_header",labelSave:"ui_browse_profiles_modal_save_name",labelSaveDescription:"ui_browse_profiles_modal_save_description"}}function l(t){var a;return t&&t.name&&angular.forEach(i.data.hotkeys,function(e){e.value!==t.name||angular.isString(i.data.location)&&e.location!==i.data.location||e.action!==i.type.hotkeyAction||(a=e)}),a}if(i.ok=function(){if(r&&(o.isSaving&&(i.data.hotkeys.findAndRemove(l(o.collectionItem)),0<i.context.hotkey.length&&i.data.hotkeys.findAndRemove((t=i.context.hotkey,angular.forEach(i.data.hotkeys,function(e){angular.equals(e.keys,t)&&(a=e)}),a))),o.isSaving&&0<i.context.hotkey.length)){var e={action:i.type.hotkeyAction,keys:i.context.hotkey,value:i.data.collectionItem.name};angular.isString(i.data.location)&&(e.location=i.data.location),i.data.hotkeys.push(e)}var t,a;n.close(i.context.currentSelection||i.data.collectionItem)},i.cancel=function(){n.dismiss("cancel")},i.deleteCollectionItem=function(e){r&&i.data.hotkeys.findAndRemove(l(e));var t=o.collections.indexOf(e);o.collections.splice(t,1),i.context.currentSelection=void 0,angular.isFunction(o.onDeleted)&&o.onDeleted(e)},o.isSaving){var e=l(o.collectionItem);i.context.hotkey=e&&e.keys||[]}else i.$watch("context.currentSelection",function(e){var t=l(e);i.context.hotkey=t&&t.keys||[]}),r&&i.$watch("context.hotkey",function(e){if(angular.isObject(i.context.currentSelection)){var t=l(i.context.currentSelection);if(0===e.length&&angular.isDefined(t))i.data.hotkeys.findAndRemove(t);else if(0<e.length&&angular.isUndefined(t)){var a={action:i.type.hotkeyAction,keys:e,value:i.context.currentSelection.name};angular.isString(i.data.location)&&(a.location=i.data.location),i.data.hotkeys.push(a)}}},!0)}]),angular.module("wallpaperbrowserApp").controller("BrowsePlaylistSettingsModalCtrl",["$timeout","$scope","$uibModalInstance","data",function(e,t,a,i){t.orderOptions=[{label:"ui_browse_playlist_modal_settings_order_random",value:"random"},{label:"ui_browse_playlist_modal_settings_order_sorted",value:"sorted"}],t.clockOptions=[{label:"ui_browse_playlist_modal_settings_clock_24",value:"clock24"},{label:"ui_browse_playlist_modal_settings_clock_12",value:"clock12"}],t.timingOptions=[{label:"ui_browse_playlist_modal_settings_timing_on_logon",value:"logon"},{label:"ui_browse_playlist_modal_settings_timing_on_timer",value:"timer"},{label:"ui_browse_playlist_modal_settings_timing_daytime",value:"daytime"},{label:"ui_browse_playlist_modal_settings_timing_never",value:"never"}],t.settings=i.settings,t.settings.delay=t.settings.delay||60,t.tempSettings={timerhours:Math.floor(t.settings.delay/60),timerminutes:t.settings.delay%60},t.ok=function(){a.close(i.settings)},t.cancel=function(){a.dismiss("cancel")},e(function(){t.$broadcast("rzSliderForceRender")},250),t.$watch("tempSettings",function(e){t.settings.delay=60*e.timerhours+e.timerminutes},!0)}]),angular.module("wallpaperbrowserApp").controller("EditorEffectListModalCtrl",["$scope","$uibModalInstance","$timeout","utils","host","data",function(a,e,t,i,n,o){a.groupList=[{group:"preset",name:"ui_editor_effects_modal_group_presets",visible:!1,open:!0,items:[]},{group:"renderable",name:"ui_editor_effects_modal_group_renderables",visible:!1,open:!0,items:[]},{group:"animate",name:"ui_editor_effects_modal_group_animate",visible:!1,open:!0,items:[]},{group:"blur",name:"ui_editor_effects_modal_group_blur",visible:!1,open:!0,items:[]},{group:"colorize",name:"ui_editor_effects_modal_group_colorize",visible:!1,open:!0,items:[]},{group:"distort",name:"ui_editor_effects_modal_group_distort",visible:!1,open:!0,items:[]},{group:"enhance",name:"ui_editor_effects_modal_group_enhance",visible:!1,open:!0,items:[]}],a.selected={},angular.forEach(o.groupList,function(t){angular.forEach(a.groupList,function(e){e.group===t.group&&(e.items.push(t),e.visible=!0)})}),a.title=a.groupList[0].visible?"ui_editor_effects_modal_title_add_renderable":"ui_editor_effects_modal_title_add_effect",a.colorPickerOptions=i.getColorPickerDefaults(),0<a.groupList.length&&(a.selected.group=a.groupList[0]),a.close=function(){e.dismiss("cancel")},a.ok=function(){e.close(a.selected.item)},a.$watch("selected.item",function(e,t){angular.isObject(e)&&e!==t&&(e.preview?n.callEditor("startEffectPreview",e.path,e.preview):e.variants&&e.options&&e.options.droplistOptions&&(e.options.droplistSelected=e.options.droplistOptions[0].value,n.callEditor("startEffectPreview",e.path,e.variants[e.options.droplistSelected].preview)))}),a.$watch("selected.item.options.droplistSelected",function(e,t){angular.isObject(a.selected.item)&&angular.isArray(a.selected.item.variants)&&angular.isObject(a.selected.item.variants[e])&&angular.isString(a.selected.item.variants[e].preview)&&e!==t&&n.callEditor("startEffectPreview",a.selected.item.path,a.selected.item.variants[e].preview)}),a.$on("$destroy",function(){n.callEditor("stopEffectPreview")})}]),angular.module("wallpaperbrowserApp").directive("nativeDropTarget",["utils","dragdrop",function(p,e){return{restrict:"A",scope:{nativeDropTarget:"&",ndtExtensionTag:"=",ndtInternalFunction:"&",ndtInternalCondition:"=",ndtDesiredModalDepth:"=",ndtEnabled:"="},link:function(n,o){var r,a,l=!0,i=n.ndtDesiredModalDepth||0;function s(e){if(!angular.isDefined(r)){var t=e||angular.element("#nativeDropLayer");(r=angular.element(document.createElement("div"))).addClass("nativeDropHoverIndicator"),t.append(r);var a=angular.element(o),i=a.offset();i.left-=5,i.top-=5,r.offset(i),r.width(a.outerWidth()),r.height(a.outerHeight())}}function c(){angular.isUndefined(r)||(r.remove(),r=void 0)}function d(e){if(angular.isUndefined(r))a=!1;else{var t=r.offset();(a=!(e.x<t.left||e.x>t.left+r.outerWidth()||e.y<t.top||e.y>t.top+r.outerHeight()))?r.addClass("over"):r.removeClass("over")}}angular.isFunction(n.ndtInternalFunction)&&angular.isFunction(n.ndtInternalCondition)&&(e.registerContainer(o,{condition:n.ndtInternalCondition,onMouseEnter:function(){angular.isDefined(r)&&r.addClass("over")},onMouseLeave:function(){angular.isDefined(r)&&r.removeClass("over")},onMouseMove:function(){},onElementDropped:function(e,t){n.ndtInternalFunction({data:t})}},"renderable"),n.$on("onInternalDropStart",function(e,t){console.log("onInternalDropStart",t),n.ndtInternalCondition(t)&&s(angular.element("body"))}),n.$on("onInternalDropStop",function(){c()})),n.$on("onNativeDropStart",function(e,a){if(l&&(!angular.isDefined(n.ndtEnabled)||n.ndtEnabled)){var t=angular.isString(n.ndtExtensionTag)?[n.ndtExtensionTag]:angular.isArray(n.ndtExtensionTag)?n.ndtExtensionTag:void 0;if(angular.isArray(t)){var i=!1;if(angular.forEach(t,function(t){angular.forEach(a.files,function(e){i=i||p.isExtension(e,t)})}),!i)return}s(),d(a)}}),n.$on("onNativeDropStop",function(){c()}),n.$on("onNativeDropMove",function(e,t){d(t)}),n.$on("onNativeDropDropped",function(e,t){d(t),a&&angular.isFunction(n.nativeDropTarget)&&n.nativeDropTarget({droppedFiles:t.files}),c()}),n.$on("modalVisible",function(e,t){l=t===i}),n.$on("$destroy",function(){e.unregisterContainer(o)})}}}]),angular.module("wallpaperbrowserApp").service("localeLoaderSupport",["$sanitize",function(i){var t={};this.insertTranslations=function(e){e=angular.copy(e),angular.forEach(e,function(a){angular.forEach(angular.copy(a),function(e,t){angular.isString(t)&&0===t.indexOf("ui_")?a[t]=i(a[t]):delete a[t]})}),angular.merge(t,e)},this.getTranslations=function(e){return t[e]}}]).filter("san",["$sanitize",function(t){return function(e){return t(e)}}]),angular.module("wallpaperbrowserApp").service("contextMenu",["$document","$translate","$compile","$timeout",function(e,p,u,g){var r,a=this,l=angular.element(e[0].body),f=angular.element(window),m=[];function v(){angular.forEach(m,function(e){e.$destroy()}),m=[],l.off("mousedown.ctxMenuDown"),l.off("wheel.ctxMenuDown"),r&&(r.remove(),r=void 0)}function s(e,t){var a=f.width(),i=f.height(),n=t.innerWidth(),o=t.innerHeight(),r={left:e.pageX+1,top:e.pageY};r.left+n>a&&(r.left-=n,r.left=Math.max(0,r.left)),r.top+o>i&&(r.top-=r.top+o-i,r.top=Math.max(0,r.top)),t.css(r)}function h(s,e){var c=angular.element(document.createElement("ul")),d=!1;return c.addClass("dropdown-menu ctxMenu"),angular.forEach(e,function(a){var i,n,e;if("slider"===a.type){i=angular.element(document.createElement("li")),n=angular.element(document.createElement("a")),(e=angular.element(document.createElement("span"))).addClass("fas fa-fw ctxMenuIcon"),a.icon&&e.addClass(a.icon),n.addClass("ctxLink"),n.append(e),i.append(n);var t=s.$new();return t.entry=a,t.callbackChange=function(){a.options.onChange(a.options.value)},m.push(t),u('<rzslider rz-slider-model="entry.options.value" rz-slider-options="{ceil:entry.options.max, floor:entry.options.min, enforceStep:false, onChange:callbackChange}"></rzslider>')(t,function(e){e.addClass("ctxSlider"),n.append(e)}),void c.append(i)}if("divider"===a.type){var o=angular.element(document.createElement("li"));return o.addClass("divider"),void c.append(o)}i=angular.element(document.createElement("li")),n=angular.element(document.createElement("a")),e=angular.element(document.createElement("span"));var r=angular.element(document.createElement("span"));if(a.icon&&e.addClass(a.icon),e.addClass("fa-fw ctxMenuIcon"),n.addClass("ctxLink"),n.addClass(a.class),n.append(e),r.addClass("ctxLabel"),r.text(p.instant(a.label)),a.labelElement=r,n.append(r),angular.isFunction(a.callback)&&n.click(function(){a.callback(a.callbackData),v(),window.safeApply(s)}),i.append(n),angular.isArray(a.nested)){d=!0;var l=angular.element(document.createElement("span"));l.addClass("fas fa-fw fa-chevron-right ctxChevron"),n.append(l),n.hover(function(){var e=h(s,a.nested),t=angular.element(document.createElement("div"));t.addClass("ctxMenuWrapper"),t.append(e),n.append(t),n.nestedMenu=t,g(function(){t&&(t.addClass("open"),function(e,t){var a=t.offset(),i=t.position(),n=a.left;i.left+=t.width(),a.left+=t.width();var o=f.width(),r=f.height(),l=e.innerWidth(),s=e.innerHeight();a.left+l>o&&(i.left-=l+t.width(),i.left=Math.max(-n,i.left)),a.top+s>r&&(i.top-=a.top+s-r,i.top=Math.max(20-a.top+t.position().top,i.top),r-20<s&&(e.addClass("ctxMenuOverflow"),i.height=r-20)),e.css(i)}(e,i))})},function(){n.nestedMenu&&(n.nestedMenu.remove(),n.nestedMenu=void 0)})}c.append(i)}),d&&c.addClass("ctxMenuExtensible"),c}this.open=function(e,t,a){function i(e){r&&r[0].contains(e.target)||v()}v(),l.on("mousedown.ctxMenuDown",i),l.on("wheel.ctxMenuDown",i);var n=angular.element(document.createElement("div"));n.addClass("ctxMenuWrapper");var o=h(e,a);s(t,o),n.append(o),r=n,l.append(r),g(function(){r&&(r.addClass("open"),s(t,o))})},this.builder=function(){var o=[];return{open:function(e,t){a.open(e,t,o)},getElements:function(){return o},button:function(e,t,a,i,n){return angular.isString(t)?o.push({label:e,icon:t,callback:a,callbackData:i,class:n}):angular.isFunction(t)&&o.push({label:e,callback:t}),this},slider:function(e,t){return o.push({icon:e,type:"slider",options:t}),this},divider:function(){return o.push({type:"divider"}),this},subMenu:function(e,t,a){return o.push({label:e,icon:t,nested:angular.isObject(t)?t.getElements():a.getElements()}),this},empty:function(){return 0===o.length},id:function(e){o.last().id=e},updateLabel:function(t,a){angular.forEach(o,function(e){e.id===t&&(e.label=a,e.labelElement&&e.labelElement.text(a))})}}}}]),angular.module("wallpaperbrowserApp").controller("EditorParticleEditorModalCtrl",["$scope","$q","$uibModalInstance","$translate","$timeout","modals","host","utils","data",function(o,r,e,a,t,l,s,i,n){var c;function d(){angular.isDefined(c)&&(t.cancel(c),c=void 0)}function p(){s.callEditor("getParticleStats",o.currentParticle.id).then(function(e){o.particleStats=e}),d(),c=t(p,1e3)}function u(t){o.selected={},d(),s.callEditor("loadParticleInEditor",t).then(function(e){o.elementGroups=e.elementGroups,o.objectProperties=e.properties,o.currentParticle={id:e.id,path:t},o.selected={item:o.elementGroups[0].items[0]},p()})}function g(){angular.isObject(o.currentParticle)&&s.callEditor("saveParticle",o.currentParticle.id,o.currentParticle.path)}(window.particleEditorCtrl=o).data=n,o.elementGroups={},o.selected={},o.propertyControl={sendAssetPropertyChange:function(e,t,a){return n.editor.sendAssetPropertyChange(e,t,a,"particle")},navigateProperty:function(e,t){o.selected.item=o.objectProperties[e][t]},importTextureFile:function(e,t,a,i){return n.editor.importTextureFile(e,t,a,i,"particle","particle")},openMaterialBrowser:function(e){n.editor.openMaterialBrowser(e,"particle",["particle","util"])},resetTextureFile:function(e,t){return n.editor.resetTextureFile(e,t,"particle")}},o.replaceAssets=function(e){o.elementGroups=e.elementGroups,o.objectProperties=e.properties,o.selected={item:o.elementGroups[0].items[0]}},o.ok=function(){g(),e.close(o.data.particle)},o.cancel=function(){g(),e.close()},o.deleteParticle=function(t){a("ui_editor_particle_delete_particle_body",{particle:t}).then(function(e){return l.open("genericConfirm",{data:{title:"ui_editor_particle_delete_particle_header",message:e,leftIcon:"images/warning.png",cancelVisible:!0,okVisible:!0}})}).then(function(){s.callEditor("deleteParticle",t).then(function(){angular.isObject(o.currentParticle)&&o.currentParticle.path===t&&(o.currentParticle=void 0),o.data.existingParticles.findAndRemove(function(e){return e.value===t}),0<o.data.existingParticles.length?o.data.particle=o.data.existingParticles[0].value:delete o.data.particle})})},o.duplicateParticle=function(e){var t={title:"ui_editor_particle_duplicate_particle_header",message:"ui_editor_particle_duplicate_particle_body",cancelVisible:!0,okVisible:!0,textinputVisible:!0,textinput:i.incrementNameIndex("new_particle_system",o.data.existingParticles.map(function(e){return e.value}))};l.open("genericConfirm",{data:t}).then(function(){return g(),s.callEditor("createParticle",{name:t.textinput,source:e}).then(function(e){o.data.existingParticles.push({value:e.file,label:e.name}),o.data.particle=e.file})})},o.newParticle=function(){var e={title:"ui_editor_particle_new_particle_header",message:"ui_editor_particle_new_particle_body",cancelVisible:!0,okVisible:!0,textinputVisible:!0,textinput:"new particle system",droplistVisible:!0,droplistOptions:n.editor.particleDefaultPresets,droplistSelected:n.editor.particleDefaultPresets[0].value};l.open("genericConfirm",{data:e}).then(function(){return s.callEditor("createParticle",{name:e.textinput,source:e.droplistSelected}).then(function(e){o.data.existingParticles.push({value:e.file,label:e.name}),o.data.particle=e.file})})},o.addElement=function(t,a){var e,i={title:"ui_editor_particle_add_element_"+a+"_header",message:"ui_editor_particle_add_element_"+a+"_body",cancelVisible:!0,okVisible:!0,selectionVisible:!0};if("children"===a){var n=angular.copy(o.data.existingParticles);n.findAndRemove(function(e){return e.value===o.data.particle}),e=r.when(n)}else e=s.callEditor("getAvailableParticleElements",a);e.then(function(e){return i.selectionItems=e,i.selectedItem=e[0],l.open("genericConfirm",{data:i})}).then(function(){var e=i.selectedItem.value;return s.callEditor("addParticleElement",o.currentParticle.id,a,e)}).then(function(e){t.items=angular.copy(t.items),t.items.push(e),o.selected.item=e})},o.onElementDragged=function(e,t,a){return s.callEditor("orderParticleElements",o.currentParticle.id,a,e,t)},o.onElementRemoved=function(e,t,a){var i=e.indexOf(t);if(!(i<0))return e.splice(i,1),s.callEditor("removeParticleElement",o.currentParticle.id,a,t.id)},angular.isString(o.data.particle)&&u(o.data.particle),o.$watch("data.particle",function(e,t){angular.isString(e)&&e!==t&&(g(),u(e))}),o.$on("$destroy",function(){s.callEditor("stopParticleEditorPreview"),window.particleEditorCtrl=void 0,d()}),o.$on("modal.closing",function(e,t){"escape key press"===t&&(e.preventDefault(),o.cancel())})}]),angular.module("wallpaperbrowserApp").controller("EditorMaterialsModalCtrl",["$scope","$q","$uibModalInstance","$translate","$timeout","modals","utils","host","data",function(a,e,t,i,n,o,r,l,s){var c=[];function d(){c.length=0}function p(t){a.visibleMaterials=[],angular.forEach(a.availableMaterials,function(e){(!t||1<t.length&&r.smartStringCompare(t,e.local))&&a.visibleMaterials.push(e)})}a.data=s,a.selected={item:void 0},a.ok=function(){t.close(a.selected.item.local)},a.cancel=function(){t.dismiss()},a.texturePreviews=r.getTexturePreviews(),l.callEditor("getAvailableTextures",s.subDirectory||"").then(function(e){a.availableMaterials=e,angular.forEach(e,function(e){e.local===s.currentPath&&(a.selected.item=e)}),d(),c=angular.copy(e),function e(){if(0!==c.length){var t=c.shift();return n(function(){l.callEditor("getTexturePreview",{id:t.local,path:t.local,size:128})}).then(e)}}(),p()}),a.$on("$destroy",function(){d()}),a.$watch("textureFilter",function(e,t){angular.isString(e)&&e!==t&&p(e)})}]),angular.module("wallpaperbrowserApp").controller("BrowseSplitMonitorModalCtrl",["$scope","$uibModalInstance","data",function(t,a,e){t.directionOptions=[{label:"ui_browse_monitors_vertical",value:0},{label:"ui_browse_monitors_horizontal",value:1}],t.settings=angular.copy(e),t.settings.config.position*=t.settings.bounds[t.settings.config.direction].max,t.settings.config.position=Math.floor(t.settings.config.position),t.resetPosition=function(){var e=t.settings.bounds[t.settings.config.direction].max;t.settings.config.position=e/2,t.settings.config.position=Math.floor(t.settings.config.position)},t.ok=function(){var e=t.settings.bounds[t.settings.config.direction].max;angular.isNumber(t.settings.config.position)||(t.settings.config.position=e/2,t.settings.config.position=Math.floor(t.settings.config.position)),t.settings.config.position=Math.max(1,Math.min(e-1,t.settings.config.position)),t.settings.config.position/=e,a.close(t.settings)},t.cancel=function(){a.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").directive("monitorSelection",["$document",function(o){return{restrict:"E",scope:{msMonitors:"=",msScale:"=",msSplits:"=",msGroups:"=",msLayout:"=",msSelectedMonitor:"=",msSelectionState:"=",msMakeSelection:"&",msOnSplitMoved:"&",msSplitDblClick:"&",msCreateGroup:"&",msMonitorContextMenu:"&",msSplitContextMenu:"&"},link:function(c,a){var l,d=a.parent(),p=[],u=[],e=angular.element(o[0].body),s=[];function g(e,t){u.push({object:e,element:t})}function f(t,e){e.click(function(){c.msSelectionState.createGroup?c.msCreateGroup({monitors:p}):c.msMakeSelection({monitor:t}),window.safeApply(c)}),e.dblclick(function(){c.msSelectionState.createGroup||(c.msMakeSelection({monitor:t,toggleMonitorSelection:!0}),window.safeApply(c))}),e.contextmenu(function(e){c.msMonitorContextMenu({$event:e,monitor:t}),window.safeApply(c)})}function m(e){var a=angular.element(document.createElement("div")),t=angular.element(document.createElement("div")),i=angular.element(document.createElement("div")),n=angular.element(document.createElement("div"));a.addClass("inner"),t.addClass("cell"),i.addClass("number"),n.addClass("resolution");var o=e.index+1;e.isClone?o="C"+(e.group?e.group.index+1:""):e.isGroup?o="G"+o:e.splitIndex&&(o="S"+e.splitIndex),n.text(Math.round(e.w)+"x"+Math.round(e.h)),i.text(o),t.append(i),a.append(t),a.append(n);var r=e.group&&e.group.wallpaper||e.wallpaper;if(r){var l=c.$watch(function(){return r.preview},function(e){if(e)a.css({"background-image":"url('"+e+"')"});else{var t=angular.element(document.createElement("div"));t.addClass("title"),t.text(r.title),a.append(t)}});s.push(l)}return a}function v(e,t,a){var i=0===e.direction,n=angular.element(document.createElement("div"));if(n.addClass("monitorSplitUnit"),angular.isObject(c.msSplits[t.location])){var o=c.msSplits[t.location];n.addClass("noHover"),n.append(h(o))}else{t.isClone&&0===c.msLayout?f(t.group,n):f(t,n),g(t,n);var r=m(t);n.append(r)}return a?i?n.css({width:(e.w-e.w*e.position)*c.msScale}):n.css({height:(e.h-e.h*e.position)*c.msScale}):i?n.css({width:e.w*e.position*c.msScale}):n.css({height:e.h*e.position*c.msScale}),n}function h(t){var e=angular.element(document.createElement("div")),a=0===t.direction;e.addClass(a?"monitorSplitContainerVertical":"monitorSplitContainerHorizontal"),e.append(v(t,t.left,!1)),e.append(v(t,t.right,!0));var i=angular.element(document.createElement("div"));i.addClass("monitorSplitDrag"),i.addClass(a?"vertical":"horizontal");var n={width:a?4:t.w*c.msScale,height:a?t.h*c.msScale:4,top:a?0:t.h*t.position*c.msScale-2,left:a?t.w*t.position*c.msScale-2:0};i.css(n),e.append(i);var o=a?t.w:t.h,r=c.msSplits[t.location+"/R"];return angular.isObject(r)&&r.direction===t.direction&&(o*=t.position+(1-t.position)*r.position),i.on("mousedown",function(e){l||(l={split:t,element:i,isVertical:a,elementCss:n,lastX:e.pageX,lastY:e.pageY,max:o*c.msScale-5})}),i.dblclick(function(){c.msSplitDblClick({location:t.location}),window.safeApply(c)}),i.contextmenu(function(e){c.msSplitContextMenu({$event:e,location:t.location}),window.safeApply(c)}),e}function i(e,t){t=t||e;var a,i,n=c.msScale,o=angular.element(document.createElement("div"));return o.addClass("monitorSelectionMonitor"),o.css({left:t.x*n,top:t.y*n,width:t.w*n,height:t.h*n}),angular.isObject(c.msSplits)&&angular.isDefined(c.msSplits[e.location])?(o.addClass("noHover"),o.append(h(c.msSplits[e.location]))):o.append((a=e,(i=angular.element(document.createElement("div"))).addClass("monitorRoot"),a.isClone&&0===c.msLayout?f(a.group,i):f(a,i),i.append(m(a)),i)),g(e,o),o}function n(){angular.forEach(u,function(e){e.object===c.msSelectedMonitor||e.object.group===c.msSelectedMonitor?e.element.addClass("active"):e.element.removeClass("active")})}function b(e){return{leftMin:e.x,leftMax:e.x+e.w,topMin:e.y,topMax:e.y+e.h}}function _(e,t){return{leftMin:Math.min(e.leftMin,t.leftMin),leftMax:Math.max(e.leftMax,t.leftMax),topMin:Math.min(e.topMin,t.topMin),topMax:Math.max(e.topMax,t.topMax)}}function t(){if(u=[],angular.forEach(s,function(e){e()}),l=void 0,a.empty(),1===c.msLayout){if(c.msMonitors&&0<c.msMonitors.length){var t=b(c.msMonitors[0]);angular.forEach(c.msMonitors,function(e){t=_(t,b(e))}),t.x=t.leftMin,t.w=t.leftMax-t.leftMin,t.y=t.topMin,t.h=t.topMax-t.topMin;var e=i(c.msMonitors[0],t);a.append(e)}}else 2===c.msLayout?angular.forEach(c.msMonitors,function(e){var t=i(e);a.append(t)}):(angular.forEach(c.msMonitors,function(e){if(!e.isInGroup||1!==e.group.layout){var t=i(e);a.append(t)}}),angular.forEach(c.msGroups,function(e){if(1===e.layout){var t=i(e);a.append(t)}}));n()}function w(o){var r;return angular.forEach(u,function(e){var t=e.object;if(2===c.msSelectionState.createGroup){if(angular.isObject(c.msSplits[t.location]))return}else if(t.isSplit||t.isInGroup)return;var a,i,n=b(t);a=n,(i=o).left>=a.leftMin&&i.left<a.leftMax&&i.top>=a.topMin&&i.top<=a.topMax&&(r=t)}),r}e.on("mousemove.splitdrag",function(e){if(l){var t={};l.isVertical?(l.elementCss.left+=e.pageX-l.lastX,l.lastX=e.pageX,t.left=l.elementCss.left,t.left=Math.max(1,Math.min(l.max,t.left))):(l.elementCss.top+=e.pageY-l.lastY,l.lastY=e.pageY,t.top=l.elementCss.top,t.top=Math.max(1,Math.min(l.max,t.top))),l.element.css(t)}}),e.on("mouseup.splitdrag",function(){if(l){var e=l.element.position();e=Math.round(((l.isVertical?e.left:e.top)+2)/c.msScale),(e/=l.isVertical?l.split.w:l.split.h)!==l.split.position&&(c.msOnSplitMoved({location:l.split.location,position:e}),window.safeApply(c))}l=void 0}),e.on("mousemove.monitorCreateGroup",function(e){if(0!==c.msSelectionState.createGroup){p=[];var t={top:e.pageY,left:e.pageX},a=d.offset();t.left-=a.left,t.top-=a.top,t.left/=c.msScale,t.top/=c.msScale,angular.forEach(u,function(e){e.element.removeClass("groupHover")});var i=w(t);if(angular.isObject(i)&&i!==c.msSelectedMonitor){var n,o,r;if(1===c.msSelectionState.createGroup){var l=b(c.msSelectedMonitor),s=b(i);s=_(l,s),o=s,r=[],angular.forEach(u,function(e){if(!e.object.isSplit&&!e.object.isInGroup){var t,a,i=b(e.object);a=i,(t=o).leftMin<a.leftMax&&t.leftMax>a.leftMin&&t.topMin<a.topMax&&t.topMax>a.topMin&&r.push(e)}}),n=r}else n=[],angular.forEach(u,function(e){e.object!==i&&e.object!==c.msSelectedMonitor||n.push(e)}),c.msSelectedMonitor.isGroup&&n.push(c.msSelectedMonitor);angular.forEach(n,function(e){e.isGroup?p.push(e):(e.element.addClass("groupHover"),p.push(e.object))})}}}),c.$watch("msMonitors",t,!0),c.$watch("msScale",t,!0),c.$watch("msSplits",t,!0),c.$watch("msGroups",t,!0),c.$watch("msLayout",t,!0),c.$watch("msSelectedMonitor",n),c.$on("$destroy",function(){e.off("mousemove.splitdrag"),e.off("mouseup.splitdrag"),e.off("mousemove.monitorCreateGroup")})}}}]),angular.module("wallpaperbrowserApp").controller("BrowseWallpaperWorkshopInfoModalCtrl",["$scope","$uibModalInstance","$rootScope","modals","utils","data",function(e,t,a,i,n,o){function r(){angular.forEach(o.genreList,function(t){n.translateTag(t.value).then(function(e){t.label=e})})}e.data=o,e.genreList=o.genreList,e.genres=o.filterPreset,e.ok=function(){t.close(e.genres)},e.cancel=function(){t.dismiss("cancel")},e.hasGenresSelected=function(){var t=0;return angular.forEach(e.genres,function(e){e&&++t}),0<t},o.canCancel||i.setPreventModalClose(!0),e.$on("$destroy",function(){i.setPreventModalClose(!1)}),r(),a.$on("$translateChangeEnd",r)}]),angular.module("wallpaperbrowserApp").controller("BrowseWallpaperSharePresetModalCtrl",["$scope","$uibModalInstance","data",function(i,e,t){i.data={preset:angular.toJson(t.preset,!0)},i.ok=function(){e.close(angular.fromJson(i.data.preset))},i.cancel=function(){e.dismiss("cancel")},i.$watch("data.preset",function(e){var t;try{angular.isString(e)&&0<e.length&&(t=atob(e),angular.isString(t)&&0<t.length&&(e=t,i.data.preset=e))}catch(e){}var a={exception:""};i.isJsonValid=JSON.validate(e,a),i.jsonError=a.exception}),i.copyPreset=function(){var e=angular.element("#jsonTextArea"),t=angular.element("#jsonTextAreaTmp"),a=e.val();t.val(btoa(a)),t.select(),document.execCommand("Copy")},i.pastePreset=function(){angular.element("#jsonTextArea").val("").select(),document.execCommand("Paste")}}]),angular.module("wallpaperbrowserApp").controller("BrowseReportModalCtrl",["$scope","$translate","$http","$httpParamSerializer","$uibModalInstance","host","data","utils",function(i,n,a,o,r,l,s,c){i.categories=[{label:"ui_browse_report_modal_category_other",value:"other"},{label:"ui_browse_report_modal_category_genre",value:"genre"},{label:"ui_browse_report_modal_category_rating",value:"rating"},{label:"ui_browse_report_modal_category_copyright",value:"copyright"},{label:"ui_browse_report_modal_category_spam",value:"spam"}],i.descriptions={other:"ui_browse_report_modal_category_other_description",genre:"ui_browse_report_modal_category_genre_description",rating:"ui_browse_report_modal_category_rating_description",copyright:"ui_browse_report_modal_category_copyright_description",spam:"ui_browse_report_modal_category_spam_description"};var d={status:"initial"},e=c.getAvailableTags();i.genres=e.map(function(e){return{label:e,value:e}}),angular.forEach(i.genres,function(t){c.translateTag(t.value).then(function(e){t.label=e})}),i.ratings=[{value:"Questionable",label:"ui_workshop_tags_rating_questionable"},{value:"Mature",label:"ui_workshop_tags_rating_mature"},{value:"Ban",label:"ui_workshop_tags_rating_ban"}],i.data=s.wallpaper,i.steamAuth=s.steamAuth,i.translatedCurrentTags="",i.translatedCurrentRatingTags="",angular.forEach(s.wallpaper.tags.split(","),function(t){e.includes(t)?(i.genres.findAndRemove(function(e){return e.value===t}),c.translateTag(t).then(function(e){0<i.translatedCurrentTags.length&&(i.translatedCurrentTags+=", "),i.translatedCurrentTags+=e})):"Everyone"!==t&&"Questionable"!==t&&"Mature"!==t||c.translateRatingTag(t).then(function(e){0<i.translatedCurrentRatingTags.length&&(i.translatedCurrentRatingTags+=", "),i.translatedCurrentRatingTags+=e})}),i.context={category:i.categories[0].value,workshopid:i.data.workshopid,creatorid:i.data.authorsteamid,suggestedgenre:"",suggestedrating:""},i.ok=function(){var e=angular.copy(i.context);"rating"===e.category&&"Ban"===e.suggestedrating&&(e.category="violation",e.suggestedrating="");var t=o({steamauthticket:s.steamAuth.ticket});i.reportInProgress=!0,a.post(s.backendUrl+"/api/reports/v1?"+t,e).then(function(e){i.reportInProgress=!1,e&&e.error?n("ui_browse_report_modal_error").then(function(e){c.showError(e.toString())}):(r.close(),n("ui_browse_report_modal_success").then(function(e){c.showSuccess(e.toString())}))}).catch(function(a){if(401===(a&&a.status)&&"initial"===d.status)d.status="token",i.steamAuth.ticket="",l.callDeferred("browseWallpaperObject","refreshAuthToken");else{i.reportInProgress=!1;var e=401===(a&&a.status)?"ui_browse_report_modal_error_401":"ui_browse_report_modal_error";n(e).then(function(e){var t=a&&a.status&&" (HTTP "+a.status+")";c.showError(e.toString()+t)})}})},i.cancel=function(){r.dismiss("cancel")},i.isReportDisabled=function(){return"genre"===i.context.category&&i.context.suggestedgenre.length<1||("rating"===i.context.category&&i.context.suggestedrating.length<1||"copyright"===i.context.category)},i.$watch("context.category",function(){i.context.suggestedgenre="",i.context.suggestedrating=""}),i.$watch("steamAuth.ticket",function(e){angular.isString(e)&&0<e.length&&"token"===d.status&&(d.status="done",i.ok())})}]),angular.module("wallpaperbrowserApp").controller("EditorRatingModalCtrl",["$scope","$translate","$uibModalInstance","data",function(e,t,a,i){e.data=i,e.highlight={rating:""},e.ok=function(e){i.contentrating=e,a.close()},e.cancel=function(){a.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").controller("AgeGateModalCtrl",["$scope","$uibModalInstance",function(i,e){var n=new Date;i.okDisabled=!0,i.date={day:n.getDate(),month:n.getMonth(),year:n.getFullYear()},i.ok=function(){i.okDisabled||e.close()},i.cancel=function(){e.dismiss("cancel")},i.$watchGroup(["date.month","date.year"],function(){var e;i.days=[];var t=i.date.month;if(1===t)if(i.date.year%4==0)for(e=1;e<=29;++e)i.days.push({value:e,label:""+e});else for(e=1;e<=28;++e)i.days.push({value:e,label:""+e});else if(8===t||3===t||5===t||10===t)for(e=1;e<=30;++e)i.days.push({value:e,label:""+e});else for(e=1;e<=31;++e)i.days.push({value:e,label:""+e})}),i.$watch("date",function(e){var t=new Date(e.year,e.month,e.day,0,0,0,0),a=new Date(n.getFullYear()-18,n.getMonth(),n.getDate(),0,0,0,0);i.okDisabled=a<t},!0),function(){i.years=[];for(var e=0;e<100;++e)i.years.push({value:n.getFullYear()-e,label:""+(n.getFullYear()-e)})}(),function(){i.months=[];for(var e=0;e<12;++e)i.months.push({value:e,label:""+(e+1)})}()}]),angular.module("wallpaperbrowserApp").controller("BrowseExploreCreateQueryModalCtrl",["$scope","$uibModalInstance","data",function(t,e,a){t.data=a,t.categoryOptions=[{label:"ui_browse_explore_create_query_modal_keyword",value:"keyword"},{label:"ui_browse_explore_create_query_modal_creator",value:"creator"},{label:"ui_browse_explore_create_query_modal_collection",value:"collection"}],t.ok=function(){e.close(a.query)},t.cancel=function(){e.dismiss("cancel")},t.validateQuery=function(){switch(t.data.query.category){case"keyword":return angular.isString(t.data.query.keyword);case"creator":case"collection":return/^\d+$/.test(t.data.query.itemid)}return!1},t.$watch("data.query.category",function(e){switch(e){case"keyword":t.queryTypeOptions=[{label:"ui_browse_query_sort_by_trend_year",value:"trend_year"},{label:"ui_browse_query_sort_by_trend_last_week",value:"trend_week"},{label:"ui_browse_query_sort_by_date",value:"most_recent"},{label:"ui_browse_query_sort_most_subscriptions",value:"subscriptions"}],t.data.query.querytype=t.queryTypeOptions[0].value;break;case"creator":t.queryTypeOptions=[{label:"ui_browse_query_sort_by_votes",value:"published_votes"},{label:"ui_browse_query_sort_by_date",value:"published_desc"}],t.data.query.querytype=t.queryTypeOptions[0].value}delete t.data.query.keyword,delete t.data.query.itemid})}]),angular.module("wallpaperbrowserApp").directive("allmouse",function(){return{restrict:"A",scope:{allmouse:"&",amContext:"="},link:function(t,e){e.click(function(e){t.allmouse({btn:"left",context:t.amContext,$event:e})}),e.contextmenu(function(e){t.allmouse({btn:"right",context:t.amContext,$event:e})}),e.dblclick(function(e){t.allmouse({btn:"dbl",context:t.amContext,$event:e})}),t.$on("$destroy",function(){e.off("click"),e.off("dblclick"),e.off("contextmenu")})}}}),angular.module("wallpaperbrowserApp").directive("wallpaperThumbnail",["$translate","$document","$timeout","$compile","utils","dragdrop",function(e,y,k,S,x,E){return{restrict:"E",scope:{wtWallpapers:"=",wtWallpaperFlags:"=",wtFolders:"=",wtSelection:"=",wtMultiselection:"=",wtEnabledragdrop:"=",wtTag:"=",wtMousecallback:"&",wtSelectioncallback:"&",wtFlagcallback:"&"},link:function(P,o,M){o=angular.element(o);var i,r=[],n=[],l=[],t=!1;function R(e){e.stopPropagation()}function s(e){i&&(i.removeClass("selected"),i=void 0),e&&(i=e).addClass("selected")}function a(e){P.wtMultiselection&&P.wtMultiselection.includes(e.ctx.wallpaper)?e.addClass("multiselect"):e.removeClass("multiselect")}function c(e){e.ctx.info&&e.ctx.info.checkbox&&(P.wtWallpaperFlags&&P.wtWallpaperFlags[e.ctx.wallpaper.file]?(e.ctx.info.checkboxChecked.show(),e.ctx.info.checkboxNotChecked.hide(),e.ctx.info.checkbox.addClass("visible")):(e.ctx.info.checkboxChecked.hide(),e.ctx.info.checkboxNotChecked.show(),e.ctx.info.checkbox.removeClass("visible")))}function D(t){if(t.ctx.title.text(t.ctx.wallpaper.title),t.ctx.info){if(t.ctx.lastStatus!==t.ctx.wallpaper.status){switch(t.removeClass("installed downloadable"),t.ctx.progress&&"downloading"!==t.ctx.wallpaper.status?(t.progressContext.$destroy(),t.ctx.progress.remove(),delete t.progressContext,delete t.ctx.progress,t.ctx.downloadElement.hide()):t.ctx.progress||"downloading"!==t.ctx.wallpaper.status||(t.ctx.downloadElement.show(),t.progressContext=t.ctx.$new(),t.ctx.progress=S('<radial-progress class="inner" rp-percent="wallpaper.downloadpercent" rp-label="wallpaper.downloadlabel"></radial-progress>')(t.progressContext,function(e){t.ctx.downloadElement.append(e)})),"error"===t.ctx.lastStatus?t.show():"error"===t.ctx.wallpaper.status&&t.hide(),t.ctx.wallpaper.status){case"installed":t.addClass("installed");break;case"downloadable":t.addClass("downloadable")}t.ctx.lastStatus=t.ctx.wallpaper.status}t.css({"background-image":(e=t.ctx.wallpaper.previewsmall,e?'url("'+e+'")':"")}),t.ctx.wallpaper===P.wtSelection?s(t):t===i&&s(),t.ctx.wallpaper.approved?t.ctx.info.approved.show():t.ctx.info.approved.hide(),t.ctx.wallpaper.favorite?t.ctx.info.favorite.show():t.ctx.info.favorite.hide(),"installed"===P.wtTag||t.ctx.wallpaper.local||"installed"!==t.ctx.wallpaper.status?t.ctx.info.iconSave.hide():t.ctx.info.iconSave.show(),a(t),c(t,P.wtWallpaperFlags)}var e}function d(e,t){e.ctx.wallpaper=t,D(e)}var W={click:function(e){t||(P.wtMousecallback({btn:"left",context:e.currentTarget.ctx.wallpaper,$event:e}),window.safeApply(P))},dblclick:function(e){P.wtMousecallback({btn:"dbl",context:e.currentTarget.ctx.wallpaper,$event:e}),window.safeApply(P)},contextmenu:function(e){P.wtMousecallback({btn:"right",context:e.currentTarget.ctx.wallpaper,$event:e}),window.safeApply(P)},folderclick:function(e){e.currentTarget.ctx.editTitle.val(e.currentTarget.ctx.wallpaper.title),e.currentTarget.ctx.title.hide(),e.currentTarget.ctx.editTitle.show(),e.stopPropagation(),e.currentTarget.ctx.editTitle.focus()},folderkeyup:function(e){13!==e.which&&27!==e.which||(27===e.which&&e.currentTarget.ctx.editTitle.val(e.currentTarget.ctx.wallpaper.title),e.currentTarget.ctx.editTitle.blur(),window.safeApply(P))},folderblur:function(e){e.currentTarget.ctx.wallpaper.title=e.currentTarget.ctx.editTitle.val(),e.currentTarget.ctx.title.text(e.currentTarget.ctx.wallpaper.title),e.currentTarget.ctx.editTitle.hide(),e.currentTarget.ctx.title.show(),window.safeApply(P)},toggleplaylist:function(e){var t=angular.element(e.currentTarget).closest(".browseWallpaperImage")[0].ctx.wallpaper;P.wtFlagcallback({wallpaper:t}),window.safeApply(P)}};function p(e){var t=P.$new(!0);t.wallpaper=e;var a=angular.element(document.createElement("div"));a[0].ctx=t,a.ctx=t,a.addClass("browseWallpaperImage");var i=angular.element(document.createElement("img"));i.attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAALSURBVAgdY/jPAAACAQEAxV8bXgAAAABJRU5ErkJggg=="),i.addClass("translucentBox"),a.append(i),a.click(W.click),a.dblclick(W.dblclick),a.contextmenu(W.contextmenu);var n,o,r,l,s,c,d,p=angular.element(document.createElement("div")),u=angular.element(document.createElement("div")),g=angular.element(document.createElement("div")),f=angular.element(document.createElement("div"));if("folder"!==e.type){var m=angular.element(document.createElement("div"));(t.downloadElement=m).hide(),a.append(m);var v={},h=angular.element(document.createElement("div")),b=angular.element(document.createElement("span")),_=angular.element(document.createElement("span")),w=angular.element(document.createElement("span"));if(h.addClass("icons"),b.addClass("fas fa-save wallpaperStatusIcon"),_.addClass("fas fa-star wallpaperStatusIcon"),w.addClass("fas fa-trophy browseWallpaperApprovedBright wallpaperStatusIcon"),v.iconSave=b,v.favorite=_,v.approved=w,b.hide(),_.hide(),w.hide(),h.append(w),h.append(_),h.append(b),u.append(h),"wtFlagcallback"in M){var y=angular.element(document.createElement("div")),k=(n=v,o=angular.element(document.createElement("div")),r=angular.element(document.createElement("div")),l=angular.element(document.createElement("span")),s=angular.element(document.createElement("span")),c=angular.element(document.createElement("span")),d=angular.element(document.createElement("span")),o.click(R),o.dblclick(R),c.addClass("fas fa-check-square checkBox"),d.addClass("far fa-square checkBox"),c.hide(),o.addClass("checkBoxBase"),r.addClass("checkBoxOuter"),l.addClass("fas fa-square checkBoxBackground"),s.append(c),s.append(d),r.append(l),r.append(s),o.append(r),n.checkboxChecked=c,n.checkboxNotChecked=d,o);y.addClass("checker"),y.append(k),v.checkbox=y,p.append(y),k.click(W.toggleplaylist)}t.info=v}else{a.addClass("folder");var S,x,E=angular.element(document.createElement("div")),C=angular.element(document.createElement("span")),T=angular.element(document.createElement("span")),I=angular.element(document.createElement("span")),A=angular.element(document.createElement("input")).attr("type","text");e.folderIcon?(S=e.folderIcon.replace("fa ","fas "),x=e.folderIcon.replace("fa ","fas ")):(S="fas fa-folder folderClosed",x="fas fa-folder-open folderOpened"),e.folderColor&&(S+=" "+e.folderColor,x+=" "+e.folderColor),T.addClass(S+" fa-stack-1x"),I.addClass(x+" fa-stack-1x"),E.addClass("folderContainer"),C.addClass("browseFolderStack fa-stack"),A.addClass("folderTitleEdit"),A.hide(),u.addClass("editable"),C.append(T),C.append(I),E.append(C),a.append(E),g.append(A),t.editTitle=A,g[0].ctx=t,A[0].ctx=t,g.click(W.folderclick),A.keyup(W.folderkeyup),A.blur(W.folderblur)}p.addClass("wallpaperInfo"),u.addClass("caption"),t.title=f,g.append(f),u.append(g),p.append(u),a.append(p);var O=angular.element(document.createElement("div"));return O.addClass("selectBorder"),a.append(O),D(a),a}var u,e,g={findElement:function(e){if(1===e.which&&P.wtEnabledragdrop){var t=angular.element(angular.element(e.target).closest(".browseWallpaperImage")[0]),a=t&&t[0]&&t[0].ctx;if(angular.isObject(a)&&angular.isObject(a.wallpaper)&&"downloadable"!==a.wallpaper.status)return{element:t,data:a.wallpaper}}}};function f(){u&&u.element&&u.element.remove(),u=void 0}function m(e){var t=angular.offsetToAncestor(e,o),a={left:Math.min(u.origin.left,t.left),top:Math.min(u.origin.top,t.top),width:Math.abs(u.origin.left-t.left),height:Math.abs(u.origin.top-t.top)};a.top+a.height>o[0].scrollHeight&&(a.height=o[0].scrollHeight-a.top),u.element.css(a)}function v(){e&&(e.cancel(),e=void 0)}E.registerInitiator(g),o.mousedown(function(n){v(),e=E.beginAutoScroll("browseScroll",o),1===n.which&&P.wtEnabledragdrop&&n.target===o[0]&&E.beginDragTest(n,{start:function(e){!function(e,t){f();var a=angular.offsetToAncestor(e,o);(u={origin:a,element:angular.element(document.createElement("div"))}).element.addClass("browseWallpaperSelectionRectangle"),o.append(u.element),m(t)}(n,e)},finish:function(){var a,i,e,t=(a=[],i=x.getElementBounds(u.element),e=function(e){var t=x.getElementBounds(e);x.checkBoundsOverlap(i,t)&&a.push(e)},angular.forEach(l,e),angular.forEach(r,e),a).map(function(e){return e.ctx.wallpaper});P.wtSelectioncallback({items:t,$event:n}),window.safeApply(P),f()},cancel:function(){f()},move:function(e){m(e)}})}),o.contextmenu(function(e){P.wtMousecallback({btn:"right",$event:e}),window.safeApply(P)}),y.mouseup(v);var h=[];if("discover"!==P.wtTag)for(var b=0;b<20;++b){var _=angular.element(document.createElement("div"));_.addClass("browseWallpaperImage pseudo"),h.push(_)}P.$watch("wtWallpapers",function(e){if(!angular.isArray(e))return angular.forEach(r,function(e){e.detach()}),n=r.concat(n),void(r=[]);for(var t=0;t<Math.min(e.length,r.length);++t)d(r[t],e[t]);if(angular.forEach(h,function(e){e.detach()}),0<n.length&&r.length<e.length){var a=Math.min(e.length-r.length,n.length);for(t=0;t<a;++t)d(n[t],e[r.length]),r.push(n[t]),o.append(n[t]);n.splice(0,a)}for(t=r.length;t<e.length;++t){var i=p(e[t]);i.attr("id","wpimg"+t),o.append(i),r.push(i)}if(e.length<r.length){for(t=e.length;t<r.length;++t)n.push(r[t]),r[t].detach();r.splice(e.length,r.length-e.length)}angular.forEach(h,function(e){o.append(e)})}),P.$watch("wtFolders",function(e){if(angular.forEach(l,function(e){e.remove()}),l=[],angular.isArray(e))for(var t=e.length-1;0<=t;--t){var a=p(e[t]);a.attr("id","wpfolder"+t),o.prepend(a),l.push(a)}}),P.$watch("wtWallpaperFlags",function(){angular.forEach(r,c)},!0),P.$watch("wtSelection",function(t){if(!i||i.ctx.wallpaper!==t){var a=!1;angular.forEach(r,function(e){e.ctx.wallpaper===t&&(s(e),a=!0)}),a||s()}}),P.$watch("wtMultiselection",function(){angular.forEach(r,function(e){a(e)}),angular.forEach(l,function(e){a(e)})},!0);var w=new ResizeObserver(function(){P.$broadcast("onWallpaperThumbnailResized")});w.observe(o[0]),w.observe(y[0].body),P.$on("$destroy",function(){E.unregisterInitiator(g),w.disconnect()}),P.$on("onInternalDropStart",function(){k(function(){t=!0})}),P.$on("onInternalDropStop",function(){k(function(){t=!1})})}}}]),angular.module("wallpaperbrowserApp").directive("ratingTable",function(){return{templateUrl:"views/templates/ratingtable.html",restrict:"E",scope:{highlight:"="},link:function(){}}}),angular.module("wallpaperbrowserApp").directive("explorescroll",function(){return{restrict:"A",link:function(e,t){var a=(t=angular.element(t)).children(".browseExploreQueryScroll"),i=t.children(".exploreArrowLeft"),n=t.children(".exploreArrowRight"),o={left:!0,right:!0},r=function(){var e={left:0<a.scrollLeft(),right:Math.floor(a.scrollLeft())<Math.floor(a[0].scrollWidth-a.innerWidth())};e.left!==o.left&&(o.left=e.left,e.left?i.show():i.hide()),e.right!==o.right&&(o.right=e.right,e.right?n.show():n.hide())};a.scroll(r);var l=new ResizeObserver(r);l.observe(a[0]),r(),e.$on("$destroy",function(){l.disconnect()}),i.click(function(){a[0].scroll({left:a.scrollLeft()-.9*a.innerWidth(),behavior:"smooth"})}),n.click(function(){a[0].scroll({left:a.scrollLeft()+.9*a.innerWidth(),behavior:"smooth"})})}}}),angular.module("wallpaperbrowserApp").directive("intersectionhandler",function(){return{restrict:"A",scope:{ishSentinel:"@",ishCallback:"&"},link:function(t,e){var a=(e=angular.element(e)).find(t.ishSentinel),i=new IntersectionObserver(function(e){angular.isArray(e)&&0!==e.length&&(angular.forEach(e,function(e){t.ishCallback({visible:e.isIntersecting})}),window.safeApply(t))},{root:e[0]});i.observe(a[0]),t.$on("$destroy",function(){i.disconnect()})}}}),angular.module("wallpaperbrowserApp").directive("explorequerytitle",["$rootScope","$q","$translate","utils",function(t,a,r,l){return{restrict:"E",templateUrl:"views/templates/explorequerytitle.html",scope:{eqtQuery:"=",eqtUserInfo:"="},link:function(n){function o(e){n.translatedTitle=e.toString()}function e(){var e=a.when(""),i=angular.isArray(n.eqtQuery.tags)&&0<n.eqtQuery.tags.length;i&&(e=l.translateTag(n.eqtQuery.tags[0])),e.then(function(e){var t={genre:e.toString(),user:n.eqtUserInfo[n.eqtQuery.itemid]&&n.eqtUserInfo[n.eqtQuery.itemid].name||r.instant("ui_browse_details_author_pending").toString(),collectiontitle:n.eqtQuery.collection&&n.eqtQuery.collection.title,keyword:n.eqtQuery.keyword};if(i){var a=l.prepareTagForTranslation(n.eqtQuery.tags[0]);r(n.eqtQuery.title+"_"+a).then(o).catch(function(){return r(n.eqtQuery.title,t).then(o)})}else r(n.eqtQuery.title,t).then(o)})}n.translateTag=l.translateTagInstant,n.$watch("eqtQuery",e,!0),n.$watch("eqtUserInfo",e,!0),t.$on("$translateChangeEnd",e)}}}]),angular.module("wallpaperbrowserApp").directive("explorequeryactions",function(){return{restrict:"E",templateUrl:"views/templates/explorequeryactions.html",scope:{eqtQuery:"=",eqtSettings:"=",eqtCallbacks:"="}}}),angular.module("wallpaperbrowserApp").directive("ngVisible",function(){return{restrict:"A",link:function(e,t,a){e.$watch(a.ngVisible,function(e){t.css("visibility",e?"visible":"hidden")})}}}),angular.module("wallpaperbrowserApp").directive("hotkeyinput",["$translate","$q","utils","host","modals",function(l,s,c,d,p){return{restrict:"E",templateUrl:"views/templates/hotkeyinput.html",scope:{hkKeys:"=",hkItem:"=",hkPool:"="},link:function(n,e){var a=angular.element(angular.element(e).find(".hotkeyInput")),o=!1,i={pause:"ui_settings_hotkeys_action_pause",stop:"ui_settings_hotkeys_action_stop",mute:"ui_settings_hotkeys_action_mute",nextwallpaper:"ui_settings_hotkeys_action_next_wallpaper",togglerecord:"ui_settings_hotkeys_action_recording",toggleicons:"ui_settings_hotkeys_action_hide_icons",screenshot:"ui_settings_hotkeys_action_take_screenshot",wallpaper:"ui_settings_hotkeys_action_user_wallpaper",playlist:"ui_settings_hotkeys_action_user_playlist",profile:"ui_settings_hotkeys_action_user_profile",windowbrowser:"ui_settings_hotkeys_action_window_browser",windowsettings:"ui_settings_hotkeys_action_window_settings",windoweditor:"ui_settings_hotkeys_action_window_editor"};function r(e,t){if(n.isInputFocused&&angular.isArray(e)&&0===e.length)return n.hotkeyLabel=l.instant("ui_settings_hotkeys_prompt_enter_combination").toString(),n.displayFaintText=!0,void(n.showCombinationError=t&&o);n.displayFaintText=!1,d.getVirtualKeyNames().then(function(t){var a="",i=!1;angular.forEach(e,function(e){angular.isString(t[e])&&(o=!0,n.showCombinationError=!1,i&&(a+=" + "),i=!0,a+=t[e])}),n.hotkeyLabel=a})}function t(t){r(t.keys,!0),(t.cancel||t.finished)&&(p.setPreventModalClose(!1),a.blur(),t.finished&&(n.showCombinationError=!1,function(t){var a;angular.forEach(n.hkPool,function(e){e&&e.keys===t||e&&angular.equals(e.keys,t)&&(a=e)});var e=a&&angular.isObject(n.hkItem)&&n.hkItem.action===a.action&&(!angular.isString(n.hkItem.value)||n.hkItem.value===a.value)&&(!angular.isString(n.hkItem.location)||n.hkItem.location===a.location);return angular.isDefined(a)?e?s.when(a):l(i[a.action]).then(function(e){return l("ui_settings_hotkeys_modal_prompt_override_body",{action:e.toString()}).then(function(e){return p.open("genericConfirm",{data:{title:"ui_settings_hotkeys_modal_prompt_override_header",message:e,okVisible:!0,cancelVisible:!0}}).then(function(){return a})})}):s.when()}(t.keys).then(function(e){angular.isObject(e)&&(e.keys.length=0,c.isUserHotkeyAction(e.action)&&n.hkPool.findAndRemove(e)),n.hkKeys.length=0,angular.forEach(t.keys,function(e){n.hkKeys.push(e)})}).catch(function(){n.hkKeys.length=0,r()}))),window.safeApply(n)}a.click(function(e){window.cancelEventImmediately(e)}),a.keydown(function(e){window.cancelEventImmediately(e)}),a.keyup(function(e){window.cancelEventImmediately(e)}),a.keypress(function(e){window.cancelEventImmediately(e)}),a.blur(function(){n.showCombinationError=!1,c.stopHotkeyListener(),n.isInputFocused=!1,r(n.hkKeys),window.safeApply(n)}),n.$on("$destroy",function(){a.off("click"),a.off("keydown"),a.off("keyup"),a.off("keypress"),a.off("blur ")}),n.clearHotkey=function(){n.hkKeys.length=0},n.startHotkeyRecording=function(){o=!1,p.setPreventModalClose(!0),c.startHotkeyListener(t),n.isInputFocused=!0,r()},n.$watch("hkKeys",r,!0),n.isInputFocused=!1}}}]),angular.module("wallpaperbrowserApp").controller("SettingsPerApplicationModalCtrl",["$scope","$uibModalInstance","host","data",function(n,e,t,o){function a(){t.callDeferred("settingsObject","getRunningApplications").then(function(e){n.applications=e,n.applications.sort(function(e,t){return angular.isString(e.executablename)&&angular.isString(t.executablename)?e.executablename.localeCompare(t.executablename):0})})}n.rules=o.rules,n.newRule={},n.page={name:""},n.conditionOptions=[{label:"ui_settings_playback_condition_is_running",value:"running"},{label:"ui_settings_playback_condition_is_focused",value:"focused"},{label:"ui_settings_playback_condition_is_maximized",value:"maximized"},{label:"ui_settings_playback_condition_is_fullscreen",value:"fullscreen"},{label:"ui_settings_playback_condition_is_playing_audio",value:"playingaudio"}],n.actionLabels={run:"ui_settings_playback_keep_running",pause:o.runtime&&o.runtime.multimonitor?"ui_settings_playback_pause_per_monitor":"ui_settings_playback_pause",pauseall:"ui_settings_playback_pause_all",stop:o.runtime&&o.runtime.multimonitor?"ui_settings_playback_stop_per_monitor":"ui_settings_playback_stop",stopall:"ui_settings_playback_stop_all",mute:"ui_settings_playback_mute"},n.conditionLabels={running:"ui_settings_playback_condition_is_running",focused:"ui_settings_playback_condition_is_focused",maximized:"ui_settings_playback_condition_is_maximized",fullscreen:"ui_settings_playback_condition_is_fullscreen",playingaudio:"ui_settings_playback_condition_is_playing_audio"},n.applications=[],n.showCreatePage=function(){n.page.name="create",n.newRule={condition:n.conditionOptions[0].value,action:n.actionOptions&&n.actionOptions[0].value},n.oldRule=void 0,a()},n.showEditPage=function(e){n.page.name="edit",n.newRule=angular.copy(e),n.oldRule=e,a()},n.createRule=function(){var e=n.newRule;n.page.name="",n.oldRule?n.rules.splice(n.rules.indexOf(n.oldRule),1,e):n.rules.unshift(e)},n.close=function(){e.close()},n.$watch("newRule.condition",function(e){var t,a,i;n.actionOptions=(t=o.runtime&&o.runtime.multimonitor&&"playingaudio"!==e&&"running"!==e,i=[],"running"!==(a=e)&&i.push({label:"ui_settings_playback_keep_running",value:"run"}),t?(i.push({label:"ui_settings_playback_pause_per_monitor",value:"pause"}),i.push({label:"ui_settings_playback_pause_all",value:"pauseall"})):i.push({label:"ui_settings_playback_pause",value:"pause"}),"playingaudio"!==a&&i.push({label:"ui_settings_playback_stop",value:"stop"}),i.push({label:"ui_settings_playback_mute",value:"mute"}),i),angular.isString(n.newRule.action)||(n.newRule.action=n.actionOptions[0].value)})}]),angular.module("wallpaperbrowserApp").controller("SettingsHotkeysModalCtrl",["$scope","$uibModalInstance","utils","host","data",function(i,e,n,t,a){i.hotkeys=a.hotkeys;var o=[];angular.forEach(i.hotkeys,function(e){n.isUserHotkeyAction(e.action)&&o.push(e)}),i.list=[{title:"ui_settings_hotkeys_group_playback",items:[{label:"ui_settings_hotkeys_action_pause",action:"pause"},{label:"ui_settings_hotkeys_action_stop",action:"stop"},{label:"ui_settings_hotkeys_action_mute",action:"mute"},{label:"ui_settings_hotkeys_action_next_wallpaper",action:"nextwallpaper"}]},{title:"ui_settings_hotkeys_group_general",items:[{label:"ui_settings_hotkeys_action_recording",action:"togglerecord"},{label:"ui_settings_hotkeys_action_hide_icons",action:"toggleicons"},{label:"ui_settings_hotkeys_action_take_screenshot",action:"screenshot"}]},{title:"ui_settings_hotkeys_group_windows",items:[{label:"ui_settings_hotkeys_action_window_browser",action:"windowbrowser"},{label:"ui_settings_hotkeys_action_window_settings",action:"windowsettings"},{label:"ui_settings_hotkeys_action_window_editor",action:"windoweditor"}]},{title:"ui_settings_hotkeys_group_wallpaper",stub:"ui_settings_hotkeys_group_wallpaper_stub",items:o}],i.findHotkeyList=function(t){return n.isUserHotkeyAction(t.action)?t:(angular.forEach(i.hotkeys,function(e){e.action===t.action&&(a=e)}),angular.isUndefined(a)&&(a={action:t.action,keys:[]},i.hotkeys.push(a)),a);var a},i.close=function(){angular.forEach(i.hotkeys.slice(),function(e){n.isUserHotkeyAction(e.action)&&0===e.keys.length&&i.hotkeys.findAndRemove(e)}),e.close()}}]),angular.module("wallpaperbrowserApp").controller("BrowseAssignHotkeyModalCtrl",["$scope","$uibModalInstance","data",function(e,t,a){e.hotkeys=a.hotkeys,e.keys=[],e.ok=function(){t.close(e.keys)},e.cancel=function(){t.dismiss("cancel")}}]),angular.module("wallpaperbrowserApp").controller("SettingsPluginModalCtrl",["$scope","$uibModalInstance","data",function(e,t,a){e.plugin=a.plugin,e.pluginSettings=a.pluginSettings,e.ok=function(){t.close()}}]),angular.module("wallpaperbrowserApp").run(["$templateCache",function(e){e.put("views/ci/changelog.html",'<div><div class="changelogHeadline">REV 1455 019bef5 - Kristjan Skutta, Sun Oct 21 23:54:57 2018 +0200</div> <pre class="changelogBody">- Fixed import file name limit breaking unicode letters.\n</pre><div class="changelogHeadline">REV 1454 c6fb0ce - Kristjan Skutta, Sat Oct 20 12:50:50 2018 +0200</div> <pre class="changelogBody">- Added forced steam error if a query that is expected to return something, returns nothing at all.\n</pre><div class="changelogHeadline">REV 1453 47e5efe - Kristjan Skutta, Sat Oct 20 12:44:21 2018 +0200</div> <pre class="changelogBody">- Moved last query options into lamdba instead of using class member.\n</pre><div class="changelogHeadline">REV 1452 ba28bb0 - Kristjan Skutta, Fri Oct 19 21:14:07 2018 +0200</div> <pre class="changelogBody">- Fixed preset wallpapers constantly being re-selected during download.\n</pre><div class="changelogHeadline">REV 1451 09dcedf - Kristjan Skutta, Fri Oct 19 20:50:08 2018 +0200</div> <pre class="changelogBody">- Added dynamic workshop preset indicator to show how many workshop presets are available.\n</pre><div class="changelogHeadline">REV 1450 70483d1 - Kristjan Skutta, Fri Oct 19 17:31:19 2018 +0200</div> <pre class="changelogBody">- Fixed translation token in context menu.\n</pre><div class="changelogHeadline">REV 1449 e45c52f - Kristjan Skutta, Fri Oct 19 17:26:01 2018 +0200</div> <pre class="changelogBody">- Updated translations.\n</pre><div class="changelogHeadline">REV 1448 fc33e13 - Kristjan Skutta, Fri Oct 19 17:23:42 2018 +0200</div> <pre class="changelogBody">- Made hotkey element show red border when invalid keys were entered and released.\n</pre><div class="changelogHeadline">REV 1447 843e549 - Kristjan Skutta, Fri Oct 19 17:03:14 2018 +0200</div> <pre class="changelogBody">- Renamed variants to presets to make things easier for users.\n- Changed Steamworks query to use temporary function bindings instead of class callback.\n</pre><div class="changelogHeadline">REV 1446 219585f - Kristjan Skutta, Thu Oct 18 23:25:22 2018 +0200</div> <pre class="changelogBody">- Updated translations from public repo.\n</pre><div class="changelogHeadline">REV 1445 d83539b - Kristjan Skutta, Thu Oct 18 23:03:37 2018 +0200</div> <pre class="changelogBody">- Updated translations.\n- Changed variants to use KV instead of Valves thingy.\n</pre><div class="changelogHeadline">REV 1444 659dda7 - Kristjan Skutta, Thu Oct 18 18:02:09 2018 +0200</div> <pre class="changelogBody">- Made all settings modals use an \'ok\' button to be more consistent.\n</pre><div class="changelogHeadline">REV 1443 b8aa57e - Kristjan Skutta, Thu Oct 18 13:33:10 2018 +0200</div> <pre class="changelogBody">- Fixed remote wallpapers not being flagged as variants unless their file was already downloaded.\n</pre><div class="changelogHeadline">REV 1442 518e0c6 - Kristjan Skutta, Thu Oct 18 12:53:19 2018 +0200</div> <pre class="changelogBody">- Added browse variants option to variant wallpapers and made them refer to the parent.\n- Fixed play in window crashing when wallpaper type cannot be determined.\n</pre><div class="changelogHeadline">REV 1441 4188561 - Kristjan Skutta, Thu Oct 18 12:37:40 2018 +0200</div> <pre class="changelogBody">- Cut changelog.\n</pre><div class="changelogHeadline">REV 1440 209c30a - Kristjan Skutta, Thu Oct 18 12:37:15 2018 +0200</div> <pre class="changelogBody">- Added prompt to property reset.\n- Replaced property drop down with buttons at the bottom of the property list.\n</pre><div class="changelogHeadline">REV 1439 93bc103 - Kristjan Skutta, Thu Oct 18 00:38:26 2018 +0200</div> <pre class="changelogBody">- Fixed dependency warning being shown on selection but before downloading already.\n</pre><div class="changelogHeadline">REV 1438 0050a11 - Kristjan Skutta, Thu Oct 18 00:13:04 2018 +0200</div> <pre class="changelogBody">- Added description to basic Workshop query response.\n- Added full description to existing variant update query.\n</pre><div class="changelogHeadline">REV 1437 67d189c - Kristjan Skutta, Wed Oct 17 23:38:27 2018 +0200</div> <pre class="changelogBody">- Added dependency subscription prompt when selecting an installed variant that is completely missing its dependency wallpaper.\n</pre><div class="changelogHeadline">REV 1436 860c294 - Kristjan Skutta, Wed Oct 17 23:25:21 2018 +0200</div> <pre class="changelogBody">- Added empty preset text.\n</pre><div class="changelogHeadline">REV 1435 d260449 - Kristjan Skutta, Wed Oct 17 23:20:11 2018 +0200</div> <pre class="changelogBody">- Made play in window function compatible with wallpaper variants.\n- Replaced preset browser modal with generic collection browser.\n</pre><div class="changelogHeadline">REV 1434 f8d6619 - Kristjan Skutta, Wed Oct 17 22:00:49 2018 +0200</div> <pre class="changelogBody">- Added variant sub and unsub behavior for dependency wallpaper.\n- Fixed variant publish genre tag not defaulting to unspecified properly.\n- Added Steam query for arbitrary published field ids.\n- Fixed preview path not being set properly in variant projects.\n</pre><div class="changelogHeadline">REV 1433 294488c - Kristjan Skutta, Wed Oct 17 01:33:01 2018 +0200</div> <pre class="changelogBody">- Added browse variants button to ctx menu.\n- Made browse variants state auto refresh query when set or unset.\n</pre><div class="changelogHeadline">REV 1432 339cb55 - Kristjan Skutta, Wed Oct 17 01:07:22 2018 +0200</div> <pre class="changelogBody">- Made wallpapers unpause when user changes the wallpaper.\n- Implemented variant dependency loading.\n- Implemented variant publishing.\n- Implemented single variant browsing.\n- Implemented variant/wallpaper category filter.\n- Added playlist preset override option for single wallpapers.\n- Added preset loading if presets aren\'t known yet.\n- Added nicer search reset button.\n- Moved publish process into window base class.\n- Added publish override system to override existing Workshop items easily without having a local reference (i.,e. for variants and assets).\n- Added more obvious error for missing ui32.exe which is usually thanks to the user moving the files via Steam\'s crude file move thing that doesn\'t do anything right.\n- VS BUG. Changed file input streams to read without specific buffer size because there seems to be a bug in file input streams since months now thanks to a Visual Studio update that breaks the read process if the file size doesn\'t *precisely* match what is being allowed during a read call.\n- Fixed scene plugin backbuffer reads not setting intermediate RTs to be off screen and unscaled.\n- Added keyvalues to Steam query.\n- Merged wallpaper playlist timeline and list into single vector.\n</pre><div class="changelogHeadline">REV 1431 774bec6 - Kristjan Skutta, Thu Oct 4 13:11:56 2018 +0200</div> <pre class="changelogBody">- Fixed particle system corruption when child system uses box emitter and is requested to stop emitting.\n</pre><div class="changelogHeadline">REV 1430 c1e3020 - Kristjan Skutta, Mon Oct 1 01:00:37 2018 +0200</div> <pre class="changelogBody">- Updated font awesome to 5.3.1.\n</pre><div class="changelogHeadline">REV 1429 1ea03cd - Kristjan Skutta, Sat Sep 29 13:32:14 2018 +0200</div> <pre class="changelogBody">- Fixed no anim warning showing on templates.\n- Localized steam workshop publish stages.\n</pre><div class="changelogHeadline">REV 1428 c55ab22 - Kristjan Skutta, Fri Sep 28 22:11:24 2018 +0200</div> <pre class="changelogBody">- Moved snapshot record and import into window base class.\n</pre><div class="changelogHeadline">REV 1427 b2157f2 - Kristjan Skutta, Thu Sep 27 12:19:33 2018 +0200</div> <pre class="changelogBody">- Fixed publish process not starting anymore.\n</pre><div class="changelogHeadline">REV 1426 6e4f9b7 - Kristjan Skutta, Thu Sep 27 12:14:44 2018 +0200</div> <pre class="changelogBody">- Improved random time seed for playlists.\n- Reordered workshop lists based on Steam preference.\n- Removed publish tag double translation if translations are redundant.\n- Added publish and browse stubs for wallpaper variants.\n</pre><div class="changelogHeadline">REV 1425 1eabd27 - Kristjan Skutta, Tue Sep 25 18:26:00 2018 +0200</div> <pre class="changelogBody">- Updated translations from forums.\n</pre></div> '),e.put("views/includes/thirdpartynotices.html",'<div class="settingsThirdpartyBox"> <div> <div>Assets</div> <pre>Ricepod model by Eyaura - <a onclick="window.ui.shellexecute(\'http://www.moddb.com/mods/g-string\')">G String Mod</a>\r\nFoliage by bart (rescaled, <a onclick="window.ui.shellexecute(\'https://creativecommons.org/licenses/by/3.0/\')">CC-BY 3.0</a>)\r\nFree Brushes by <a onclick="window.ui.shellexecute(\'https://brusheezy.com\')">Brusheezy.com</a></pre> </div> <div> <div>Community Translators</div> <pre>Abeson\r\nafterl1ght\r\nAmin3435\r\nandi257\r\nAndr\r\nAndraz Span\r\nangrystar170\r\nANL\r\nAkiraTenchi\r\nAronpoiss\r\nASiMKA\r\nAteX01\r\nAudition-CSBlock\r\nBigBoi ( ͡° ͜ʖ ͡°)\r\nBlack4Killer\r\nBLVCK\r\nChairman Meow\r\nChings\r\nChristiandiSama\r\nclmfkilu\r\nCosminPerRam\r\nCronic185\r\nDaYWhiTe\r\nDimOkGamer\r\nDr. HaZaRd\r\nDushesS01\r\nE4RU\r\neduardo989\r\nEnesmirac\r\nEoun\r\neyal100\r\nFIndustries\r\nGaboik\r\nGriffin\r\nGuan\r\nGustav\r\nhdts-adam\r\nHish\r\nis984\r\nitskiru\r\nIvanSix\r\nivandwijaya\r\nJpF4E\r\nKamiAso\r\nKanarias\r\nkillingbeta\r\nKozara\r\nLagSeeN\r\nlennythecat\r\nlysinelai\r\nLosna\r\nlucapierobon\r\nLukelis357\r\nLusTerCsI\r\nLyvelion\r\nMagicWizardGuy\r\nMaksilos\r\nManfre98\r\nmarci010101\r\nMariolinXD\r\nMaximuel\r\nmaxlefou\r\nmeatturtle\r\nmeowside\r\nMiKaiLosA\r\nminimax4233\r\nMöyhönen\r\nMogician0123\r\nMonika-Ananieva\r\nMornwind\r\nNaufal-FR\r\nneirock\r\nNguyễn Văn Cao Kỳ\r\nnightparty\r\nnocryset\r\nlagseeing\r\nLittleWind404\r\nLoesna\r\nonikidokuz\r\nPatr1xUs\r\npapin97\r\npiccho[JP]\r\nQR Code\r\nRasin\r\nREDO\r\nRinpen\r\nRiooKaaa\r\nrjs4902\r\nSakuRabi\r\nsebinus\r\nSenpaiWithDiabetes\r\nsergeitarsaus\r\nshaart\r\nShiro\r\nSouk\r\nSpritBall\r\nstorym94374\r\nSumrid.Studio\r\nsunbeams001\r\nsuperuser590\r\nSwiftpaws\r\nTaavi\r\nTark\r\nThadah\r\nThe bear123\r\ntheMarcPower\r\nVitA$42$Yakamoz\r\nWiNCHaN\r\nwhhungbill\r\nxlydsg\r\nYoti\r\nZamekaze\r\nzhs852\r\nαz\r\n.FeTaK: Kokain\r\n[TW]Frank\r\n| extRme_sPortS |\r\n| Minkster &lt;3\r\nジュラ紀\r\n伊织\r\n古丁丁\r\n선진입후판단\r\n다이나믹</pre> </div> <div> <div>Boost</div> <pre>Boost Software License - Version 1.0 - August 17th, 2003\r\n\r\nPermission is hereby granted, free of charge, to any person or organization\r\nobtaining a copy of the software and accompanying documentation covered by\r\nthis license (the "Software") to use, reproduce, display, distribute,\r\nexecute, and transmit the Software, and to prepare derivative works of the\r\nSoftware, and to permit third-parties to whom the Software is furnished to\r\ndo so, all subject to the following:\r\n\r\nThe copyright notices in the Software and this entire statement, including\r\nthe above license grant, this restriction and the following disclaimer,\r\nmust be included in all copies of the Software, in whole or in part, and\r\nall derivative works of the Software, unless such copies or derivative\r\nworks are solely in the form of machine-executable object code generated by\r\na source language processor.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT\r\nSHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE\r\nFOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,\r\nARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\r\nDEALINGS IN THE SOFTWARE.</pre> </div> <div> <div>LodePNG</div> <pre>LodePNG version 20160118\r\nCopyright (c) 2005-2016 Lode Vandevenne\r\nThis software is provided \'as-is\', without any express or implied\r\nwarranty. In no event will the authors be held liable for any damages\r\narising from the use of this software.\r\nPermission is granted to anyone to use this software for any purpose,\r\nincluding commercial applications, and to alter it and redistribute it\r\nfreely, subject to the following restrictions:\r\n    1. The origin of this software must not be misrepresented; you must not\r\n    claim that you wrote the original software. If you use this software\r\n    in a product, an acknowledgment in the product documentation would be\r\n    appreciated but is not required.\r\n    2. Altered source versions must be plainly marked as such, and must not be\r\n    misrepresented as being the original software.\r\n    3. This notice may not be removed or altered from any source\r\n    distribution.</pre> </div> <div> <div>JsonCpp</div> <pre>The JsonCpp library\'s source code, including accompanying documentation, \r\ntests and demonstration applications, are licensed under the following\r\nconditions...\r\n\r\nThe author (Baptiste Lepilleur) explicitly disclaims copyright in all \r\njurisdictions which recognize such a disclaimer. In such jurisdictions, \r\nthis software is released into the Public Domain.\r\n\r\nIn jurisdictions which do not recognize Public Domain property (e.g. Germany as of\r\n2010), this software is Copyright (c) 2007-2010 by Baptiste Lepilleur, and is\r\nreleased under the terms of the MIT License (see below).\r\n\r\nIn jurisdictions which recognize Public Domain property, the user of this \r\nsoftware may choose to accept it either as 1) Public Domain, 2) under the \r\nconditions of the MIT License (see below), or 3) under the terms of dual \r\nPublic Domain/MIT License conditions described here, as they choose.\r\n\r\nThe MIT License is about as close to Public Domain as a license can get, and is\r\ndescribed in clear, concise terms at:\r\n\r\n   http://en.wikipedia.org/wiki/MIT_License\r\n   \r\nThe full text of the MIT License follows:\r\n\r\n========================================================================\r\nCopyright (c) 2007-2010 Baptiste Lepilleur\r\n\r\nPermission is hereby granted, free of charge, to any person\r\nobtaining a copy of this software and associated documentation\r\nfiles (the "Software"), to deal in the Software without\r\nrestriction, including without limitation the rights to use, copy,\r\nmodify, merge, publish, distribute, sublicense, and/or sell copies\r\nof the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be\r\nincluded in all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\r\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS\r\nBE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\r\nACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\r\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\nSOFTWARE.\r\n========================================================================\r\n(END LICENSE TEXT)\r\n\r\nThe MIT license is compatible with both the GPL and commercial\r\nsoftware, affording one all of the rights of Public Domain with the\r\nminor nuisance of being required to keep the above copyright notice\r\nand license text in the source code. Note also that by accepting the\r\nPublic Domain "license" you can re-license your copy using whatever\r\nlicense you like.</pre> </div> <div> <div>GLM</div> <pre>================================================================================\r\nOpenGL Mathematics (GLM)\r\n--------------------------------------------------------------------------------\r\nGLM is licensed under The Happy Bunny License and MIT License\r\n\r\n================================================================================\r\nThe Happy Bunny License (Modified MIT License)\r\n--------------------------------------------------------------------------------\r\nCopyright (c) 2005 - 2014 G-Truc Creation\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the "Software"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nRestrictions:\r\n By making use of the Software for military purposes, you choose to make a\r\n Bunny unhappy.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n\r\n================================================================================\r\nThe MIT License\r\n--------------------------------------------------------------------------------\r\nCopyright (c) 2005 - 2014 G-Truc Creation\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the "Software"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.</pre> </div> <div> <div>CEF</div> <pre><strong>Please see bin/cefthirdpartynotices.html for all CEF licenses!</strong></pre> <pre>Copyright (c) 2008-2014 Marshall A. Greenblatt. Portions Copyright (c)\r\n2006-2009 Google Inc. All rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without\r\nmodification, are permitted provided that the following conditions are\r\nmet:\r\n\r\n   * Redistributions of source code must retain the above copyright\r\nnotice, this list of conditions and the following disclaimer.\r\n   * Redistributions in binary form must reproduce the above\r\ncopyright notice, this list of conditions and the following disclaimer\r\nin the documentation and/or other materials provided with the\r\ndistribution.\r\n   * Neither the name of Google Inc. nor the name Chromium Embedded\r\nFramework nor the names of its contributors may be used to endorse\r\nor promote products derived from this software without specific prior\r\nwritten permission.\r\n\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre> </div> <div> <div>FFTS</div> <pre>Copyright (c) 2012, 2013 Anthony M. Blake amb@anthonix.com\r\n \r\n All rights reserved.\r\n\r\n Redistribution and use in source and binary forms, with or without\r\n modification, are permitted provided that the following conditions are met:\r\n    * Redistributions of source code must retain the above copyright\r\n        notice, this list of conditions and the following disclaimer.\r\n    * Redistributions in binary form must reproduce the above copyright\r\n        notice, this list of conditions and the following disclaimer in the\r\n        documentation and/or other materials provided with the distribution.\r\n    * Neither the name of the organization nor the\r\n      names of its contributors may be used to endorse or promote products\r\n        derived from this software without specific prior written permission.\r\n\r\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND\r\n ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\r\n WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\r\n DISCLAIMED. IN NO EVENT SHALL ANTHONY M. BLAKE BE LIABLE FOR ANY\r\n DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\r\n (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\r\n LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\r\n ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\r\n SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre> </div> <div> <div>libsquish</div> <pre>Copyright (c) 2006 Simon Brown                          si@sjbrown.co.uk\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining\r\na copy of this software and associated documentation files (the \r\n"Software"), to deal in the Software without restriction, including\r\nwithout limitation the rights to use, copy, modify, merge, publish,\r\ndistribute, sublicense, and/or sell copies of the Software, and to \r\npermit persons to whom the Software is furnished to do so, subject to \r\nthe following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included\r\nin all copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS\r\nOR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF \r\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY \r\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, \r\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE \r\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</pre> </div> <div> <div>Font Awesome</div> <pre>SIL OPEN FONT LICENSE\r\n\r\nVersion 1.1 - 26 February 2007\r\n\r\nPREAMBLE\r\nThe goals of the Open Font License (OFL) are to stimulate worldwide\r\ndevelopment of collaborative font projects, to support the font creation\r\nefforts of academic and linguistic communities, and to provide a free and\r\nopen framework in which fonts may be shared and improved in partnership\r\nwith others.\r\n\r\nThe OFL allows the licensed fonts to be used, studied, modified and\r\nredistributed freely as long as they are not sold by themselves. The\r\nfonts, including any derivative works, can be bundled, embedded, \r\nredistributed and/or sold with any software provided that any reserved\r\nnames are not used by derivative works. The fonts and derivatives,\r\nhowever, cannot be released under any other type of license. The\r\nrequirement for fonts to remain under this license does not apply\r\nto any document created using the fonts or their derivatives.\r\n\r\nDEFINITIONS\r\n"Font Software" refers to the set of files released by the Copyright\r\nHolder(s) under this license and clearly marked as such. This may\r\ninclude source files, build scripts and documentation.\r\n\r\n"Reserved Font Name" refers to any names specified as such after the\r\ncopyright statement(s).\r\n\r\n"Original Version" refers to the collection of Font Software components as\r\ndistributed by the Copyright Holder(s).\r\n\r\n"Modified Version" refers to any derivative made by adding to, deleting,\r\nor substituting — in part or in whole — any of the components of the\r\nOriginal Version, by changing formats or by porting the Font Software to a\r\nnew environment.\r\n\r\n"Author" refers to any designer, engineer, programmer, technical\r\nwriter or other person who contributed to the Font Software.\r\n\r\nPERMISSION &amp; CONDITIONS\r\nPermission is hereby granted, free of charge, to any person obtaining\r\na copy of the Font Software, to use, study, copy, merge, embed, modify,\r\nredistribute, and sell modified and unmodified copies of the Font\r\nSoftware, subject to the following conditions:\r\n\r\n1) Neither the Font Software nor any of its individual components,\r\nin Original or Modified Versions, may be sold by itself.\r\n\r\n2) Original or Modified Versions of the Font Software may be bundled,\r\nredistributed and/or sold with any software, provided that each copy\r\ncontains the above copyright notice and this license. These can be\r\nincluded either as stand-alone text files, human-readable headers or\r\nin the appropriate machine-readable metadata fields within text or\r\nbinary files as long as those fields can be easily viewed by the user.\r\n\r\n3) No Modified Version of the Font Software may use the Reserved Font\r\nName(s) unless explicit written permission is granted by the corresponding\r\nCopyright Holder. This restriction only applies to the primary font name as\r\npresented to the users.\r\n\r\n4) The name(s) of the Copyright Holder(s) or the Author(s) of the Font\r\nSoftware shall not be used to promote, endorse or advertise any\r\nModified Version, except to acknowledge the contribution(s) of the\r\nCopyright Holder(s) and the Author(s) or with their explicit written\r\npermission.\r\n\r\n5) The Font Software, modified or unmodified, in part or in whole,\r\nmust be distributed entirely under this license, and must not be\r\ndistributed under any other license. The requirement for fonts to\r\nremain under this license does not apply to any document created\r\nusing the Font Software.\r\n\r\nTERMINATION\r\nThis license becomes null and void if any of the above conditions are\r\nnot met.\r\n\r\nDISCLAIMER\r\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,\r\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF\r\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT\r\nOF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL THE\r\nCOPYRIGHT HOLDER BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\nINCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL\r\nDAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\nFROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM\r\nOTHER DEALINGS IN THE FONT SOFTWARE.</pre> </div> <div> <div>Assimp</div> <pre>Assimp is released as Open Source under the terms of a 3-clause BSD license.</pre> <pre>Copyright (c) 2006-2015 assimp team\r\nAll rights reserved.\r\n\r\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\r\n\r\nRedistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\r\nRedistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\r\nNeither the name of the assimp team nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</pre> </div> <div> <div>FreeImage</div> <pre>This software uses the FreeImage open source image library. See http://freeimage.sourceforge.net for details.\r\nFreeImage is used under the FIPL, version 1.0.\r\nThe full license can be found at bin/freeimage-license.txt.</pre> </div> <div> <div>LZ4 - Fast LZ compression algorithm</div> <pre>Copyright (C) 2011-2017, Yann Collet.</pre> <pre>BSD 2-Clause License (http://www.opensource.org/licenses/bsd-license.php)\r\nRedistribution and use in source and binary forms, with or without\r\nmodification, are permitted provided that the following conditions are\r\nmet:\r\n   * Redistributions of source code must retain the above copyright\r\nnotice, this list of conditions and the following disclaimer.\r\n   * Redistributions in binary form must reproduce the above\r\ncopyright notice, this list of conditions and the following disclaimer\r\nin the documentation and/or other materials provided with the\r\ndistribution.\r\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\nYou can contact the author at :\r\n- LZ4 homepage : http://www.lz4.org\r\n- LZ4 source repository : https://github.com/lz4/lz4</pre> </div> <div> <div>Perlin Simplex Noise</div> </div> <div> <div>The MIT License (MIT)</div> <pre>Copyright (c) 2012-2014 Sebastien Rombauts (sebastien.rombauts@gmail.com)</pre> <pre>Permission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the "Software"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is furnished\r\nto do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in all\r\ncopies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\r\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR\r\nIN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</pre> </div> <div> <div>mpg123</div> </div> <div> <pre>Copyright (c) 1995-2013 by Michael Hipp and others,</pre> <pre>free software under the terms of the LGPL v2.1</pre> <pre>Source code and instruction to recompile dependencies can be found at: <a onclick="window.ui.shellexecute(\'https://github.com/Biohazard90/wallpaper-engine-media-extensions\')">https://github.com/Biohazard90/wallpaper-engine-media-extensions</a></pre> </div> <div> <div>SFML 2</div> </div> <div> <pre>SFML (Simple and Fast Multimedia Library) - Copyright (c) Laurent Gomila\r\n\r\nThis software is provided \'as-is\', without any express or implied warranty.\r\nIn no event will the authors be held liable for any damages arising from\r\nthe use of this software.\r\n\r\nPermission is granted to anyone to use this software for any purpose,\r\nincluding commercial applications, and to alter it and redistribute it\r\nfreely, subject to the following restrictions:\r\n\r\n1. The origin of this software must not be misrepresented; you must not claim\r\n   that you wrote the original software. If you use this software in a product,\r\n   an acknowledgment in the product documentation would be appreciated but is\r\n   not required.\r\n\r\n2. Altered source versions must be plainly marked as such, and must not be\r\n   misrepresented as being the original software.\r\n\r\n3. This notice may not be removed or altered from any source distribution.</pre> </div> </div> '),e.put("views/modals/agegatemodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_age_gate_modal_header"></h4> </div> <div class="modal-body"> <div> <div translate="ui_browse_age_gate_modal_body"> </div> </div> <div class="ageGateModalBody"> <div> <span class="dateHeader" translate="ui_browse_age_gate_modal_day"></span> <span class="dateHeader" translate="ui_browse_age_gate_modal_month"></span> <span class="dateHeader" translate="ui_browse_age_gate_modal_year"></span> </div> <div> <droplist dp-options="days" dp-selected="date.day"></droplist> <droplist dp-options="months" dp-selected="date.month"></droplist> <droplist dp-options="years" dp-selected="date.year"></droplist> </div> </div> <div class="ageGateModalSubText" translate="ui_browse_age_gate_modal_sub"> </div> </div> <div class="modal-footer" style="display: flex"> <div> </div> \x3c!--         <div ng-if="data.customFooter" style="display:flex;flex-direction:column">\r\n            <div style="margin-bottom:5px; text-align: left">{{data.customFooterText | translate}}</div>\r\n            <div>\r\n                <button class="btn btn-primary" uib-btn-checkbox ng-model="data.customFooterModel" translate="ui_workshop_tags_anime"></button>\r\n            </div>\r\n        </div> --\x3e <div style="flex-grow: 1"> <a class="btn btn-primary" ng-disabled="okDisabled" ng-click="ok()" translate="ui_ok"></a> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/modals/browseassignhotkey.html",'<div class="modalContainer"> <div class="modal-header"> \x3c!-- TODO: Make title dynamic when/if this is used for different use cases --\x3e <h4 class="modal-title" translate="ui_browse_modal_hotkey_assign_wallpaper"></h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group" style="margin-bottom:0px"> <label class="col-sm-4 control-label" translate="ui_browse_modal_hotkey_enter_hotkey"></label> <div class="col-sm-8"> <hotkeyinput hk-keys="keys" hk-pool="hotkeys"></hotkeyinput> </div> </div> </form> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" ng-disabled="keys.length===0" translate="ui_ok"></button> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/modals/browsecollectionsmodal.html",'<div class="modalContainer browseWallpaperCollectionModal"> <div class="modal-header"> <h4 class="modal-title" translate="{{type.labelHeader}}"></h4> </div> <div class="modal-body"> <div ng-if="data.isSaving"> <form class="form-horizontal"> <div class="form-group"> <label for="inputURL" class="col-sm-2 control-label" translate="{{type.labelSave}}"></label> <div class="col-sm-10"> <input type="text" class="form-control ignoreModalFocus" ng-model="data.collectionItem.name" id="inputURL" autofocus> <div translate="{{type.labelSaveDescription}}"></div> </div> </div> <div class="form-group" style="margin-bottom:0px" ng-if="type.hotkeyAction"> <label class="col-sm-2 control-label" translate="ui_browse_context_menu_hotkey"></label> <div class="col-sm-10"> <hotkeyinput hk-keys="context.hotkey" hk-pool="data.hotkeys"></hotkeyinput> </div> </div> </form> </div> <div ng-if="!data.isSaving"> <div class="btn-group-vertical verticalRadioButtonList"> <button class="btn btn-default ignoreModalFocus" type="button" ng-repeat="p in data.collections" ng-model="context.currentSelection" ng-dblclick="ok()" uib-btn-radio="p">{{p.name}}</button> <div ng-if="data.collections.length==0 && type.labelEmpty" class="emptyCollections" translate="{{type.labelEmpty}}"></div> </div> <form class="form-horizontal"> <div class="form-group" style="margin-top:10px" ng-if="type.hotkeyAction"> <label class="col-sm-2 control-label" translate="ui_browse_context_menu_hotkey"></label> <div class="col-sm-10"> <hotkeyinput hk-keys="context.hotkey" hk-pool="data.hotkeys"></hotkeyinput> </div> </div> </form> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-danger" ng-if="!data.isSaving" ng-disabled="!context.currentSelection" ng-click="deleteCollectionItem(context.currentSelection)"> <span class="fas fa-trash"></span> {{\'ui_browse_playlist_modal_open_delete\' | translate}} </button> </div> <div> <button class="btn btn-primary" ng-disabled="data.isSaving ? data.collectionItem.name.length < 1 : !context.currentSelection" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browseexplorecreatequerymodal.html",'<div class="modalContainer browseWallpaperReportModal"> <div class="modal-header"> <h4 class="modal-title" translate="{{data.isEditing ? \'ui_browse_explore_create_query_modal_header_edit\' : \'ui_browse_explore_create_query_modal_header_new\'}}"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_category"></label> <div class="col-sm-8"> <droplist class="ignoreModalFocus" dp-selected="data.query.category" dp-options="categoryOptions"></droplist> </div> </div> <div class="row" ng-if="data.query.category!=\'collection\'"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_type"></label> <div class="col-sm-8"> <droplist class="ignoreModalFocus" dp-selected="data.query.querytype" dp-options="queryTypeOptions"></droplist> </div> </div> <div class="row" ng-if="data.query.category==\'keyword\'"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_keyword"></label> <div class="col-sm-8"> <input type="text" class="form-control ignoreModalFocus" ng-model="data.query.keyword" autofocus> </div> </div> <div class="row" ng-if="data.query.category==\'creator\'"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_user_steam_id"></label> <div class="col-sm-8"> <input type="text" class="form-control ignoreModalFocus" ng-model="data.query.itemid"> </div> </div> <div class="row" ng-if="data.query.category==\'collection\'"> <label class="col-sm-4 control-label" translate="ui_browse_explore_create_query_modal_collection_id"></label> <div class="col-sm-8"> <input type="text" class="form-control ignoreModalFocus" ng-model="data.query.itemid"> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-class="data.okClass" ng-disabled="!validateQuery()" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browseplaylistsettingsmodal.html",'<div class="modalContainer browseWallpaperPlaylistSettingsModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_playlist_modal_settings_header"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <label for="inputTiming" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_timing_label"></label> <div class="col-sm-5"> <droplist id="inputTiming" dp-options="timingOptions" dp-selected="settings.mode"></droplist> </div> </div> <div ng-if="settings.mode == \'timer\'"> <div class="row"> <label class="col-sm-7 control-label"></label> <div class="col-sm-5"> <div class="row visible-sm visible-md visible-lg"> <div class="col-sm-6" translate="ui_browse_playlist_modal_settings_timing_hours"></div> <div class="col-sm-6" translate="ui_browse_playlist_modal_settings_timing_minutes"></div> </div> <div class="row"> <div class="col-sm-6"> <div class="visible-xs" translate="ui_browse_playlist_modal_settings_timing_hours"></div> <input type="number" class="form-control" ng-model="tempSettings.timerhours" placeholder="00" onclick="this.select()"> </div> <div class="col-sm-6"> <div class="visible-xs" translate="ui_browse_playlist_modal_settings_timing_minutes"></div> <input type="number" class="form-control" ng-model="tempSettings.timerminutes" placeholder="00" onclick="this.select()"> </div> </div> </div> </div> </div> <div ng-if="settings.mode == \'daytime\'"> <div class="row"> <label class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_daytime_clock"></label> <div class="col-sm-5"> <droplist dp-options="clockOptions" dp-selected="settings.clock"></droplist> </div> </div> </div> <div class="row"> <label for="inputOrder" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_order_label"></label> <div class="col-sm-5"> <droplist id="inputOrder" dp-disabled="settings.mode != \'timer\'" dp-options="orderOptions" dp-selected="settings.order"></droplist> </div> </div> <div class="row"> <label ng-click="settings.videosequence=!settings.videosequence" for="inputVideoSequence" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_video_sequence"></label> <div class="col-sm-5"> <checkbox id="inputVideoSequence" cb-disabled="settings.mode != \'timer\'" cb-checked="settings.videosequence"></checkbox> </div> </div> <div class="row"> <label ng-click="settings.updateonpause=!settings.updateonpause" for="inputUpdateOnPause" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_update_on_pause"></label> <div class="col-sm-5"> <checkbox id="inputUpdateOnPause" cb-disabled="settings.mode != \'timer\'" cb-checked="settings.updateonpause"></checkbox> </div> </div> <div class="row"> <label ng-click="settings.transition=!settings.transition" for="inputTransition" class="col-sm-7 control-label" translate="ui_browse_playlist_modal_settings_transition_enabled"></label> <div class="col-sm-5"> <checkbox id="inputTransition" cb-checked="settings.transition"></checkbox> </div> </div> \x3c!--             <div class="row">\r\n                <label ng-click="settings.updateonpause=!settings.updateonpause" class="col-sm-5 control-label" translate="ui_browse_playlist_modal_settings_transition_time"></label>\r\n                <div class="col-sm-5">\r\n                    <rzslider rz-slider-model="settings.transition" rz-slider-options="{ceil:1000, floor:0}"></rzslider>\r\n                </div>\r\n                <div style="text-align: right" class="col-sm-2">{{settings.transition}} ms</div>\r\n            </div> --\x3e </div> </div> <div class="modal-footer"> \x3c!--         <div>\r\n            <a class="btn btn-default" ng-click="resetSettings()" translate="ui_browse_playlist_modal_settings_reset"></a>\r\n        </div> --\x3e <div></div> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> </div> </div> </div> '),e.put("views/modals/browsereportmodal.html",'<div class="modalContainer browseWallpaperReportModal"> <div class="modal-header"> <h4 class="modal-title">{{\'ui_browse_report_modal_header\' | translate}} {{data.title}}</h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_category_label"></label> <div class="col-sm-6"> <droplist dp-options="categories" dp-selected="context.category"></droplist> </div> </div> <div class="row"> <div class="col-sm-12" translate="{{\'ui_browse_report_modal_category_\' + context.category + \'_description\'}}"></div> </div> <div class="row" ng-if="context.category === \'violation\' || context.category === \'rating\'"> <div class="col-sm-12"> <rating-table highlight="context.category === \'rating\' ? context.suggestedrating : \'Ban\'"></rating-table> </div> </div> <div class="row" ng-if="context.category === \'genre\'"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_genre_current"></label> <div class="col-sm-6"> {{translatedCurrentTags}} </div> </div> <div class="row" ng-if="context.category === \'genre\'"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_genre_label"></label> <div class="col-sm-6"> <droplist class="editorTagDropDown" dp-options="genres" dp-empty-text="..." dp-selected="context.suggestedgenre"></droplist> </div> </div> <div class="row" ng-if="context.category === \'rating\' || context.category === \'violation\'"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_rating_current"></label> <div class="col-sm-6"> {{translatedCurrentRatingTags || (\'ui_workshop_tags_rating_everyone\' | translate)}} </div> </div> <div class="row" ng-if="context.category === \'rating\'"> <label class="col-sm-6 control-label" translate="ui_browse_report_modal_rating_label"></label> <div class="col-sm-6"> <droplist class="editorTagDropDown" dp-options="ratings" dp-empty-text="..." dp-selected="context.suggestedrating"></droplist> </div> </div> <div class="row" ng-if="context.category !== \'copyright\'"> <label class="col-sm-12 control-label" translate="ui_browse_report_modal_notes"></label> </div> <div class="row" ng-if="context.category !== \'copyright\'"> <div class="col-sm-12"> <textarea ng-model="context.note" style="resize: none;height: 160px;width:100%"></textarea> </div> </div> <div class="row" ng-if="context.category === \'copyright\'"> <div class="col-xs-12"> <input type="text" style="width:100%" value="{{\'http://steamcommunity.com/sharedfiles/filedetails/?id=\' + data.workshopid}}"> </div> </div> <div class="row" ng-if="context.category === \'copyright\'"> <div class="col-xs-12"> <a class="btn btn-primary fullWidth" onclick="window.ui.shellexecute(\'https://steamcommunity.com/dmca/create/\');" translate="ui_browse_report_modal_copyright_dispute"></a> </div> </div> </div> </div> <div class="modal-footer"> <div></div> <div> <button class="btn btn-danger" ng-disabled="isReportDisabled() || reportInProgress" ng-click="ok()" translate="ui_browse_report_modal_submit"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browsesplitmonitormodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_monitors_split_monitor" translate-values="settings"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row" style="margin-bottom: 10px"> <label class="col-sm-7 control-label" translate="ui_browse_monitors_direction"></label> <div class="col-sm-5"> <droplist dp-options="directionOptions" dp-change="resetPosition()" dp-selected="settings.config.direction"></droplist> </div> </div> <div class="row"> <label class="col-sm-7 control-label" translate="ui_browse_monitors_posititon"></label> <div class="col-sm-5"> <input class="form-control ignoreModalFocus" type="number" min="0" ng-model="settings.config.position"> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browsewallpapersharepresetmodal.html",'<div class="modalContainer browseWallpaperSharePresetModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_preset_modal_share_header"></h4> </div> <div class="modal-body"> <div> \x3c!--             <form ng-submit="ok()" class="form-horizontal">\r\n                <div class="form-group" style="margin-bottom:0px">\r\n                    <label for="inputURL" class="col-sm-2 control-label" translate="ui_browse_preset_modal_save_name"></label>\r\n                    <div class="col-sm-10">\r\n                        <input type="text" class="form-control" ng-model="data.name" id="inputURL" autofocus>\r\n                    </div>\r\n                </div>\r\n            </form> --\x3e <textarea id="jsonTextArea" style="resize:none;width:100%" spellcheck="false" rows="20" ng-model="data.preset"></textarea> <textarea id="jsonTextAreaTmp" class="hiddenTextArea" spellcheck="false"></textarea> <div class="jsonError" ng-if="jsonError.length > 0">{{jsonLine}} {{jsonError}}</div> </div> </div> <div class="modal-footer"> <div> <div class="base64Label"> Base64 </div> <div class="base64Buttons"> <a class="btn btn-default" ng-click="copyPreset()"> <span class="fas fa-copy"></span> {{\'ui_browse_preset_modal_copy\' | translate}} </a> <a class="btn btn-default" ng-click="pastePreset()"> <span class="far fa-clipboard"></span> {{\'ui_browse_preset_modal_paste\' | translate}} </a> </div> </div> <div> <button class="btn btn-primary" ng-disabled="!isJsonValid" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/browsewallpaperworkshopinfomodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_modal_advertise_workshop_header"></h4> </div> <div class="modal-body modalGenericConfirmBody"> <div> <div translate="ui_browse_modal_advertise_workshop_body"> </div> </div> </div> <div class="modal-footer browseWorkshopAdvertiseFooter"> <div class="browseWorkshopAdvertiseFooterTags"> <div style="margin-bottom:5px; text-align: left" translate="ui_browse_modal_advertise_workshop_footer"></div> <div class="browseWorkshopAdvertiseFooterTagsContainer"> <button ng-repeat="genre in genreList" class="btn browseWorkshopAdvertiseFooterTagBtn" ng-class="{\'btn-success\':genres[genre.value],\'btn-default\':!genres[genre.value]}" uib-btn-checkbox ng-model="genres[genre.value]" translate="{{genre.label}}"></button> </div> </div> <div class="browseWorkshopAdvertiseFooterOkayButton"> <button class="btn btn-primary" ng-disabled="!hasGenresSelected()" ng-click="ok()" translate="ui_ok"></button> <button class="btn btn-default" ng-if="data.canCancel" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editoreffectlistmodal.html",'<div class="modalContainer" modalmove> <div> <div class="modal-header"> <h4 class="modal-title">{{title | translate}}</h4> </div> <div class="modal-body editorEffectModalBody"> <div style="min-height: 400px"> <div class="editorEffectModalTreeRoot"> <div ng-repeat="group in groupList" ng-show="group.visible"> <a ng-click="group.open = !group.open" style="display: block"> <span style="width:20px" class="fa" ng-class="{\'fa-chevron-right\': !group.open, \'fa-chevron-down\': group.open}"></span> {{group.name | translate}} </a> <a class="editorEffectModalItem activeBackHighlight" ng-if="group.open" ng-repeat="item in group.items" ng-click="selected.item = item" ng-class="{\'active\':selected.item == item}" ng-dblclick="selected.item = item;ok()" translate="{{item.name}}"></a> </div> </div> <div class="editorEffectModalSelectionContainer"> <h4 translate="{{selected.item.name}}"></h4> <div class="editorEffectModalPreviewContainer" ng-show="selected.item.preview || selected.item.variants[selected.item.options.droplistSelected].preview"> <preview p-options="{tag:\'effect\', memory:\'WallpaperEngineEffectPreviewMem\', ctrl:\'previewEffectCtrl\', defaultColor:\'0\'}"></preview> </div> <div ng-if="selected.item.options.droplistOptions" class="selectionWithMargin"> <droplist class="fullWidth editorEffectModalDropDownLimit" dp-options="selected.item.options.droplistOptions" dp-selected="selected.item.options.droplistSelected"></droplist> </div> <div translate="{{selected.item.description}}" class="selectionWithMargin"></div> <div ng-if="selected.item.options.nameVisible" class="selectionWithMargin"> <h4 translate="ui_editor_project_settings_modal_name"></h4> <div class="fullWidth"> <input type="text" class="form-control" ng-model="selected.item.options.name" placeholder="Name"> </div> </div> <div ng-if="selected.item.options.resolution" class="selectionWithMargin"> <h4 translate="ui_editor_project_settings_modal_resolution"></h4> <div class="fullWidth text-left editorResolutionParent"> <input type="number" class="form-control" ng-model="selected.item.options.resolution.width" placeholder="Width"> <div>X</div> <input type="number" class="form-control" ng-model="selected.item.options.resolution.height" placeholder="Height"> </div> </div> <div ng-if="selected.item.options.color" class="selectionWithMargin"> <h4 translate="ui_editor_project_settings_modal_clear_color"></h4> <div class="fullWidth text-left editorResolutionParent"> <spectrum-colorpicker options="colorPickerOptions" ng-model="selected.item.options.color" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok" ng-disabled="!selected.item"></button> <button class="btn btn-default" ng-click="close()" translate="ui_cancel"></button> </div> </div> </div> </div> '),e.put("views/modals/editorimportmodelmodal.html",'<div class="modalContainer" modalmove> <div> <div class="modal-header"> <h4 class="modal-title">Import {{objInfo.config.title}} {{objInfo.name}}</h4> </div> <div class="modal-body"> <div class="objInfo.instantImport"> <div translate="ui_editor_importer_please_wait"></div> </div> <div class="editorImportModelModalMaterialList" ng-if="!objInfo.instantImport"> <div> <div> <strong>Material name</strong> </div> <div> <strong>Settings</strong> </div> <div> </div> </div> <div ng-repeat="material in objInfo.materials"> <div style="word-break: break-all;padding-right:10px"> <div>{{material.name}}</div> <img style="width: 128px; height: 128px;object-fit:contain" ng-src="{{material.previewUrl}}"> </div> <div class="editorImportModelModalMaterialListProperties"> \x3c!-- <droplist dp-options="shaderPresets" dp-selected="material.shaderpreset"></droplist> --\x3e <div style="font-style: italic">Shader: {{material.shaderpreset}}</div> <div class="paddedElement"> <droplist dp-options="material.formats" dp-selected="material.config.format"></droplist> </div> <div class="paddedElement"> <checkbox cb-checked="material.config.nointerpolation" cb-title="\'ui_editor_properties_point_filter\'"></checkbox> </div> <div class="paddedElement"> <checkbox cb-checked="material.config.nomip" cb-title="\'ui_editor_properties_no_mip_maps\'"></checkbox> </div> <div class="paddedElement"> <checkbox cb-checked="material.config.clampuvs" cb-title="\'ui_editor_properties_clamp_uvs\'"></checkbox> </div> <div class="paddedElement" ng-if="objInfo.isImage"> <checkbox cb-checked="material.config.spritesheet" cb-title="\'ui_editor_properties_spritesheet\'"></checkbox> <div ng-if="material.config.spritesheet"> <div ng-repeat="sequence in material.config.spritesheetsequences" class="editorImportModelModalSpritesheetSequence"> <div> <span translate="ui_editor_properties_width"></span> <span translate="ui_editor_properties_height"></span> <span translate="ui_editor_properties_frames"></span> <span translate="ui_editor_properties_duration"></span> </div> <div> <span><input type="number" ng-model="sequence.width"></span> <span><input type="number" ng-model="sequence.height"></span> <span><input type="number" ng-model="sequence.frames"></span> <span><input type="number" ng-model="sequence.duration"></span> </div> </div> </div> </div> </div> </div> </div> </div> <div class="modal-footer" style="display:flex"> <div ng-if="objInfo.isImage && !objInfo.instantImport"> <checkbox cb-checked="objInfo.shouldAdjustProjection" cb-title="\'ui_editor_import_adjust_projection_center\'"></checkbox> </div> \x3c!--  --\x3e \x3c!-- renderableCount --\x3e <div style="flex-grow:1;text-align:right"> <button class="btn btn-primary" ng-disabled="waitingForResponse" ng-click="ok()">{{okButtonLabel}}</button> <button class="btn btn-default" ng-disabled="waitingForResponse" ng-click="close()">Close</button> </div> </div> </div> <div class="editorImportModelCompileOverlay ng-hide" ng-show="compileCtrl.active || compileCtrl.success"> <div class="modal-header"> <h4 class="modal-title">{{\'ui_editor_importer_compiling_assets_for\' | translate}} {{objInfo.name}}</h4> </div> <div class="modal-body"> <compiler-progress compile-ctrl="compileCtrl"></compiler-progress> </div> </div> </div> '),e.put("views/modals/editormaterialsmodal.html",'<div class="modalContainer editorMaterialBrowser"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_select_texture"></h4> </div> <div class="modal-body"> <div> <input type="text" class="form-control" ng-model="textureFilter" placeholder="{{\'ui_browse_search_placeholder\' | translate}}" ng-model-options="{debounce: 250}" autofocus> </div> <div class="editorMaterialBrowserList"> <div class="editorMaterialBrowserListItem" ng-repeat="texture in visibleMaterials" tooltip="{{texture.local}}" ng-click="selected.item=texture" ng-dblclick="selected.item=texture;ok()" ng-class="{active:selected.item===texture}"> <img class="editorMaterialBrowserImg" ng-src="{{texturePreviews[texture.local]}}"> <div>{{texture.file}}</div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok" ng-disabled="!selected.item"></button> <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editoropenwallpapermodal.html",'<div class="modalContainer editorOpenWallpaperRoot"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_open_modal_header"></h4> </div> <div class="modal-body"> <div> \x3c!--             <div id="wpimg{{wallpaper.uniqueId}}" class="browseWallpaperImage" ng-repeat="wallpaper in wallpapers track by $index" ng-class="{selected:wallpaper===currentSelection}" ng-click="selectItem(wallpaper)" ng-dblclick="ok()" ng-attr-style="background-image: url(\'{{wallpaper.preview}}\')">\r\n                <div class="caption">\r\n                    <div>\r\n                        <div>\r\n                            {{wallpaper.title}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="selectBorder"></div>\r\n            </div> --\x3e <wallpaper-thumbnail class="wallpaperBrowseInner" wt-wallpapers="wallpapers" wt-selection="currentSelection" wt-mousecallback="callbackWallpaperAllMouse(btn, context, $event)"></wallpaper-thumbnail> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-danger" ng-disabled="!currentSelection" ng-click="deleteProject(currentSelection)"> <span class="fas fa-trash"></span> {{\'ui_editor_open_modal_delete\' | translate}} </a> </div> <div> <a class="btn btn-primary" ng-disabled="!currentSelection" ng-click="ok()" translate="ui_ok"></a> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/modals/editorparticleeditormodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_particle_editor"></h4> </div> <div class="modal-body editorParticleEditorBody"> <div class="editorParticleEditorBodyHeader"> <span translate="ui_editor_particle_selected"></span> <span class="particleList"> <droplist dp-options="data.existingParticles" dp-selected="data.particle"></droplist> </span> <button class="btn btn-default" ng-click="newParticle()"><span class="far fa-file"></span></button> <button class="btn btn-default" ng-disabled="!data.particle" ng-click="duplicateParticle(data.particle)"><span class="fas fa-copy"></span></button> <button class="btn btn-danger" ng-disabled="!data.particle" ng-click="deleteParticle(data.particle)"><span class="fas fa-trash"></span></button> </div> <div class="editorParticleEditorBodyControls"> <div class="editorParticleElements editorParticleColumnBorder"> <div ng-repeat="elementGroup in elementGroups"> <div class="editorParticleElementGroup"> <a ng-click="elementGroup.open = !elementGroup.open" class="groupHeader"> <span style="width:20px" class="fas" ng-class="{\'fa-chevron-right\': !elementGroup.open, \'fa-chevron-down\': elementGroup.open}"></span> {{elementGroup.name | translate}} </a> <a ng-if="elementGroup.canadd" class="btn btn-sm btn-success" ng-click="addElement(elementGroup, elementGroup.tag)"> <span class="fas fa-plus"></span> </a> </div> <div ng-if="elementGroup.open && !elementGroup.canadd"> <a class="editorEffectModalItem activeBackHighlight" ng-repeat="item in elementGroup.items" ng-click="selected.item = item" ng-class="{\'active\':selected.item == item}"> {{item.name | translate}} </a> </div> <div ng-if="elementGroup.open && elementGroup.canadd && elementGroup.items.length > 0"> <div class="editorParticleElementGroupTreeView"> <tree-view class="treeViewRoot" tv-drag-drop-tag="{{elementGroup.tag}}" tv-drag-drop-enabled="true" tv-data="elementGroup.items" tv-mode="\'scene\'" tv-selected-item="selected" tv-remove-clicked="onElementRemoved(elementGroup.items, item, elementGroup.tag)" tv-element-dragged="onElementDragged(from, to, elementGroup.tag)"></tree-view> </div> </div> </div> </div> <div class="editorParticleProperties editorParticleColumnBorder"> <property-list p-list="selected.item.properties" p-ctrl="propertyControl" p-owner="selected.item" p-modal-depth="1"></property-list> </div> <div class="editorParticlePreview"> <preview p-options="{tag:\'particle\', memory:\'WallpaperEngineParticlePreviewMem\', ctrl:\'previewParticleCtrl\', interactive:true}"></preview> <div class="editorSceneStatsOverlay"> <div><span translate="ui_editor_stats_particle_count"></span><span>{{particleStats.count + \' / \' + particleStats.maxcount}}</span></div> </div> </div> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="ok()" translate="ui_select"></a> <a class="btn btn-default" ng-click="cancel()" translate="ui_close"></a> </div> </div> </div> '),e.put("views/modals/editorprojectsettingsmodal.html",'<div class="modalContainer" modalmove> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_project_settings_modal_header"></h4> </div> <div class="modal-body editorProjectSettingsProperties"> <div class="row"> <div class="col-xs-12"> <h4 translate="ui_editor_project_settings_modal_header_general"></h4> </div> </div> <div class="row"> <div class="col-xs-11 col-xs-offset-1"> <div class="row"> <div class="col-xs-6"> <label for="inputProjectName" class="control-label" translate="ui_editor_project_settings_modal_title"></label> </div> <div class="col-xs-6 text-left"> <input type="text" class="form-control" ng-model="project.data.title" id="inputProjectName" placeholder="Project name"> </div> </div> <div class="row"> <div class="col-xs-6"> <label class="control-label" translate="ui_editor_project_settings_modal_scheme_color"></label> </div> <div class="col-xs-6 text-left"> <spectrum-colorpicker options="colorPickerOptions" ng-model="project.data.general.properties.schemecolor.value" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> </div> </div> <div class="editorProjectSettingsProperties" ng-if="project.data.type===\'scene\'"> <div class="row"> <div class="col-xs-12"> <h4 translate="ui_editor_project_settings_modal_scene"></h4> </div> </div> <div class="row"> <div class="col-xs-11 col-xs-offset-1"> <div class="row" ng-if="project.scenegeneraldata.orthogonalprojection"> <div class="col-xs-6"> <label class="control-label" translate="ui_editor_project_settings_modal_resolution"></label> </div> <div class="col-xs-6 text-left editorResolutionParent"> <input type="number" class="form-control" ng-model="project.scenegeneraldata.orthogonalprojection.width" placeholder="Width"> <div>X</div> <input type="number" class="form-control" ng-model="project.scenegeneraldata.orthogonalprojection.height" placeholder="Height"> </div> </div> \x3c!--                     <div class="row">\r\n                        <div class="col-xs-6">\r\n                            <label for="inputProjectName" class="control-label" translate="ui_editor_project_settings_modal_bloom"></label>\r\n                        </div>\r\n                        <div class="col-xs-6 text-left">\r\n                            <checkbox cb-checked="project.scenegeneraldata.bloom" cb-changed=""></checkbox>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-xs-6">\r\n                            <label class="control-label" translate="ui_editor_project_settings_modal_clear_color"></label>\r\n                        </div>\r\n                        <div class="col-xs-6 text-left">\r\n                            <spectrum-colorpicker options="colorPickerOptions" ng-model="project.scenegeneraldata.clearcolor" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker>\r\n                        </div>\r\n                    </div> --\x3e <div class="row"> <div class="col-xs-6"> <label class="control-label" translate="ui_editor_project_settings_modal_ambient_color"></label> </div> <div class="col-xs-6 text-left"> <spectrum-colorpicker options="colorPickerOptions" ng-model="project.scenegeneraldata.ambientcolor" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> <div class="row"> <div class="col-xs-6"> <label class="control-label" translate="ui_editor_project_settings_modal_skylight_color"></label> </div> <div class="col-xs-6 text-left"> <spectrum-colorpicker options="colorPickerOptions" ng-model="project.scenegeneraldata.skylightcolor" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> </div> </div> \x3c!--             <div class="row">\r\n                <div class="col-xs-12">\r\n                    <h4 translate="ui_editor_project_settings_modal_audio_processing"></h4>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-xs-11 col-xs-offset-1">\r\n                    <div class="row">\r\n                        <div class="col-xs-6">\r\n                            <label for="inputProjectName" class="control-label" translate="ui_editor_project_settings_modal_audio_processing_normalization"></label>\r\n                        </div>\r\n                        <div class="col-xs-6 text-left">\r\n                            <checkbox cb-checked="project.scenegeneraldata.audioprocessingnormalization" cb-changed=""></checkbox>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div class="col-xs-6">\r\n                            <label class="control-label" translate="ui_editor_project_settings_modal_audio_processing_smoothing"></label>\r\n                        </div>\r\n                        <div class="col-xs-4 text-left">\r\n                            <rzslider rz-slider-model="project.scenegeneraldata.audioprocessingsmoothing" rz-slider-options="{ceil:1.0, floor:0.0, precision:2, step:0.01}"></rzslider>\r\n                        </div>\r\n                        <div class="col-xs-1 text-left">\r\n                            {{project.scenegeneraldata.audioprocessingsmoothing || \'0.0\'}}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div> --\x3e </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="close()" translate="ui_ok"></a> </div> </div> </div> '),e.put("views/modals/editorratingmodal.html",'<div class="modalContainer editorRatingModal"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_workshop_modal_rating_header"></h4> </div> <div class="modal-body"> <div class="container-fluid"> <div class="row"> <div class="col-xs-12"> <div translate="ui_editor_workshop_modal_rating_body"></div> </div> </div> <div class="row"> <div class="col-xs-6" translate="ui_editor_workshop_modal_rating_current"> </div> <div class="col-xs-6" translate="{{data.contentrating ? \'ui_workshop_tags_rating_\' + data.contentrating.toLowerCase() : \'ui_workshop_workshop_tags_rating_not_set\'}}"> </div> </div> <div class="row"> <div class="col-xs-12"> <rating-table highlight="highlight.contentrating"></rating-table> </div> </div> </div> </div> <div class="modal-footer"> <div> \x3c!--             <button class="btn btn-danger" ng-if="!data.isSaving" ng-disabled="!context.currentSelection" ng-click="deletePlaylist(context.currentSelection)">\r\n                <span class="fas fa-trash"></span> {{\'ui_browse_playlist_modal_open_delete\' | translate}}\r\n            </button> --\x3e <button ng-click="ok(\'Everyone\')" ng-mouseenter="highlight.contentrating = \'Everyone\'" ng-mouseleave="highlight.contentrating = \'\'" class="btn btn-default ratingButtonEveryone" translate="ui_workshop_tags_rating_everyone"></button> <button ng-click="ok(\'Questionable\')" ng-mouseenter="highlight.contentrating = \'Questionable\'" ng-mouseleave="highlight.contentrating = \'\'" class="btn btn-default ratingButtonQuestionable" translate="ui_workshop_tags_rating_questionable"></button> <button ng-click="ok(\'Mature\')" ng-mouseenter="highlight.contentrating = \'Mature\'" ng-mouseleave="highlight.contentrating = \'\'" class="btn btn-default ratingButtonMature" translate="ui_workshop_tags_rating_mature"></button> </div> <div> \x3c!-- <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> --\x3e <button class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/editorsteampublishmodal.html",'<div class="modalContainer editorSteamPublishModalRoot" modalmove> <div ng-class="{\'past\': page && page != \'initial\'}"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_publish_modal_header"></h4> </div> <div class="modal-body"> <workshop-details wd-project-data="projectData" wd-editor-settings="editorSettings"></workshop-details> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-class="{\'btn-wide\':projectData.workshopid}" ng-disabled="isPublishDisabled()" ng-click="startPublish()">{{getPublishButtonText() | translate}}</button> <a class="btn btn-default" ng-click="close()" translate="ui_close"></a> </div> </div> </div> <div ng-class="{\'future\': page != \'publish\'}" class="future"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_publish_modal_header_upload"></h4> </div> <div class="modal-body"> <div ng-if="publishPage==\'progress\'"> <div class="editorSteamPublishStateLabel">{{publishProgressMessage | translate}}</div> <uib-progressbar class="progress-striped active" max="100" value="publishProgressValue"><i>{{publishProgressValue}}%</i></uib-progressbar> </div> <div ng-if="publishPage==\'error\'"> <div class="editorSteamPublishErrorLabel" translate="ui_editor_publish_modal_steam_error"></div> <div>{{publishProgressError}}</div> </div> <div ng-if="publishPage==\'success\'"> <div class="editorSteamPublishStateLabel" ng-attr-style="margin-top: {{needsToAcceptAgreement?80:120}}px" translate="ui_editor_publish_modal_publish_successful"></div> <div ng-if="needsToAcceptAgreement" class="alert alert-danger" translate="ui_editor_publish_modal_publish_prompt_agreement"></div> <a class="btn btn-primary fullWidth" ng-click="openItemInWorkshop()"><span class="fab fa-steam"></span> {{\'ui_editor_publish_modal_button_show_in_workshop\' | translate}}</a> </div> </div> <div class="modal-footer"> <a class="btn btn-primary" ng-if="publishPage==\'error\'" ng-click="startPublish()" translate="ui_retry"></a> <button class="btn btn-default" ng-if="publishPage!=\'success\'" ng-disabled="publishPreventCancel" ng-click="cancelPublish()" translate="ui_cancel"></button> <a class="btn btn-default" ng-if="publishPage==\'success\'" ng-click="close()" translate="ui_close"></a> </div> </div> </div> '),e.put("views/modals/editortemplatewizardmodal.html",'<div class="modalContainer" modalmove> <div class="editorTemplateWizardModalRoot"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_template_wizard_header"></h4> </div> <div class="modal-body"> <div class="row"> <div class="col-xs-4"> <h5 translate="ui_editor_template_wizard_select_option"></h5> <div class="btn-group-vertical verticalRadioButtonList"> <button ng-repeat="option in templateoptions" ng-model="selectedOption.value" uib-btn-radio="option" class="btn btn-default">{{option.name}} <span class="glyphicon pull-right" ng-class="{\'glyphicon-warning-sign warnIcon\':!option.configured}"></span></button> \x3c!-- \'glyphicon-ok\':option.configured --\x3e </div> </div> <div class="col-xs-8" ng-if="selectedOption.value"> <h5 translate="ui_editor_template_wizard_details"></h5> <div class="fullWidth" ng-bind-html="selectedOption.value.description"> </div> <div ng-if="selectedOption.value.options.length > 0" class="templateOptionProperties"> <div ng-repeat="option in selectedOption.value.options"> <checkbox ng-if="option.type === \'checkbox\'" cb-checked="option.value" cb-title="option.label"></checkbox> <div ng-if="option.type === \'slider\'"> <span>{{option.label}}</span> <rzslider rz-slider-model="option.value" rz-slider-options="{ceil:option.max, floor:option.min}"></rzslider> <span>{{option.value}}</span> </div> </div> </div> <div ng-switch on="selectedOption.value.type"> <div ng-switch-when="replacetexture"> <div class="fullWidth wordBreakAll" ng-if="selectedOption.value.last"> <br>{{\'ui_editor_template_wizard_last_import\' | translate}} {{selectedOption.value.last}} </div> <div class="editButton"> <a class="btn btn-default fullWidth" ng-click="replaceTexture(selectedOption.value)"><span class="far fa-image"></span> {{\'ui_editor_template_wizard_import_image\' | translate}}</a> </div> </div> <div ng-switch-when="userpropertycolor"> <br> <spectrum-colorpicker class="sp-flat-nobtn" options="colorPickerOptions" ng-model="generalProperties[selectedOption.value.key].value" vec-color-converter on-show-options="{update:false}" on-change="setOptionConfigured(selectedOption.value)"></spectrum-colorpicker> </div> </div> </div> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-click="ok()" translate="ui_ok"></button> </div> </div> </div> <div class="editorImportModelCompileOverlay ng-hide" ng-show="compileCtrl.active || compileCtrl.success"> <div class="modal-header"> <h4 class="modal-title"> {{\'ui_editor_importer_compiling_assets_for\' | translate}} {{currentTemplateOptionName}}</h4> </div> <div class="modal-body"> <compiler-progress compile-ctrl="compileCtrl"></compiler-progress> </div> </div> </div> '),e.put("views/modals/editorwelcomemodal.html",'<div class="modalContainer" style="height:400px" modalmove> <div class="editorWelcomeModalRoot" ng-class="{past:page}"> <div class="modal-header"> <h4 class="modal-title">{{title | translate}}</h4> </div> <div class="modal-body"> <div class="editorWelcomeContent"> <div> <a class="btn btn-primary editorWelcomeWallpaperNewBtn" native-drop-target="fileDropped(droppedFiles[0])" ndt-extension-tag="\'editorNewWallpaper\'" ndt-desired-modal-depth="1" ndt-enabled="!page" ng-click="importFile()"> <span class="fas fa-fw fa-file editorWelcomeWallpaperNewBtnFile"></span> <div class="title" translate="ui_editor_welcome_modal_create_wallpaper"></div> <div> <div class="subtitle" translate="ui_editor_welcome_modal_drop_background_file"></div> <div class="subtitle"> {{\'ui_editor_welcome_modal_supported_file_types\' | translate}} .jpeg, .png, .tga, .gif, .mp4, .exe, .html, .obj, .fbx </div> </div> </a> <a class="btn btn-default editorWelcomeWallpaperTemplateBtn" ng-click="openPage(\'templates\')"> <div class="title" translate="ui_editor_welcome_modal_use_a_template"></div> </a> </div> <div style="flex: 0.1"> </div> <div> <div translate="ui_editor_welcome_modal_edit_recent_wallpaper"></div> <div class="editorWelcomeWallpaperNoRecent" ng-if="!editorScope.editorSettings.recentfiles || editorScope.editorSettings.recentfiles.length == 0" translate="ui_editor_welcome_modal_edit_recent_no_wallpapers"></div> <div ng-if="recentFileDetails.length > 0" style="height: 220px;overflow: hidden"> <a ng-repeat="file in recentFileDetails track by $index" ng-click="openRecent(file)" class="btn btn-primary editorRecentFileBtn"> {{file.title}} <span>{{file.file}}</span> </a> </div> </div> </div> </div> <div class="modal-footer"> <div style="float:left" ng-if="false && !smallDialog"> <checkbox cb-checked="editorScope.editorSettings.showonstartup" cb-title="\'Show on Start up\'"></checkbox> </div> <div style="float:left"> <a class="btn btn-primary" style="width:auto" href="http://wallpaper-engine.wikia.com/wiki/Wallpaper_Engine_Wiki"> <span class="fab fa-wikipedia-w bt-lg"></span> {{\'ui_editor_welcome_modal_tutorial\' | translate}} </a> </div> <div> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> <div class="editorWelcomeModalRoot future" ng-class="{future:!page || page==\'templates\'}"> <div class="modal-header"> <h4 class="modal-title"><span ng-class="pageIcon"></span> {{newTitle | translate}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group"> <label for="inputProjectName" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_file"></label> <div class="control-label col-sm-9 editorWelcomeModalFilePath"> {{project.file}} </div> </div> <div class="form-group"> <label for="inputProjectName" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_project_name"></label> <div class="col-sm-9"> <input type="text" class="form-control" ng-model="project.title" id="inputProjectName" placeholder="New project"> </div> </div> <div class="form-group" ng-if="page==\'scene\'||page==\'video\'"> <label class="col-sm-3 control-label" translate="ui_editor_project_settings_modal_scheme_color"></label> <div class="col-xs-9 text-left"> <spectrum-colorpicker options="colorPickerOptions" ng-model="project.schemecolor" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> \x3c!--                 <div class="form-group" ng-if="page==\'scene\'">\r\n                    <div class="col-xs-6">\r\n                        <a class="btn btn-primary editorSceneTypeButton" ng-click="openPage(\'scene3d\', \'glyphicon glyphicon-knight\')">\r\n                            <span class="glyphicon glyphicon-knight"></span>\r\n                            <br />3D\r\n                        </a>\r\n                    </div>\r\n                    <div class="col-xs-6">\r\n                        <a class="btn btn-primary editorSceneTypeButton" ng-click="openPage(\'scene2d\', \'glyphicon glyphicon-picture\')">\r\n                            <span class="glyphicon glyphicon-picture"></span>\r\n                            <br />2D\r\n                        </a>\r\n                    </div>\r\n                </div> --\x3e \x3c!--                 <div class="form-group" ng-if="page==\'video\'">\r\n                    <label for="inputWallpaperFile" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_video_file"></label>\r\n                    <div class="col-sm-9">\r\n                        <input type="text" class="form-control" id="inputWallpaperFile" placeholder="New project">\r\n                        <a class="btn btn-primary btn-lg" ng-click="importFile()"><span class="glyphicon glyphicon-import"></span> {{\'ui_editor_welcome_modal_import\' | translate}}</a>\r\n                        <span>{{(project.file | filename) || (\'ui_editor_welcome_modal_no_file_selected\' | translate)}}</span>\r\n                    </div>\r\n                </div> --\x3e <div class="form-group" ng-if="page==\'web\'||page==\'application\'"> <label for="inputWallpaperFile" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_imported_files"></label> <div class="col-sm-9"> \x3c!-- <a class="btn btn-primary btn-lg fullWidth" ng-click="importFile()"><span class="glyphicon glyphicon-import"></span> {{\'ui_editor_welcome_modal_import_folder\' | translate}}</a> --\x3e \x3c!-- <span>{{(project.file | filename) || \'No file selected\'}}</span> --\x3e <div class="importFileList"> <div ng-repeat="entry in project.filelist track by $index"> <span class="glyphicon" ng-class="{\'glyphicon-file\':!entry.isdirectory,\'glyphicon-folder-close\':entry.isdirectory}"></span> {{entry.label}} </div> </div> </div> </div> </form> </div> <div class="modal-footer"> <div style="float:left"> <a class="btn btn-default" ng-click="page=\'\'"><span class="fas fa-arrow-left"></span> {{\'ui_back\' | translate}}</a> </div> <div> <button class="btn btn-primary" ng-disabled="!project.file || !project.title" ng-click="ok()" translate="ui_ok"></button> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> <div class="editorWelcomeModalRoot future2" ng-class="{past: page && page !== \'templates\', future2:page!==\'templates\'}"> <div class="modal-header"> <h4 class="modal-title"><span ng-class="pageIcon"></span> {{newTitle | translate}}</h4> </div> <div class="modal-body"> <form class="form-horizontal"> \x3c!--                 <div class="form-group">\r\n                    <label for="inputProjectName" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_project_name"></label>\r\n                    <div class="col-sm-9">\r\n                        <input type="text" class="form-control" ng-model="project.title" id="inputProjectName" placeholder="New project">\r\n                    </div>\r\n                </div> --\x3e <div class="form-group"> <label for="inputProjectName" class="col-sm-3 control-label" translate="ui_editor_welcome_modal_project_name"></label> <div class="col-sm-9"> <input type="text" class="form-control ignoreModalFocus" ng-model="project.title" id="inputProjectName" placeholder="New project"> </div> </div> <div class="form-group"> <label class="col-sm-3 control-label" translate="ui_editor_welcome_modal_template"></label> <div class="col-sm-9"> <div class="btn-group-vertical verticalRadioButtonList" style="width:50%;height:160px"> <button class="btn btn-default" type="button" ng-repeat="template in templates" ng-model="project.template" uib-btn-radio="template">{{template.name}}</button> </div> <img class="editorWelcomeModalTemplateImg" ng-src="{{currentPreview || \'images/blueprint.png\'}}"> </div> </div> <div class="form-group" ng-if="project.template.value==\'empty2d\'"> <label class="col-sm-3 control-label" translate="ui_editor_project_settings_modal_resolution"></label> <div class="col-xs-9 text-left editorResolutionParent"> <input type="number" class="form-control ignoreModalFocus" ng-model="project.resolution.width" placeholder="Width"> <div>X</div> <input type="number" class="form-control ignoreModalFocus" ng-model="project.resolution.height" placeholder="Height"> </div> </div> </form> </div> <div class="modal-footer"> <div style="float:left"> <a class="btn btn-default" ng-click="page=\'\'"><span class="fas fa-arrow-left"></span> {{\'ui_back\' | translate}}</a> </div> <div> <button class="btn btn-primary" ng-disabled="!project.title || !project.template" ng-click="ok()" translate="ui_ok"></button> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> </div> '),e.put("views/modals/editorworkshoprules.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_editor_workshop_rules_modal_title"></h4> </div> <div class="modal-body editorWorkshopRulesBody"> <div> <span translate="ui_editor_workshop_rules_modal_body"></span> <a onclick="window.ui.shellexecute(\'http://store.steampowered.com/subscriber_agreement/\')">http://store.steampowered.com/subscriber_agreement</a> </div> <br> <div translate="ui_editor_workshop_rules_modal_list_header"></div> <ul> <li translate="ui_editor_workshop_rules_modal_rule_nudity"></li> <li translate="ui_editor_workshop_rules_modal_rule_offensive"></li> <li translate="ui_editor_workshop_rules_modal_rule_copyright"></li> <li translate="ui_editor_workshop_rules_modal_rule_ads"></li> <li translate="ui_editor_workshop_rules_modal_rule_misleading"></li> </ul> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" translate="ui_ok" ng-click="ok()"></a> </div> </div> </div> '),e.put("views/modals/genericconfirmmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="{{data.title}}"></h4> </div> <div class="modal-body modalGenericConfirmBody"> <div ng-if="data.leftIcon || data.message"> <div ng-if="data.leftIcon" class="confirmIcon"> <img ng-src="{{data.leftIcon}}"> </div> <div style="display:flex;flex-direction:column"> <div translate="{{data.message}}"></div> <div ng-if="data.checkboxCenterVisible" style="margin-top: 15px;white-space:initial"> <checkbox cb-checked="data.checkboxChecked" cb-title="data.checkboxTitle"></checkbox> </div> </div> </div> <div ng-if="data.checkboxVisible" style="margin-top: 15px"> <checkbox cb-checked="data.checkboxChecked" cb-title="data.checkboxTitle"></checkbox> </div> <div ng-if="data.droplistVisible" style="margin-top: 15px"> <droplist class="fullWidth" dp-options="data.droplistOptions" dp-selected="data.droplistSelected"></droplist> </div> <div ng-if="data.textinputVisible" class="fullWidth" style="margin-top: 15px"> <form class="fullWidth"> <input type="text" class="form-control" ng-model="data.textinput" autofocus> </form> </div> <div ng-if="data.selectionVisible" class="modalGenericConfirmSelectionRoot"> <div> <a class="editorEffectModalItem activeBackHighlight" ng-repeat="item in data.selectionItems" ng-click="data.selectedItem = item" ng-dblclick="data.selectedItem = item;ok()" ng-class="{\'active\':data.selectedItem == item}" translate="{{item.label}}"></a> </div> </div> </div> <div class="modal-footer" style="display: flex"> <div> <a class="btn btn-primary" ng-if="data.leftVisible" ng-class="data.leftClass" ng-click="leftClicked()">{{data.leftText|translate}}</a> <checkbox ng-if="data.checkboxLowVisible" cb-checked="data.checkboxChecked" cb-title="data.checkboxTitle"></checkbox> </div> \x3c!--         <div ng-if="data.customFooter" style="display:flex;flex-direction:column">\r\n            <div style="margin-bottom:5px; text-align: left">{{data.customFooterText | translate}}</div>\r\n            <div>\r\n                <button class="btn btn-primary" uib-btn-checkbox ng-model="data.customFooterModel" translate="ui_workshop_tags_anime"></button>\r\n            </div>\r\n        </div> --\x3e <div style="flex-grow: 1"> <button class="btn btn-primary" ng-if="data.okVisible" ng-class="data.okClass" ng-disabled="data.okDisabled" ng-click="ok()">{{data.okText || \'ui_ok\' | translate}}</button> <button class="btn btn-default" ng-if="data.cancelVisible" ng-click="cancel()" translate="ui_cancel"></button> </div> </div> </div> '),e.put("views/modals/openfromurlmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_browse_open_url_header"></h4> </div> <div class="modal-body"> <form class="form-horizontal"> <div class="form-group" style="margin-bottom:0px"> <label for="inputURL" class="col-sm-2 control-label">URL</label> <div class="col-sm-10"> <input type="text" class="form-control ignoreModalFocus" ng-model="url" id="inputURL" placeholder="http://" autofocus> </div> </div> </form> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="ok()" translate="ui_ok"></a> <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/modals/settingschangelogmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_settings_about_changelog"></h4> </div> <div class="modal-body changelogBody"> <ng-include src="\'views/ci/changelog.html\'"></ng-include> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="close()" translate="ui_ok"></a> </div> </div> </div> '),e.put("views/modals/settingshotkeysmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_settings_hotkeys_header"></h4> </div> <div class="modal-body perApplicationModalBody"> <div class="hotkeyTable fullList"> <div ng-repeat="group in list"> <div class="hotkeyHeader"> <div translate="{{group.title}}"></div> </div> <div ng-repeat="item in group.items"> <div class="hotkeyRow"> <div class="title" translate="{{item.label || \'ui_settings_hotkeys_action_user_\' + item.action}}"> </div> <hotkeyinput hk-keys="findHotkeyList(item).keys" hk-item="item" hk-pool="hotkeys"></hotkeyinput> </div> <div class="hotkeyValue"> {{item.title || item.value}} </div> </div> <div class="hotkeyRow" ng-if="group.items.length === 0"> <div class="stub" translate="{{group.stub}}"></div> </div> </div> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="close()" translate="ui_ok"></a> </div> </div> </div> '),e.put("views/modals/settingsperapplicationmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_settings_playback_application_rules_header"></h4> </div> <div style="white-space: nowrap"> <div class="perApplicationModal" ng-class="{\'showPage1\':page.name}"> <div class="modal-body perApplicationModalBody"> <div> <a ng-click="showCreatePage()" class="btn btn-default fullWidth" translate="ui_settings_playback_new_rule"></a> </div> <div class="ruleList"> <div ng-repeat="rule in rules" class="perApplicationRule"> <div class="ruleInfo"> <div class="ruleTitle">{{rule.executable}}</div> <div class="extra"> <div class="names"> <div translate="ui_settings_playback_new_rule_condition"></div> <div translate="ui_settings_playback_new_rule_action"></div> </div> <div> <div>{{conditionLabels[rule.condition] | translate}}</div> <div>{{actionLabels[rule.action] | translate}}</div> </div> </div> </div> <div> <button class="btn btn-default" ng-click="showEditPage(rule)" tooltip="ui_settings_playback_rule_edit" t-align-right="true"><span class="fas fa-edit"></span></button> <button class="btn btn-danger" ng-click="rules.findAndRemove(rule)" tooltip="ui_settings_playback_rule_remove" t-align-right="true"><span class="fas fa-trash"></span></button> </div> </div> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="close()" translate="ui_ok"></a> </div> </div> </div> <div class="perApplicationModal" ng-class="{\'showPage1\':page.name}"> <div class="modal-body perApplicationModalBody"> <div> <form class="form-horizontal"> <div class="form-group"> <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_application_name"></label> <div class="col-xs-8"> <div class="input-group"> <input type="text" class="form-control ignoreModalFocus" ng-model="newRule.executable"> <div class="input-group-btn"> <button class="btn btn-danger" ng-click="newRule.executable=\'\'"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> </div> </div> <div class="form-group"> <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_condition"></label> <div class="col-xs-8"> <droplist dp-options="conditionOptions" dp-selected="newRule.condition"></droplist> </div> </div> <div class="form-group"> <label class="col-xs-4 control-label" translate="ui_settings_playback_new_rule_action"></label> <div class="col-xs-8"> <droplist dp-options="actionOptions" dp-selected="newRule.action"></droplist> </div> </div> <div class="perApplicationList"> <a ng-repeat="app in applications | filter:newRule.executable" class="settingsApplicationRow" ng-click="newRule.executable = app.executablename"> <img ng-if="app.icon" ng-src="{{app.icon}}" class="settingsApplicationIcon"> <span ng-if="!app.icon" class="far fa-fw fa-window-maximize"></span> <span>{{app.executablename}}</span> </a> </div> </form> </div> </div> <div class="modal-footer"> <div> <button class="btn btn-primary" ng-disabled="!newRule.executable" ng-click="createRule()">{{page.name == \'create\' ? \'ui_create\' : \'ui_ok\' | translate}}</button> <button class="btn btn-default" ng-click="page.name=\'\'">{{\'ui_cancel\' | translate}}</button> </div> </div> </div> </div> </div> '),e.put("views/modals/settingspluginmodal.html",'<div class="modalContainer"> <div class="modal-header"> <h4 class="modal-title" translate="ui_settings_plugins_options_modal_header" translate-values="{name:plugin.name}"></h4> </div> <div class="modal-body"> <div> <form class="form-horizontal"> <div class="form-group" ng-repeat="option in plugin.options"> <label class="col-xs-8 control-label">{{option.label}}</label> <div class="col-xs-4"> <checkbox cb-checked="pluginSettings[plugin.key][option.name]"></checkbox> </div> </div> </form> </div> </div> <div class="modal-footer"> <div> <a class="btn btn-primary" ng-click="ok()" translate="ui_ok"></a> \x3c!-- <a class="btn btn-default" ng-click="cancel()" translate="ui_cancel"></a> --\x3e </div> </div> </div> '),e.put("views/templates/checkbox.html",'<div class="checkBoxBase"> <div ng-click="toggle()" class="checkBoxOuter" ng-class="{\'dis\':cbDisabled}"> <span class="fas fa-square checkBoxBackground"></span> <span ng-if="!cbType"> <span ng-if="cbChecked" class="fas fa-check-square checkBox"></span> <span ng-if="!cbChecked" class="far fa-square checkBox"></span> </span> <span ng-if="cbType==\'tag\'"> <span ng-if="cbChecked===1" class="fas fa-plus-square checkBox"></span> <span ng-if="cbChecked===2" class="fas fa-minus-square checkBox dangerText"></span> <span ng-if="!cbChecked" class="far fa-square checkBox"></span> </span> <span ng-if="cbType==\'bit\'"> <span ng-if="bitChecked()" class="fas fa-check-square checkBox"></span> <span ng-if="!bitChecked()" class="far fa-square checkBox"></span> </span> </div> <div ng-click="toggle()" ng-if="cbTitle" class="checkBoxTitle" ng-class="{\'dangerText\':cbChecked===2}">{{cbTitle | translate}}</div> </div> '),e.put("views/templates/compilerprogress.html",'<div> <h5>{{\'ui_editor_importer_compiling_file\' | translate}} {{compileInfo.current + 1}} of {{compileInfo.total}}: {{compileInfo.file}} ({{compileInfo.mode}})</h5> <uib-progressbar class="progress-striped active" ng-class="{\'snapProgressBar\':compileInfo.progress < 2}" max="100" value="compileInfo.total > 1 ? compileInfo.progress : 100"> <i ng-if="compileInfo.total > 1">{{compileInfo.progress}}%</i> </uib-progressbar> </div> '),e.put("views/templates/droplist.html",'<div class="btn-group dropDownComboBox" ng-keydown="keyDown($event)"> <button ng-disabled="dpDisabled || !dpOptions || dpOptions.length == 0" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <div class="ellipsis"><span class="dropIcon" ng-if="selected.icon" ng-class="selected.icon"></span> <div class="dropdown-san-item" translate="{{selected ? selected.label : dpEmptyText | san}}"></div> </div> <span ng-if="dpOptions.length > 0" class="caret"></span> </button> <ul class="dropdown-menu"> <li ng-repeat="option in dpOptions track by $index" ng-click="selectItem(option)" ng-class="{divider:option.type==\'divider\'}"> <a class="ellipsis"> <span ng-if="option.icon" ng-class="option.icon"></span> <div class="dropdown-san-item" translate="{{option.label | san}}"></div> </a> </li> </ul> </div> '),e.put("views/templates/explorequeryactions.html",'<span> <span class="exploreIcons" ng-if="!eqtQuery.custom"> <a class="btn btn-default" ng-click="eqtCallbacks.like(undefined, !eqtSettings.favorites.includes(eqtQuery.name), eqtQuery)" tooltip="ui_browse_explore_tooltip_favorite"><span class="fas fa-heart fa-fw favorite exploreIcon" ng-class="{\'active\':eqtSettings.favorites.includes(eqtQuery.name)}"></span></a> <a class="btn btn-default" ng-click="eqtCallbacks.like(true, undefined, eqtQuery)" tooltip="ui_browse_explore_tooltip_like"><span class="fas fa-thumbs-up fa-fw exploreIcon" ng-class="{\'active\':eqtSettings.liked.includes(eqtQuery.name)}"></span></a> <a class="btn btn-default" ng-click="eqtCallbacks.like(false, undefined, eqtQuery)" tooltip="ui_browse_explore_tooltip_dislike"><span class="fas fa-thumbs-down fa-fw exploreIcon dislike" ng-class="{\'active\':eqtSettings.disliked.includes(eqtQuery.name)}"></span></a> </span> <span class="exploreIcons" ng-if="eqtQuery.custom"> <a class="btn btn-default" ng-click="eqtCallbacks.remove(eqtQuery)" tooltip="ui_browse_explore_tooltip_remove"><span class="fas fa-trash fa-fw exploreIcon"></span></a> </span> <span class="exploreIcons" ng-if="eqtCallbacks.pushExplorePage"> <a ng-click="eqtCallbacks.pushExplorePage(eqtQuery)"><span class="btn btn-default exploreSeeMore" translate="ui_browse_explore_see_more"></span></a> \x3c!-- <a ng-if="query.wallpapers.length > 0" ng-click="eqtSettings.pushExplorePage(eqtQuery)" class="btn btn-default exploreSeeMore"><span translate="ui_browse_explore_see_more"></span></a> --\x3e </span> </span> '),e.put("views/templates/explorequerytitle.html",'<span> <img ng-if="eqtQuery.category==\'creator\'&&eqtUserInfo[eqtQuery.itemid]" ng-src="{{eqtUserInfo[eqtQuery.itemid].avatar}}" class="avatar"> <span ng-bind-html="translatedTitle"></span> </span> '),e.put("views/templates/filemenu.html",'<div class="filemenu"> <div class="btn-group" ng-repeat="item in fmItems track by $index" preview-toggle> <button type="button" class="btn btn-default dropdown-toggle" ng-mouseover="onMouseOver($event)" onclick="this.blur()" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" ng-disabled="item.disabled || fmDisabled"> {{item.label | translate}} </button> \x3c!--         <ul class="dropdown-menu">\r\n            <li ng-repeat="child in item.children track by $index" ng-click="selectItem(option)" ng-class="{separator:!child.label}"><button class="btn" ng-if="child.label">{{child.label}}</button></li> --\x3e \x3c!-- Nested menu TBD --\x3e \x3c!--             <li>\r\n                <a>ASD</a>\r\n                <ul class="dropdown-menu nested">\r\n                    <a>asdf</a>\r\n                </ul>\r\n            </li> --\x3e \x3c!-- </ul> --\x3e </div> </div> '),e.put("views/templates/helpoverlay.html",'<div class="helpOverlay ng-hide" ng-show="helpVisible"> <div class="helpFade ng-hide" ng-show="helpVisible" ng-click="hideHelp()"> </div> <div class="helpContainer ng-hide" ng-show="helpVisible"> <span class="fas fa-arrow-right helpCloseArrow ng-hide" ng-show="helpVisible" ng-click="hideHelp()"></span> <div class="inner"> <div class="container-fluid"> <div class="col-xs-12"> <div class="row"> <h3 translate="ui_editor_help_header"></h3> </div> <div class="row"> <div> <h4 class="fadedText" translate="ui_editor_help_tutorial_category_wiki"></h4></div> <div> <a class="btn btn-primary fullWidth" onclick="window.ui.shellexecute(\'http://wallpaper-engine.wikia.com/wiki/Wallpaper_Engine_Wiki\')"> <span class="fab fa-wikipedia-w bt-lg"></span> {{\'ui_editor_welcome_modal_wiki\' | translate}} </a> </div> </div> <div class="row tutorialAccordion"> <uib-accordion close-others="true"> <div ng-repeat="tutorialCategory in tutorialCategories track by $index"> <h4 class="fadedText" translate="{{tutorialCategory.title}}"></h4> <uib-accordion-group ng-repeat="tutorialGroup in tutorialCategory.groups track by $index" heading="{{tutorialGroup.title | translate}}" is-open="tutorialGroup.isOpen"> <a ng-repeat="item in tutorialGroup.items track by $index" class="btn btn-primary fullWidth" ng-click="onItemSelected(item)"> <span ng-if="item.icon" ng-class="item.icon"></span> {{item.body | translate}} </a> </uib-accordion-group> </div> </uib-accordion> </div> \x3c!--                     <div class="row">\r\n                        <div class="form-group fullWidth has-feedback">\r\n                            <input type="text" class="form-control" placeholder="Filter topics" ng-model="filter">\r\n                            <span class="glyphicon glyphicon-search form-control-feedback" aria-hidden="true"></span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <div ng-if="helpItemsFiltered.length === 0" class="fadedText">No results found</div>\r\n                        <div ng-if="helpItemsFiltered.length > 0" class="fadedText">Topics:</div>\r\n                        <uib-accordion close-others="true">\r\n                            <div ng-repeat="item in helpItemsFiltered track by $index">\r\n                                <h4 ng-if="item.type===\'heading\'" class="fadedText" ng-bind="item.title"></h4>\r\n                                <uib-accordion-group ng-if="!item.type" heading="{{item.title}}">\r\n                                    <div ng-bind-html="item.body"></div>\r\n                                </uib-accordion-group>\r\n                            </div>\r\n                        </uib-accordion>\r\n                    </div> --\x3e <div class="row helpFooter"> <span class="fadedText">Looking for additional help?</span> <div> <a onclick="window.ui.shellexecute(\'steam://url/GameHub/431960\\\\discussions\')"> <span class="fab fa-steam bt-lg"></span> Visit Steam Forums </a> </div> <div> <a onclick="window.ui.shellexecute(\'mailto:wallpaperengine@gmail.com?Subject=Application%20Support\')"> <span class="fas fa-envelope"></span> wallpaperengine@gmail.com </a> </div> </div> </div> </div> </div> </div> </div> '),e.put("views/templates/hotkeyinput.html",'<div class="input-group"> <input type="text" class="form-control ignoreModalFocus hotkeyInput" ng-focus="startHotkeyRecording()" ng-model="hotkeyLabel" ng-class="{\'faintText\':displayFaintText, \'settingsHotkeyLabelError\':showCombinationError}"> <div class="input-group-btn"> <button class="btn btn-default" ng-click="clearHotkey()"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> '),e.put("views/templates/preview.html",'<div ng-attr-style="padding: {{previewPadding}}"> <embed ng-mouse-wheel="mouseWheel($event, delta)" ng-keydown="keyDown($event)" ng-keyup="keyUp($event)" id="previewPlugin" type="application/x-ppapi-window-stream"> <span id="pluginCrossHairOverlay" ng-mouse-wheel="mouseWheel($event, delta)" ng-keydown="keyDown($event)" ng-keyup="keyUp($event)" style="position: absolute; width:100%;height: 100%; left: 0px; top: 0px; cursor: crosshair !important;display:none"></span> </div> '),e.put("views/templates/propertylist.html",'<div ng-repeat="property in pList track by $index" class="editorPropertyRow" ng-class="property.class" ng-if="!property.condition || evalCondition(property.condition)"> <div class="typeNameColumn"> <div class="keyValueLabel">{{property.name | translate}}</div> </div> <div ng-switch on="property.type" class="typeValueColumn"> <div ng-switch-when="readonly" class="typeReadonly"> {{property.value | translate}} </div> <div ng-switch-when="titleVisibleLock" class="visLockTitle"> <span class="title">{{property.name | translate}}</span> <a class="fas fa-fw fa-eye noTextDecoration" ng-if="findProperty(\'visible\').value" ng-click="toggleVisible(false)"></a> <a class="fas fa-fw fa-eye-slash noTextDecoration" ng-if="!findProperty(\'visible\').value" ng-click="toggleVisible(true)"></a> <a class="fas fa-fw fa-lock-open noTextDecoration" ng-if="!findProperty(\'locktransforms\').value" ng-click="toggleLock(true)"></a> <a class="fas fa-fw fa-lock noTextDecoration warningText" ng-if="findProperty(\'locktransforms\').value" ng-click="toggleLock(false)"></a> </div> <div ng-switch-when="nestedlink" class="typeNestedLink"> <a ng-click="pCtrl.navigateProperty(property.key, property.value)"><span class="fas fa-angle-double-right"></span> {{property.name}}</a> </div> <div ng-switch-when="string"> <input type="text" ng-model="property.value" ng-change="pCtrl.sendAssetPropertyChange(pOwner, property)"> </div> <div ng-switch-when="number"> <input type="number" onclick="this.select()" step="0.1" ng-model="property.value" ng-change="pCtrl.sendAssetPropertyChange(pOwner, property)"> </div> <div ng-switch-when="vec2"> <vec-component-input vci-mode="property.mode" vci-options="property" vci-owner="pOwner" vci-count="2" ng-model="property.value" ng-change="sendAssetPropertyChange(pOwner, property)" vci-slider-options="{id:property.key, onStart:linkedSliderStart, onEnd:linkedSliderEnd}"></vec-component-input> </div> <div ng-switch-when="vec3"> <vec-component-input vci-mode="property.mode" vci-options="property" ng-model="property.value" ng-change="pCtrl.sendAssetPropertyChange(pOwner, property)"></vec-component-input> </div> <div ng-switch-when="vec4"> <vec-component-input vci-mode="property.mode" vci-options="property" vci-count="4" ng-model="property.value" ng-change="pCtrl.sendAssetPropertyChange(pOwner, property)"></vec-component-input> </div> <div ng-switch-when="checkbox"> <checkbox cb-checked="property.value" cb-changed="pCtrl.sendAssetPropertyChange(pOwner, property)"></checkbox> </div> <div ng-switch-when="checkboxbit"> <checkbox cb-checked="property.value" cb-type="bit" cb-bit="property.bit" cb-changed="pCtrl.sendAssetPropertyChange(pOwner, property)" cb-recalculate-bits="recalculateBitFlags(property.key)"></checkbox> </div> <div ng-switch-when="color" class="typeColor"> <div ng-if="property.normalized"> <spectrum-colorpicker options="colorPickerSettings" ng-model="property.value" on-change="sendAssetPropertyChangeColor(pOwner, property)" on-show-options="{update:false}" vec-color-converter="true"></spectrum-colorpicker> </div> <div ng-if="!property.normalized"> <spectrum-colorpicker options="colorPickerSettings" ng-model="property.value" on-change="sendAssetPropertyChangeColor(pOwner, property)" on-show-options="{update:false}" vec-color-converter="false"></spectrum-colorpicker> </div> </div> <div ng-switch-when="slider" class="editorPropertySliderPropertyRow"> <div> <rzslider rz-slider-model="property.value" rz-slider-options="{id:property.key, ceil:property.max, floor:property.min, enforceStep:false, precision:2, step:0.01, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" type="number" step="0.1" onclick="this.select()" ng-model="property.value" ng-change="pCtrl.sendAssetPropertyChange(pOwner, property)"> </div> </div> <div ng-switch-when="sliderint" class="editorPropertySliderPropertyRow"> <div> <rzslider rz-slider-model="property.value" rz-slider-options="{id:property.key, ceil:property.max, floor:property.min, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" type="number" onclick="this.select()" ng-model="property.value" ng-change="pCtrl.sendAssetPropertyChange(pOwner, property)"> </div> </div> <div ng-switch-when="combo" class="comboPropertyRow"> <droplist dp-options="property.options" dp-selected="property.value" dp-change="pCtrl.sendAssetPropertyChange(pOwner, property)"></droplist> </div> \x3c!--         <div ng-switch-when="materialbrowse" class="materialBrowseRow">\r\n            <button class="btn btn-sm btn-primary fullWidth" ng-click="pCtrl.openMaterialBrowser(property.value)"><span class="fas fa-folder-open"></span> {{\'ui_editor_properties_texture_tooltip_browse\' | translate}}</button>\r\n        </div> --\x3e <div ng-switch-when="texture" class="editorTexturePropertyRow" native-drop-target="pCtrl.importTextureFile(property.material, property.textureindex, property.format, droppedFiles[0])" ndt-extension-tag="\'texture\'" ndt-internal-condition="pCtrl.textureDropCondition" ndt-internal-function="pCtrl.textureDropped(property.material, property.textureindex, data)" ndt-desired-modal-depth="pModalDepth"> <div class="texturePreview"> <img ng-src="{{getTexturePreview(property, property.value) ? texturePreviews[property.id] : \'\'}}"> </div> <div class="textureBtn"> <span>{{property.name | translate}}</span> <div> <button class="btn btn-sm btn-primary fullWidth" ng-if="!property.mode" ng-click="pCtrl.openMaterialBrowser(property)"><span class="fas fa-folder-open"></span> {{\'ui_editor_properties_browse\' | translate}}</button> <button class="btn btn-sm btn-primary fullWidth" ng-if="property.mode" ng-disabled="property.iserror" ng-click="pCtrl.beginPaint(property)"><span class="fas fa-paint-brush"></span> {{\'ui_editor_properties_paint\' | translate}}</button> <button class="btn btn-sm btn-primary" ng-if="property.mode" ng-click="pCtrl.openMaterialBrowser(property)" tooltip="ui_editor_properties_browse"><span class="fas fa-folder-open"></span></button> <button class="btn btn-sm btn-danger" tooltip="ui_editor_properties_reset" ng-click="pCtrl.resetTextureFile(property.material, property.textureindex)"><span class="fas fa-fw fa-times"></span></button> </div> <div> \x3c!-- <button class="btn btn-sm btn-default fullWidth" tooltip="ui_editor_properties_texture_tooltip_browse" ng-click="pCtrl.openMaterialBrowser(property.path)"><span class="fas fa-folder-open"></span></button> --\x3e <button class="btn btn-sm btn-default fullWidth" tooltip="ui_editor_properties_import" ng-click="pCtrl.importTextureFile(property.material, property.textureindex, property.format)"><span class="glyphicon glyphicon-import"></span></button> <button class="btn btn-sm btn-default fullWidth" tooltip="ui_editor_properties_export" ng-click="pCtrl.exportTextureFile(property.value)" ng-disabled="property.iserror"><span class="glyphicon glyphicon-export"></span></button> \x3c!-- Show settings when paint disabled --\x3e <button class="btn btn-sm btn-default fullWidth" ng-if="!property.mode" tooltip="ui_editor_properties_settings" ng-disabled="property.iserror" ng-click="pCtrl.navigateProperty(property.key, property.id)"><span class="fas fa-cog"></span></button> </div> </div> </div> <div ng-switch-when="effects"> <div class="treeViewPropertyRowButtons"> <button class="btn btn-primary" ng-click="pCtrl.addPropertyEffect(pOwner, property)"><span class="fas fa-plus"></span> {{\'ui_editor_properties_effects_add\' | translate}}</button> <button class="btn btn-primary" ng-click="pCtrl.editPropertyEffect(selectedEffect.item)" ng-disabled="property.value.indexOf(selectedEffect.item) === -1"><span class="fas fa-edit"></span> {{\'ui_editor_properties_effects_edit\' | translate}}</button> </div> <div class="treeViewPropertyRow"> <tree-view class="treeViewRoot" tv-drag-drop-tag="effect" tv-drag-drop-enabled="true" tv-data="property.value" tv-mode="\'scene\'" tv-selected-item="selectedEffect" tv-remove-clicked="pCtrl.onPropertyEffectRemoved(property, item)" tv-element-dragged="pCtrl.onPropertyEffectDragged(from, to)" tv-element-double-clicked="pCtrl.editPropertyEffect(selectedEffect.item)" tv-send-asset-property-change="pCtrl.sendAssetPropertyChange({id: resource.material}, property)"></tree-view> </div> </div> <div ng-switch-when="particle"> <div> <a class="btn btn-primary fullWidth" ng-click="pCtrl.editParticle(pOwner, property)"> {{\'ui_editor_properties_effects_edit\' | translate}} </a> </div> </div> <div ng-switch-when="particleinstancereset"> <div> <a class="btn btn-default fullWidth propertyButton" ng-click="sendMultipleProperties(pOwner, property)"> {{\'ui_editor_properties_effects_reset\' | translate}} </a> </div> </div> <div ng-switch-when="sounds"> <div class="treeViewPropertyRow treeViewSoundPropertyRow"> <tree-view class="treeViewRoot" tv-drag-drop-tag="renderable" tv-drag-drop-enabled="true" tv-data="property.value" tv-mode="\'scene\'" tv-selected-item="selectedEffect" tv-remove-clicked="pCtrl.onPropertySoundRemoved(property, item)" tv-element-dragged="pCtrl.onPropertySoundDragged(from, to)" tv-new-element-added="pCtrl.onPropertySoundAssetDropped(property, item, index)"></tree-view> </div> <div class="treeViewPropertyRowButtons"> <button class="btn btn-primary" ng-click="pCtrl.addPropertySound(pOwner, property)"><span class="fas fa-plus"></span> {{\'ui_editor_properties_effects_add\' | translate}}</button> </div> </div> </div> </div> '),e.put("views/templates/ratingtable.html",'<div> <div class="ratingTableLegend ratingTableColors"> <div class="everyone"><span>E</span> = <span translate="ui_workshop_tags_rating_everyone"></span></div> <div class="questionable"><span>Q</span> = <span translate="ui_workshop_tags_rating_questionable"></span></div> <div class="mature"><span>M</span> = <span translate="ui_workshop_tags_rating_mature"></span></div> <div class="ban"><span>B</span> = <span translate="ui_workshop_tags_rating_ban"></span></div> </div> <div class="ratingTableBody ratingTableColors" ng-class="{everyoneH:highlight===\'Everyone\', questionableH:highlight===\'Questionable\', matureH:highlight===\'Mature\', banH:highlight===\'Ban\'}"> <div class="ratingFooterRow" translate="ui_rating_table_preview_info"></div> <div class="ratingTableInner"> <div class="ratingTableRow"> <div></div> <div translate="ui_rating_table_header_photographic"></div> <div translate="ui_rating_table_header_cgi"></div> </div> <div class="ratingTableRow"> <div translate="ui_rating_table_suitable_for_everyone"></div> <div class="everyone">E</div> <div class="everyone">E</div> </div> <div class="ratingTableRow"> <div translate="ui_rating_table_partial_nudity_suggestive"></div> <div class="questionable">Q</div> <div class="questionable">Q</div> </div> <div class="ratingTableRow"> <div translate="ui_rating_table_nudity_explicit"></div> <div class="ban">B</div> <div class="mature">M</div> </div> <div class="ratingTableRow"> <div translate="ui_rating_table_violence_mild_blood"></div> <div class="ban">B</div> <div class="mature">M</div> </div> <div class="ratingTableRow"> <div translate="ui_rating_table_hardcore_sexual_acts"></div> <div class="ban">B</div> <div class="ban">B</div> </div> <div class="ratingTableRow"> <div translate="ui_rating_table_excessive_gore"></div> <div class="ban">B</div> <div class="ban">B</div> </div> </div> </div> </div> '),e.put("views/templates/titlebar.html",'<div class="titlebar" ng-hide="hideTitle"> <button class="titlebarBtn closeButton" ng-click="closeWindow()"> <div class="dwm icon-close"> </div> </button> <button ng-if="!isDialog" class="titlebarBtn windowButton" ng-disabled="!maximizeEnabled" onclick="window.ui.maximize()"> <div class="dwm" ng-class="{\'icon-maximize\':!isMaximized,\'icon-window\':isMaximized}"> </div> </button> <button ng-if="!isDialog" class="titlebarBtn windowButton" onclick="window.ui.minimize()"> <div class="dwm icon-minimize"> </div> </button> <div class="titlebarBtn helpTitlebarButton"> <button ng-if="isHelpEnabled" class="titlebarBtn windowButton" ng-click="toggleHelp()"> <div class="fas fa-question questionButton"> </div> </button> </div> \x3c!-- </div> --\x3e <div class="title"> <span ng-bind="captionPrefix"></span>{{caption || \'404\' | translate}} </div> </div> '),e.put("views/templates/veccomponentinput.html",'<div ng-switch="vciMode"> <div ng-switch-when="position" class="vecComponents"> <div class="vecPositionPicker"> <a class="fas fa-crosshairs crosshairs" ng-click="pickPosition()"></a> </div> <div> <input type="number" step="0.1" onclick="this.select()" ng-model="value.x"> </div> <div> <input type="number" step="0.1" onclick="this.select()" ng-model="value.y"> </div> </div> <div ng-switch-when="linkedslider"> <div class="editorPropertySliderPropertyRow"> <span>x</span> <div> <rzslider rz-slider-model="value.x" rz-slider-options="{id:\'x\', ceil:vciOptions.max, floor:vciOptions.min, enforceStep:false, precision:2, step:0.01, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" step="0.1" onclick="this.select()" type="number" ng-model="value.x" ng-change="sendAssetPropertyChangeSliderChange(\'x\', value.x)"> </div> </div> <div class="vecLinkIcon"> <a><span class="fas fa-link" ng-class="{\'fa-unlink\':!settings.linked}" ng-click="toggleLinked()"></span></a> </div> <div class="editorPropertySliderPropertyRow"> <span>y</span> <div> <rzslider rz-slider-model="value.y" rz-slider-options="{id:\'y\', ceil:vciOptions.max, floor:vciOptions.min, enforceStep:false, precision:2, step:0.01, onStart:sendAssetPropertyChangeSliderStart, onChange:sendAssetPropertyChangeSliderChange, onEnd:sendAssetPropertyChangeSliderEnd}"></rzslider> </div> <div> <input class="fullWidth" step="0.1" onclick="this.select()" type="number" ng-model="value.y" ng-change="sendAssetPropertyChangeSliderChange(\'y\', value.y)"> </div> </div> </div> <div ng-switch-default class="vecComponents"> <div> <input type="number" step="0.1" onclick="this.select()" ng-model="value.x"> </div> <div> <input type="number" step="0.1" onclick="this.select()" ng-model="value.y"> </div> <div ng-if="vciCount >= 3"> <input type="number" step="0.1" onclick="this.select()" ng-model="value.z"> </div> <div ng-if="vciCount >= 4"> <input type="number" step="0.1" onclick="this.select()" ng-model="value.w"> </div> </div> </div> '),e.put("views/templates/workshopdetails.html",'<div class="container-fluid"> <div class="row"> <div class="col-xs-12"> <div class="form-group" ng-if="wdEditorSettings.category!=\'wallpaper\'"> <label translate="ui_editor_workshop_options_upload_as"></label> <droplist class="editorUpdateItemDropDown" dp-options="uploadProjectOptions" dp-selected="selectedUploadOption.value"></droplist> </div> </div> <div class="col-xs-6"> <div class="form-group"> <label for="workshopTitle" translate="ui_editor_workshop_options_title"></label><span class="displayInvisible requiredIndicator" translate="ui_editor_workshop_options_required"></span> <input type="text" class="form-control" id="workshopTitle" ng-model="wdProjectData.title"> </div> <div class="form-group" ng-if="!wdProjectData.lockgenre"> <label for="workshopTags" translate="ui_editor_workshop_options_genre"></label><span class="displayInvisible requiredIndicator" translate="ui_editor_workshop_options_required"></span> <droplist class="editorTagDropDown" id="workshopTags" dp-options="availableTags" dp-selected="selectedTag.tag"></droplist> </div> <div class="form-group"> <label for="workshopDescription" translate="ui_editor_workshop_options_description"></label> <textarea style="resize:none;height:115px" class="form-control" id="workshopDescription" ng-model="wdProjectData.description"></textarea> </div> <div class="form-group" ng-if="wdEditorSettings.category==\'wallpaper\'"> <label translate="ui_editor_workshop_options_scheme_color"></label> <spectrum-colorpicker class="form-control colorpicker-control" options="colorPickerOptions" ng-model="wdProjectData.general.properties.schemecolor.value" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker> </div> </div> <div class="col-xs-6"> \x3c!--             <div class="form-group">\r\n                <label for="workshopRating" translate="ui_editor_workshop_options_rating"></label>\r\n                <a ng-click=""><span class="fas fa-question-circle"></span></a>\r\n                <span class="displayInvisible requiredIndicator" translate="ui_editor_workshop_options_required"></span>\r\n                <droplist id="workshopRating" dp-options="ratingOptions" dp-selected="wdProjectData.contentrating" dp-empty-text="ui_workshop_workshop_tags_rating_not_set"></droplist>\r\n            </div> --\x3e <div class="form-group" ng-if="!wdProjectData.lockrating"> <label for="workshopRating" translate="ui_editor_workshop_options_rating"></label> <span class="displayInvisible requiredIndicator" translate="ui_editor_workshop_options_required"></span> <div class="row"> <div class="col-md-6 col-xs-5"> <span translate="{{wdProjectData.contentrating ? \'ui_workshop_tags_rating_\' + wdProjectData.contentrating.toLowerCase() : \'ui_workshop_workshop_tags_rating_not_set\'}}"></span> </div> <div class="col-md-6 col-xs-7"> <a class="btn btn-primary fullWidth pull-right" ng-click="openRatingModal(wdProjectData)" translate="ui_editor_workshop_options_rating_change"></a> </div> </div> </div> <div class="form-group"> <label for="workshopVisibility" translate="ui_editor_workshop_options_visibility"></label> <droplist id="workshopVisibility" dp-options="visibilityOptions" dp-selected="wdProjectData.visibility"></droplist> </div> <div class="form-group" ng-if="wdProjectData.type!==\'video\' && wdEditorSettings.isMonetizationEnabled || wdProjectData.monetization"> <label for="workshopMonetization" translate="ui_editor_workshop_options_monetization"></label> <checkbox id="workshopMonetization" class="editorWorkshopDetailsMonetizationCheckbox" cb-checked="wdProjectData.monetization" cb-title="\'ui_editor_workshop_options_monetization_hint_on\'"></checkbox> </div> <div class="form-group"> <label for="workshopPreviewImage" translate="ui_editor_workshop_options_preview_image"></label><span class="displayInvisible requiredIndicator" translate="ui_editor_workshop_options_required"></span> <div class="row"> <div class="col-xs-5"> <div class="text-center editorWorkshopDetailsPreviewImage"> <div ng-if="!previewRefreshUrl" translate="ui_editor_workshop_options_missing"></div> <img ng-if="previewRefreshUrl" ng-src="{{previewRefreshUrl}}"> </div> </div> <div class="col-md-1"></div> <div class="col-md-6 col-xs-7 editorWorkshopDetailsPreviewImageControls"> <button class="btn btn-primary fullWidth" ng-disabled="wdProjectData.type.toLowerCase()==\'application\'" ng-click="takeSnapshot()" translate="ui_editor_workshop_options_preview_take_snapshot"></button> <button class="btn btn-primary fullWidth" ng-click="importSnapshot()" translate="ui_editor_workshop_options_preview_import_file"></button> </div> </div> </div> </div> </div> </div> '),e.put("views/views/browsewallpapers.html",'<div class="clientArea" native-drop-target="dropFile(droppedFiles)"> <div class="browseWallpaperBrowseContainer"> <div class="browseWallpaperBrowseContainerLeft"> <div class="browseWallpaperBrowseContainerLeftTop"> <div class="browseWallpaperMonitorHeader" ng-if="showMonitorRow"> <div class="browseWallpaperMonitorChangeButton"> <a ng-click="toggleMonitorSelection()"><h1> {{getMonitorHeader()}} {{\'ui_browse_monitor\' | translate}} {{selectedMonitor.index + 1}} {{selectedMonitor.isSplit ? (\'ui_browse_split\' | translate) + \' \' + selectedMonitor.splitIndex: \'\'}} </h1><span translate="ui_browse_choose_monitor"></span></a> </div> </div> <div class="browseWallpaperSourceContainer"> <div class="sourceBox" style="position: relative"> <script type="text/ng-template" id="exploreAdvertiseTemplate.html"> <div ng-click="setListSource(\'explore\')" translate="ui_browse_advertise_explore"></div> <\/script> <script type="text/ng-template" id="workshopAdvertiseTemplate.html"> <div ng-click="setListSource(\'workshop\')" translate="ui_browse_advertise_workshop"></div> <\/script> <a ng-click="setListSource(\'installed\')" class="btn-primary browserSourceButton" ng-class="{\'sourceOverrideActive\':source==\'installed\'}"><span class="fas fa-save"></span> <span translate="ui_browse_list_source_installed"></span></a> <a ng-click="setListSource(\'explore\')" class="btn-primary browserSourceButton" ng-class="{\'sourceOverrideActive\':source==\'explore\', \'advertiseWorkshop\':browserSettings.advertiseexplore&&!steamWorkshopStatus.error}"><span class="fas fa-compass"></span> <span translate="ui_browse_list_source_explore" uib-popover-template="\'exploreAdvertiseTemplate.html\'" popover-placement="bottom" popover-is-open="browserSettings.advertiseexplore && canAdvertiseAny && canAdvertiseWorkshop" popover-trigger="none" popover-class="popoverAdvertiseWorkshop" popover-append-to-body="true"></span></a> <a ng-click="setListSource(\'workshop\')" class="btn-primary browserSourceButton" ng-class="{\'sourceOverrideActive\':source==\'workshop\', \'advertiseWorkshop\':browserSettings.advertiseworkshop&&!steamWorkshopStatus.error}" uib-popover-template="\'workshopAdvertiseTemplate.html\'" popover-placement="right" popover-is-open="browserSettings.advertiseworkshop && canAdvertiseAny && canAdvertiseWorkshop" popover-trigger="none" popover-class="popoverAdvertiseWorkshop" popover-append-to-body="true"><span class="fab fa-steam"></span> <span translate="ui_browse_list_source_workshop"></span></a> </div> <div class="controls"> <span class="other"><a ng-click="callbackShowEditor()" tooltip="ui_browse_header_option_editor"><span class="fas fa-pencil-ruler"></span></a> </span> <span class="other"><a ng-click="toggleMonitorSelection()" tooltip="ui_browse_header_option_monitors"><span class="fas fa-desktop"></span></a> </span> <span class="last"><a ng-click="callbackShowSettings()" tooltip="ui_browse_header_option_settings"><span class="fas fa-cog"></span></a> </span> </div> </div> <div class="browsePresetAlert ng-hide" ng-show="sourceIsWorkshop && filterPreset.workshopid"> <uib-alert class="alert-warning" close="callbackClearPresetFilter()"> <div translate="ui_browse_preset_filter_notice" translate-values="{title:filterPreset.title}"></div> </uib-alert> </div> <div class="browseWallpaperSearchContainer" ng-if="!sourceIsExplore"> <div class="form-group has-feedback browseWallpaperSearchContainerSearchField"> <div ng-class="{\'input-group\':filter.text}"> <input id="browseSearchFilterText" type="text" class="form-control" placeholder="{{\'ui_browse_search_placeholder\' | translate}}" ng-model="filter.text" ng-model-options="{debounce:100}"> <span class="glyphicon glyphicon-search form-control-feedback" aria-hidden="true"></span> <div class="input-group-btn"> <button ng-if="filter.text" class="btn btn-danger" ng-click="resetSearchFilter()"> <i class="glyphicon glyphicon-remove"></i> </button> </div> </div> </div> <div> <a ng-click="showFilter.visible=!showFilter.visible"> <span class="filterLabel" translate="ui_browse_filter_results"></span> <span ng-if="showFilter.counts && !sourceIsWorkshop && (steamWorkshopStatus.complete || steamWorkshopStatus.error)" class="browseFilterActiveClass" translate="ui_browse_filter_results_count" translate-values="{filtered:filteredCount, unfiltered:unfilteredCount}"></span> <span ng-if="showFilter.counts && sourceIsWorkshop && (steamWorkshopStatus.complete || steamWorkshopStatus.error)" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> <span class="glyphicon glyphicon-filter filterIcon"></span> </a> </div> <div class="browseWallpaperSearchContainerFill"> </div> <div class="browseWallpaperSearchContainerSort"> \x3c!-- <span class="sortLabel" translate="ui_browse_sort_by"></span> --\x3e <span style="cursor: pointer" class="glyphicon" ng-class="{\'glyphicon-triangle-bottom\': filter.descending, \'glyphicon-triangle-top\': !filter.descending}" ng-click="filter.descending=!filter.descending" ng-if="!sourceIsWorkshop"></span> <droplist dp-options="sortOptions" dp-selected="filter.sort"></droplist> </div> </div> <div class="browseWallpaperSearchContainer" ng-if="sourceIsExplore"> <div class="browseExploreRow"> <a ng-visible="exploreNavigation.length>1" ng-click="popExplorePage()"><span class="fas fa-arrow-circle-left browseExploreIcon browseExploreBackIcon"></span></a> <span ng-show="!exploreNavigation[0].key" class="exploreQueryTitle"> <explorequerytitle eqt-query="exploreNavigation[0]" eqt-user-info="steamUserInfos"></explorequerytitle> <explorequeryactions eqt-query="exploreNavigation[0]" eqt-settings="browserSettings.explore" eqt-callbacks="{like:exploreLikedCallback,remove:exploreCustomRemoveCallback}"></explorequeryactions> </span> <span ng-show="exploreNavigation[0].key" class="browseExploreTitle">{{exploreNavigation[0].title | translate}}</span> <span ng-show="exploreNavigation.length==1"> <a class="btn btn-default browseExploreTextIcon" ng-click="pushExplorePage({title:\'ui_browse_explore_favorites\', key: \'favorites\'})" tooltip="ui_browse_explore_favorites"> <span translate="ui_browse_explore_favorites"></span> </a> </span> <span ng-show="exploreNavigation[0].key==\'favorites\'"> <a class="btn btn-default browseExploreIcon" ng-click="addExploreCustomFavoriteQuery()"><span class="fas fa-plus fa-fw"></span></a> </span> </div> </div> <div class="browseWallpaperGridParent"> <div class="browseWallpaperGridContainerParent"> <div class="browseWallpaperFilter ng-hide" ng-show="showFilter.visible && !sourceIsExplore"> <div> <div style="display:flex;justify-content: flex-end"> <a ng-if="sourceIsWorkshop" ng-click="showWorkshopAdvertiseModal(true)" style="font-size: 120%; padding: 2px 8px 0px 0px"><span class="fas fa-question"></span></a> <a ng-click="callbackResetFilter()" style="font-size: 120%; padding: 3px 8px 0px 0px"><span class="fas fa-sync-alt"></span></a> <a ng-click="showFilter.visible=false" style="font-size: 140%; padding-right: 10px"><span class="fas fa-times dangerText"></span></a> </div> \x3c!-- TYPES --\x3e <div ng-if="!filterPreset.workshopid"> <div class="filterHeader browseFilterToggle" ng-click="filterHideTypes=!filterHideTypes"> <span ng-if="filterHideTypes" class="fas fa-fw fa-caret-down"></span> <span ng-if="!filterHideTypes" class="fas fa-fw fa-caret-right"></span> <span translate="ui_browse_filter_type"></span> <span ng-if="filterStatus.type" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-show="filterHideTypes"> <div class="filterItem" ng-repeat="tag in filterCategoryTags"> <checkbox cb-checked="filter.categorytags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="filterDivider"></div> <div class="filterItem" ng-repeat="tag in filterTypeTags"> <checkbox cb-checked="filter.typetags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- RATING --\x3e <div class="filterHeader browseFilterToggle" ng-click="filterHideRating=!filterHideRating"> <span ng-if="filterHideRating" class="fas fa-fw fa-caret-down"></span> <span ng-if="!filterHideRating" class="fas fa-fw fa-caret-right"></span> <span translate="ui_workshop_workshop_tags_rating"></span> <span ng-if="filterStatus.rating" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-show="filterHideRating"> <div class="filterItem" ng-repeat="tag in filterRatingTags"> <checkbox cb-checked="filterProxy.ratingtags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> \x3c!-- RESOLUTION --\x3e <div ng-if="!filterPreset.workshopid"> <div class="filterHeader browseFilterToggle" ng-click="filterHideResolution=!filterHideResolution"> <span ng-if="filterHideResolution" class="fas fa-fw fa-caret-down"></span> <span ng-if="!filterHideResolution" class="fas fa-fw fa-caret-right"></span> <span translate="ui_browse_filter_resolution"></span> <span ng-if="filterStatus.resolution" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-show="filterHideResolution"> <div class="filterItem filterMultiButtons"> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleResolutionFilter($event, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem" ng-repeat="tag in filterResolutionTags"> <checkbox cb-checked="filter.resolutiontags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- SOURCE --\x3e <div ng-if="!sourceIsWorkshop"> <div class="filterHeader browseFilterToggle" ng-click="filterHideSource=!filterHideSource"> <span ng-if="!filterHideSource" class="fas fa-fw fa-caret-down"></span> <span ng-if="filterHideSource" class="fas fa-fw fa-caret-right"></span> <span translate="ui_browse_filter_source"></span> <span ng-if="filterStatus.source" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-hide="filterHideSource"> <div class="filterItem" ng-repeat="tag in filterSourceTags"> <checkbox cb-checked="filter.sourcetags[tag.value]" cb-title="tag.label"></checkbox> </div> <div class="browseFilterBottomPadding"></div> </div> </div> \x3c!-- GENRES --\x3e <div class="filterHeader browseFilterToggle" ng-click="filterHideGenres=!filterHideGenres"> <span ng-if="!filterHideGenres" class="fas fa-fw fa-caret-down"></span> <span ng-if="filterHideGenres" class="fas fa-fw fa-caret-right"></span> <span class="filterHeader" translate="ui_browse_filter_tags"></span> <span ng-if="filterStatus.tags" class="browseFilterActiveClass" translate="ui_browse_filter_results_filtered"></span> </div> <div class="browseFilterHide" ng-hide="filterHideGenres"> <div class="filterItem" ng-repeat="tag in filterUtilityTags"> <checkbox cb-type="tag" cb-checked="filter.utilitytags[tag.value]" cb-title="tag.label"></checkbox><span ng-if="tag.value==\'Approved\'" class="fas fa-trophy browseWallpaperApproved"></span> </div> <div class="filterDivider"></div> <div class="filterItem filterMultiButtons"> <a class="" ng-if="sourceIsWorkshop" ng-click="showWorkshopAdvertiseModal(true, $event)"><span translate="ui_browse_filter_suggestions"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleGenreFilter($event, true)"><span translate="ui_browse_filter_all"></span></a> <a class="filterMultiBtn" ng-click="callbackToggleGenreFilter($event, false)"><span translate="ui_browse_filter_none"></span></a> </div> <div class="filterItem" ng-repeat="tag in filterAllTags"> <checkbox cb-checked="filter.tags[tag.value]" cb-title="tag.label"></checkbox> </div> </div> </div> </div> <div class="browseWallpaperGridAndNavigationView" ng-show="!sourceIsExplore || !exploreNavigation[0].key"> <div class="browseFolderNavigation" ng-class="{visible:sourceIsInstalled && currentFolder}"> <a class="item itemUpArrow fas fa-arrow-circle-up" ng-click="navigateFolderUp()"></a> <a class="item" ng-click="navigateFolder()" translate="ui_browse_navigation_top"></a> <span ng-repeat="folder in folderNavigation"><span class="item">&gt;</span><a class="item" ng-click="navigateFolder(folder)">{{folder.title}}</a></span> </div> <div class="browseWallpaperGridView"> <div ng-if="sortedWallpapers.length == 0 && sortedFolders.length == 0" class="emptyGrid"> <span ng-class="{\'emptyGridDanger\':showErrorInBackground}" ng-bind-html="queryActive ? \'ui_browse_grid_no_results_refreshing\' : showErrorInBackground ? \'ui_browse_no_service_body\' : \'ui_browse_grid_no_results\' | translate"></span> <div ng-if="!queryActive && showErrorInBackground" style="margin-top:20px"> <a class="btn btn-default btn-lg" ng-click="callbackChangePage(currentPage, true)"><span class="fas fa-sync-alt"></span> <span translate="ui_browse_reload"></span></a> </div> <div class="wpAnim" ng-if="queryActive"> <img class="offset" src="images/wp_logo_blue_outer_rect.png"> <img class="spin" src="images/wp_logo_blue_inner_rect.png"> </div> </div> <wallpaper-thumbnail class="wallpaperBrowseInner" wt-wallpapers="sortedWallpapers" wt-folders="sortedFolders" wt-wallpaper-flags="selectedMonitor.playlistFlags" wt-selection="currentSelection" wt-multiselection="multiSelection" wt-flagcallback="callbackToggleAllWallpapersInCurrentMonitorPlaylist(wallpaper)" wt-mousecallback="callbackWallpaperAllMouse(btn, context, $event)" wt-selectioncallback="callbackWallpaperSelectionRectangle(items, $event)" wt-enabledragdrop="!sourceIsWorkshop" ng-class="\'browseViewSize\' + browserSettings.viewiconsize" id="BrowseWallpaperGrid" wt-tag="source"></wallpaper-thumbnail> </div> </div> <div class="browseWallpaperGridAndNavigationView" ng-show="sourceIsExplore && exploreNavigation[0].key" intersectionhandler ish-sentinel="#ExploreViewSentinel" ish-callback="exploreScrollSentinelChanged(visible)"> <div class="browseWallpaperGridView"> <div class="wallpaperBrowseInner exploreList" ng-show="exploreNavigation[0].key"> <div ng-repeat="query in sortedExploreQueries" class="browseExploreQueryRow"> <div class="browseExploreQueryControls"> <explorequerytitle eqt-query="query" eqt-user-info="steamUserInfos"></explorequerytitle> </div> <div ng-if="query.loading"> <div class="wpAnim"> <img class="spin" src="images/wp_logo_blue_inner_rect.png"> </div> <div class="exploreQueryLoadingLabel" translate="ui_browse_grid_no_results_refreshing"></div> </div> <div ng-if="query.showError"> <span class="emptyGridDanger" ng-bind-html="\'ui_browse_no_service_body\' | translate"></span> <a class="btn btn-default btn-lg" ng-click="performExploreQuery(query)"><span class="fas fa-sync-alt"></span> <span translate="ui_browse_reload"></span></a> </div> <div class="browseExploreQueryWallpaperBox" ng-class="{disliked:browserSettings.explore.disliked.includes(query.name)}"> <div class="browseExploreQueryWallpapers" ng-if="query.wallpapers.length > 0" explorescroll> <div class="exploreArrow exploreArrowLeft"> <span class="fas fa-chevron-left chevronIcon"></span> </div> <div class="exploreArrow exploreArrowRight"> <span class="fas fa-chevron-right chevronIcon"></span> </div> <div class="browseExploreQueryScroll"> <wallpaper-thumbnail class="wallpaperQueryList" wt-wallpapers="query.wallpapers" wt-wallpaper-flags="selectedMonitor.playlistFlags" wt-selection="currentSelection" wt-multiselection="multiSelection" wt-flagcallback="callbackToggleAllWallpapersInCurrentMonitorPlaylist(wallpaper)" wt-mousecallback="callbackWallpaperAllMouse(btn, context, $event)" wt-selectioncallback="callbackWallpaperSelectionRectangle(items, $event)" wt-enabledragdrop="false" ng-class="\'browseViewSize\' + browserSettings.viewiconsize" wt-tag="\'discover\'"></wallpaper-thumbnail> </div> </div> </div> <div class="browseExploreQueryFooter" ng-if="!query.loading"> <explorequeryactions eqt-query="query" eqt-settings="browserSettings.explore" eqt-callbacks="{pushExplorePage:pushExplorePage,like:exploreLikedCallback,remove:exploreCustomRemoveCallback}"></explorequeryactions> <div ng-if="!browserSettings.explore.hasLikedAny && !query.custom" class="exploreVotePrompt warningText"> <span class="fas fa-fw fa-arrow-up exploreIcon warningText"></span> <span translate="ui_browse_explore_prompt_to_vote"></span> </div> </div> </div> <div id="ExploreViewSentinel" class="exploreViewSentinel"></div> </div> </div> </div> </div> <div class="browseWallpaperPagination" ng-show="pagination.visible"> <div> <span><a class="fas fa-angle-double-left paginationIcon" ng-click="callbackChangePage(\'prev\')"></a></span> <span ng-repeat="page in pagination.pages"><a ng-click="callbackChangePage(page.label)" ng-class="{\'{{page.class}}\':true, \'linkOverrideActive\':page.label==pagination.current}">{{page.label}}</a></span> <span><a class="fas fa-angle-double-right paginationIcon" ng-click="callbackChangePage(\'next\')"></a></span> </div> </div> <div class="browseWallpaperGridPlaylistParent" ng-class="{playlistShow:selectedMonitor.playlist.items.length>0||isDragDropActive,playlistDaytime:selectedMonitor.playlist.settings.mode === \'daytime\'}"> <div class="browseWallpaperGridPlaylistParentChild"> <div class="browseWallpaperGridPlaylistHeader"> <h3>{{\'ui_browse_playlist_header\'|translate}} ({{selectedMonitor.playlist.items.length}})</h3> <span style="align-self: center"> <a ng-click="callbackShowPlaylists()"><span class="fas fa-folder-open playlistCtrlBtnFirst"></span></a> <a ng-click="callbackShowPlaylists(true)"><span class="fas fa-save playlistCtrlBtn playlistNotEmpty"></span></a> <a ng-click="callbackShowPlaylistSettings()"><span class="fas fa-cogs playlistCtrlBtn playlistNotEmpty"></span></a> <a ng-if="!selectedMonitor.playlistFlags[currentSelection.file]" ng-click="callbackToggleAllWallpapersInCurrentMonitorPlaylist(currentSelection)"><span class="fas fa-plus playlistCtrlBtnEnd"></span></a> <a ng-if="selectedMonitor.playlistFlags[currentSelection.file]" ng-click="callbackToggleAllWallpapersInCurrentMonitorPlaylist(currentSelection)"><span class="fas fa-minus playlistCtrlBtnEnd"></span></a> </span> <span style="align-self: center;flex-grow:1"> <a ng-click="callbackClearPlaylist()"><span style="font-size:140%;float:right" class="fas fa-times dangerText playlistResetBtn playlistNotEmpty"></span></a> </span> </div> <div class="browseWallpaperPlaylist" id="PlaylistContainer"> <div class="browseWallpaperPlaylistRow" ng-attr-style="min-width:{{52 * selectedMonitor.playlist.items.length}}px"> <div ng-if="selectedMonitor.playlist.settings.mode === \'daytime\'" class="playlistTimeline" id="PlaylistContainerTimeline"> <div class="playlistTimelineFixed"> <div class="timelineParent"><span class="timelineChild">{{1 | date : getTimelineFormat() : \'+0000\'}}</span></div> <div class="timelineParent"><span class="timelineChild">{{(1000*60*60*6) | date : getTimelineFormat() : \'+0000\'}}</span></div> <div class="timelineParent"><span class="timelineChild">{{(1000*60*60*12) | date : getTimelineFormat() : \'+0000\'}}</span></div> <div class="timelineParent"><span class="timelineChild">{{(1000*60*60*18) | date : getTimelineFormat() : \'+0000\'}}</span></div> <div class="timelineParent"><span class="timelineChild">{{(1000*60*60*24-1000*60) | date : getTimelineFormat() : \'+0000\'}}</span></div> </div> </div> <div class="playlistWallpaperContainer" id="PlaylistContainerRow"> <div ng-repeat="entry in selectedMonitor.playlist.items track by $index" class="browseWallpaperPlaylistImage" ng-attr-style="flex-grow:{{entry.flex || 1}}" ng-class="{selected:entry.wallpaper===currentSelection}" ng-click="callbackWallpaperSelected(entry.wallpaper)"> <div class="browseWallpaperPlaylistImageChild" ng-attr-style="background: url(\'{{entry.wallpaper.preview}}\'), rgba(127,127,127,0.1)"> <a class="trashIcon" ng-click="callbackToggleEntryInCurrentMonitorPlaylist(entry, true);callbackCancelEvent($event);"><span class="fas fa-times"></span></a> <div class="presetName" ng-if="entry.preset">{{entry.preset}}</div> <div class="selectBorder"></div> <div class="daytimeDragBorder"></div> <div class="playlistTimelineMarker" ng-if="entry.daytimeend > 0"></div> </div> </div> </div> </div> </div> </div> </div> </div> </div> <div class="browseWallpaperDetailView"> <div ng-if="!currentSelection" class="placeholder" translate="ui_browse_select_prompt"> </div> <div ng-if="currentSelection" class="details"> <div class="previewContainer"> <div ng-if="currentSelection.youtube && preview.play" class="browseWallpaperYoutubeEmbed"> <iframe ng-src="{{currentSelection.youtube}}" onload="youtubeLoaded(this)"> </iframe> </div> <div ng-if="!currentSelection.youtube || !preview.play"> <img ng-src="{{currentSelection.preview}}" class="previewImage"> <div class="youtubePlayOverlay" ng-show="currentSelection.youtube"> <a ng-click="preview.play = true"> <div> <span class="fas fa-play-circle playButton"></span> </div> </a> </div> </div> </div> <div class="info"> <div> <div translate="ui_browse_details_title"> </div> <div> {{currentSelection.title}} </div> </div> <div ng-if="!currentSelection.local"> <div translate="ui_browse_details_author"> </div> <div> <img ng-if="steamUserInfos[currentSelection.authorsteamid]" ng-src="{{steamUserInfos[currentSelection.authorsteamid].avatar}}" class="avatar"> <img ng-if="!steamUserInfos[currentSelection.authorsteamid]" src="images/noavatar.jpg" class="avatar"> <a ng-if="steamUserInfos[currentSelection.authorsteamid]" ng-click="openSteamUserPage(currentSelection.authorsteamid)">{{steamUserInfos[currentSelection.authorsteamid].name}}</a> <span ng-if="!steamUserInfos[currentSelection.authorsteamid]">{{currentSelection.author || (\'ui_browse_details_author_pending\' | translate)}}</span> </div> </div> <div> <div translate="ui_browse_details_type"> </div> <div> {{currentSelection.type}} <span ng-if="currentSelection.filesizelabel">{{currentSelection.filesizelabel}}</span> </div> </div> <div ng-if="currentSelection.tags"> <div translate="ui_browse_details_tags"> </div> <div> {{getDisplayTags(currentSelection.tags)}} </div> </div> <div ng-if="currentSelection.hasrating" class="browseWallpaperDetailsWorkshopRateRow"> <div translate="ui_browse_details_rating"> </div> <div> <div class="browseWallpaperDetailsWorkshopRateRowRating" ng-class="{\'disabled\':currentSelection.ratingrounded < 1}"> <div> <span class="browseWallpaperDetailsWorkshopRateRowRatingStars"> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':currentSelection.ratingrounded < 1,\'glyphicon-star\':currentSelection.ratingrounded >= 1}"></span> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':currentSelection.ratingrounded < 2,\'glyphicon-star\':currentSelection.ratingrounded >= 2}"></span> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':currentSelection.ratingrounded < 3,\'glyphicon-star\':currentSelection.ratingrounded >= 3}"></span> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':currentSelection.ratingrounded < 4,\'glyphicon-star\':currentSelection.ratingrounded >= 4}"></span> <span class="glyphicon" ng-class="{\'glyphicon-star-empty\':currentSelection.ratingrounded < 5,\'glyphicon-star\':currentSelection.ratingrounded >= 5}"></span> </span> </div> <div class="browseWallpaperDetailsWorkshopRateRowRatingButtons"> <span class="browseWallpaperDetailsWorkshopRateRowRatingButtonsLeft"> <a class="btn" ng-class="currentSelection.uservote===\'up\'?\'btn-primary\':\'btn-default\'" ng-click="setUserVote(currentSelection, \'up\')"><span class="fas fa-thumbs-up"></span> <span class="rateUpLabel" translate="ui_browse_details_rate"></span></a> <a class="btn" ng-class="currentSelection.uservote===\'down\'?\'btn-primary\':\'btn-default\'" ng-click="setUserVote(currentSelection, \'down\')"><span class="fas fa-thumbs-down"></span></a> </span> <span class="browseWallpaperDetailsWorkshopRateRowRatingButtonsRight"> <a class="btn" ng-class="currentSelection.favorite?\'btn-primary\':\'btn-default\'" ng-click="callbackSetFavorited(currentSelection, !currentSelection.favorite)"><span class="fas fa-star"></span></a> </span> </div> </div> </div> </div> </div> <div class="detailButtons" ng-if="currentSelection.workshopid"> <div class="browseWallpaperDetailsWorkshopControls"> <a ng-if="currentSelection.status !== \'downloadable\'" ng-click="callbackUnsubscribeOrRemove(currentSelection)" class="btn btn-danger"> <span class="fas fa-times" aria-hidden="true"></span> {{\'ui_browse_details_btn_unsubscribe\' | translate}} </a> <a ng-if="currentSelection.status === \'downloadable\'" ng-click="subscribeWorkshopItem(currentSelection)" class="btn btn-success"> <span class="fas fa-download" aria-hidden="true"></span> {{\'ui_browse_details_btn_download\' | translate}} </a> <div class="smallRow"> <a ng-click="openSteamWorkshopPage(currentSelection.workshopid)" class="btn btn-default" tooltip="ui_browse_details_btn_workshop" t-align-right="true"> <span class="fab fa-steam" aria-hidden="true"></span> </a> <a ng-click="openReportDialog(currentSelection)" class="btn btn-default" tooltip="ui_browse_details_btn_report" t-align-right="true"> <span class="fas fa-exclamation-triangle" aria-hidden="true"></span> </a> </div> </div> </div> <div class="detailButtons" ng-if="currentSelection.localAndExternal || currentSelection.official"> <a ng-click="callbackUnsubscribeOrRemove(currentSelection)" class="btn btn-danger"> <span class="fas fa-times" aria-hidden="true"></span> {{\'ui_browse_details_btn_remove_from_history\' | translate}} </a> </div> <div ng-if="currentSelection.status == \'installed\'" class="browseWallpaperDetailsProperties"> <div class="browseWallpaperDetailsHeader"> <h5 class="browseWallpaperDetailsHeaderItem" translate="ui_browse_details_properties"></h5> <hr class="browseWallpaperDetailsHeaderDivider"> </div> <div> <div class="settingsWallpaperProperty" ng-repeat="property in currentSelection.properties[selectedMonitor.location] | orderObjectBy:\'order\' track by $index" ng-if="!property.condition || evalCondition(property.condition)"> <div class="browsePropertyLabel" translate="{{property.text | san}}"></div> <div ng-if="property.type===\'color\'"> <spectrum-colorpicker vec-color-converter options="colorPickerOptions" ng-model="property.value" on-change="callbackWallpaperPropertyChanged(property.key, property)" on-show-options="{update:false}"></spectrum-colorpicker> </div> <div ng-if="property.type==\'bool\'"> <checkbox cb-checked="property.value" cb-changed="callbackWallpaperPropertyChanged(property.key, property)"></checkbox> </div> <div ng-if="property.type==\'textinput\'"> <input type="text" ng-model="property.value" ng-change="callbackWallpaperPropertyChanged(property.key, property)"> </div> <div ng-if="property.type==\'slider\'"> <rzslider rz-slider-model="property.value" rz-slider-options="{ceil:property.max, floor:property.min, enforceStep:false, onChange:callbackWallpaperPropertyChanged(property.key, property)}"></rzslider> <span class="sliderValue"> <span ng-if="!property.editable">{{property.value}}</span> <input ng-if="property.editable" class="fullWidth" type="number" ng-model="property.value"> </span> </div> <div ng-if="property.type==\'combo\'" class="smallDropList"> <droplist dp-options="property.options" dp-selected="property.value" dp-change="callbackWallpaperPropertyChanged(property.key, property)"></droplist> </div> <div ng-if="property.type==\'directory\'" class="userImport"> <div class="importPath">{{(property.value || \'ui_browse_details_properties_nothing_imported\') | filename | translate}}</div> <div> <a class="btn btn-default" ng-click="callbackSelectFileForProperty(property, \'directory\')"> <span class="glyphicon glyphicon-import" aria-hidden="true"></span> <span ng-if="!property.value" class="userImportBtn" translate="ui_browse_details_properties_select_directory"></span> </a> <span ng-if="property.value"> <a class="btn btn-default" ng-click="callbackOpenDirectory(property.value)"> <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> </a> <a class="btn btn-danger" ng-click="callbackRemoveFileForProperty(property)"> <span class="fas fa-fw fa-times" aria-hidden="true"></span> </a> </span> </div> </div> <div ng-if="property.type==\'file\'" class="userImport"> <div class="importPath">{{(property.value || \'ui_browse_details_properties_nothing_imported\') | filename | translate}}</div> <div> <a class="btn btn-default" ng-click="callbackSelectFileForProperty(property, \'file\')"> <span class="glyphicon glyphicon-import" aria-hidden="true"></span> <span ng-if="!property.value" class="userImportBtn" translate="ui_browse_details_properties_select_file"></span> </a> <span ng-if="property.value"> <a class="btn btn-default" ng-click="callbackOpenDirectory(property.value)"> <span class="glyphicon glyphicon-folder-open" aria-hidden="true"></span> </a> <a class="btn btn-danger" ng-click="callbackRemoveFileForProperty(property)"> <span class="fas fa-fw fa-times" aria-hidden="true"></span> </a> </span> </div> </div> </div> </div> <div ng-if="showPresetPublishOptions(currentSelection)"> <div class="browseWallpaperDetailsHeader"> <h5 class="browseWallpaperDetailsHeaderItem" translate="ui_browse_details_header_workshop"></h5> <hr class="browseWallpaperDetailsHeaderDivider"> </div> <div class="browseWallpaperDetailsActions"> <div class="browseWallpaperDetailsActionsRow"> <button class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackBrowsePresets(currentSelection)" tooltip="ui_browse_details_properties_preset_browse_workshop" t-values="{count:getNumberOfWorkshopPresets(currentSelection)}" t-align-right="true"><span class="fab fa-fw fa-steam"></span> <span class="browseWallpaperDetailsActionsRowItemLabel" translate="ui_browse_details_properties_preset_browse_workshop" translate-values="{count:getNumberOfWorkshopPresets(currentSelection)}"></span></button> <button class="btn btn-default browseWallpaperDetailsActionsRowItem browseWallpaperDetailsActionsRowItemSmall" ng-click="callbackShowPresetHint()"><span class="fas fa-fw fa-question"></span></button> </div> <div class="browseWallpaperDetailsActionsRow"> <button class="btn btn-primary browseWallpaperDetailsActionsRowItem" ng-click="callbackPublishPreset()"><span class="fas fa-fw fa-share"></span> {{\'ui_browse_details_properties_preset_publish_to_workshop\'|translate}}</button> </div> </div> </div> <div class="browseWallpaperDetailsHeader"> <h5 class="browseWallpaperDetailsHeaderItem" translate="ui_browse_details_header_presets"></h5> <hr class="browseWallpaperDetailsHeaderDivider"> </div> <div class="browseWallpaperDetailsActions"> <div class="browseWallpaperDetailsActionsRow"> \x3c!-- load / save --\x3e <button class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackLoadWallpaperProperties()" tooltip="ui_browse_details_properties_load" t-align-right="true"><span class="fas fa-fw fa-folder-open"></span> <span class="browseWallpaperDetailsActionsRowItemLabel">{{\'ui_browse_details_properties_load\'|translate}}</span></button> <button class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackSaveWallpaperProperties()" tooltip="ui_browse_details_properties_save" t-align-right="true"><span class="fas fa-fw fa-save"></span> <span class="browseWallpaperDetailsActionsRowItemLabel">{{\'ui_browse_details_properties_save\'|translate}}</span></button> </div> <div class="browseWallpaperDetailsActionsRow"> \x3c!-- share json --\x3e <button class="btn btn-default browseWallpaperDetailsActionsRowItem" ng-click="callbackShareWallpaperProperties()"><span class="fas fa-fw fa-retweet"></span> {{\'ui_browse_details_properties_share_json\'|translate}}</button> </div> <div class="browseWallpaperDetailsActionsRow"> \x3c!-- reset --\x3e <button class="btn btn-danger browseWallpaperDetailsActionsRowItem" ng-click="callbackResetCurrentWallpaperProperties()"><span class="fas fa-fw fa-sync-alt"></span> {{\'ui_browse_details_properties_reset\'|translate}}</button> </div> </div> </div> </div> </div> </div> <div class="browseWallpaperFooter"> <div> <div class="navigationControls controlFlex"> <div> <button type="button" class="btn btn-primary browseSteamWorkshopButtonDropdown" ng-click="callbackShowEditor()"> <span class="fas fa-file" aria-hidden="true"></span> {{\'ui_browse_footer_btn_create_wallpaper\' | translate}} </button> <a class="btn btn-primary" onclick="window.ui.shellexecute(\'http://store.steampowered.com/itemstore/431960\')" style="width: 148px"> <span class="fas fa-shopping-cart" aria-hidden="true"></span> {{\'ui_browse_footer_btn_store\' | translate}} </a> </div> <div> <a class="btn btn-default" ng-click="openFromFile()" style="width: 148px"> <span class="glyphicon glyphicon-open" aria-hidden="true"></span> {{\'ui_browse_footer_btn_open_from_file\' | translate}} </a> <a class="btn btn-default" ng-click="openFromUrl()" style="width: 148px"> <span class="fas fa-globe" aria-hidden="true"></span> {{\'ui_browse_footer_btn_open_from_url\' | translate}} </a> </div> </div> <div class="social"> <a onclick="window.ui.shellexecute(\'http://steamcommunity.com/games/431960\')"><span class="fab fa-steam-square"></span></a> <a onclick="window.ui.shellexecute(\'http://twitter.com/wallpapereng\')"><span class="fab fa-twitter-square"></span></a> <a onclick="window.ui.shellexecute(\'http://www.facebook.com/wallpaperengine/\')"><span class="fab fa-facebook-square"></span></a> </div> <div> <div class="controls footerButtons"> <a class="btn btn-primary" ng-click="callbackOk()" translate="ui_ok"></a> <a class="btn btn-default" ng-click="callbackClose()" translate="ui_cancel"></a> </div> </div> </div> </div> </div> <div class="browseMonitorSelectionContainer" ng-hide="!changeMonitorActive"> <div class="backdrop"></div> <div class="monitorModalOuter" onclick="if(this===window.event.target){angular.element(this).scope().toggleMonitorSelection();angular.element(this).scope().$apply();}"> <div class="inner"> <div class="row"> <a class="closeSelection" ng-click="toggleMonitorSelection()"><h3><span class="glyphicon glyphicon-chevron-up"></span></h3></a> </div> <div class="row"> <div class="col-xs-12"> <h1 class="monitorHeader" translate="ui_browse_monitors_choose_monitor"></h1> </div> </div> <div class="row" style="margin-top: 10px"> <div class="col-xs-3"> </div> <div class="col-xs-9 monitorLayoutSaveRow"> <a class="btn btn-default monitorLayoutRowItem" tooltip="ui_browse_monitors_load_profile" ng-click="callbackShowProfiles()"><span class="fas fa-fw fa-folder-open"></span></a> <a class="btn btn-default monitorLayoutRowItem" tooltip="ui_browse_monitors_save_profile" ng-click="callbackShowProfiles(true)"><span class="fas fa-fw fa-save"></span></a> </div> </div> <div class="row" style="margin-bottom: 30px;margin-top: 5px"> <div class="col-xs-3" translate="ui_browse_monitors_layout"> </div> <div class="col-xs-9 monitorLayoutRow"> <droplist class="monitorLayoutRowItem" dp-options="layouts" dp-selected="wallpaperConfig.layout"></droplist> <span class="monitorLayoutRow monitorLayoutRowItem" ng-show="wallpaperConfig.layout === 0"> <a class="btn btn-default monitorLayoutRowItem" tooltip="ui_browse_monitors_split" ng-if="!selectedMonitor.isGroup && !selectedMonitor.isInGroup" ng-click="callbackSplitSelectedMonitor(selectedMonitor)"><span class="fas fa-fw fa-cut"></span></a> \x3c!-- Remove group button --\x3e <a class="btn btn-danger monitorLayoutRowItem" ng-if="selectedMonitor.isGroup || selectedMonitor.isInGroup" ng-click="callbackRemoveGroup(selectedMonitor)" tooltip="ui_browse_monitors_ungroup"><span class="fas fa-fw fa-object-ungroup"></span></a> \x3c!-- Group extend button, no drop down --\x3e <button class="btn btn-default dropdown-toggle monitorLayoutRowItem" ng-if="!selectedMonitor.isSplit && selectedMonitor.isGroup" ng-class="{\'active\':monitorSelectionState.createGroup}" ng-disabled="monitors.length < 2" tooltip="ui_browse_monitors_group" data-toggle="dropdown" ng-click="monitorSelectionState.createGroup=selectedMonitor.layout"><span class="fas fa-fw fa-object-group"></span></button> \x3c!-- Group create button with drop down --\x3e <div class="monitorLayoutRowItem" ng-if="!selectedMonitor.isSplit && !selectedMonitor.isGroup" style="position:relative"> <button class="btn btn-default dropdown-toggle" ng-class="{\'active\':monitorSelectionState.createGroup}" ng-disabled="monitors.length < 2" tooltip="ui_browse_monitors_group" data-toggle="dropdown" ng-click="callbackCancelMonitorGrouping($event)"><span class="fas fa-fw fa-object-group"></span></button> <ul class="dropdown-menu"> <li ng-click="monitorSelectionState.createGroup=1"> <a><span class="fas fa-fw fa-object-group"></span> <div class="dropdown-san-item" translate="ui_browse_monitors_stretch"></div></a> </li> <li ng-click="monitorSelectionState.createGroup=2"> <a><span class="fas fa-fw fa-clone"></span> <div class="dropdown-san-item" translate="ui_browse_monitors_clone"></div></a> </li> </ul> </div> <a class="btn btn-danger monitorLayoutRowItem" ng-if="selectedMonitor.isSplit" ng-click="callbackRemoveSplit(selectedMonitor)" tooltip="ui_browse_monitors_remove_split"><span class="fas fa-fw fa-times"></span></a> </span> </div> </div> <div> <div class="monitorSelectionInnerLayout"> <div class="monitorSelectionBox"> <div class="monitorSelectionFlex"> <div id="#MonitorSelectionBox" ng-attr-style="{{monitorSelectionBoxStyle}}" ng-class="{\'monitorSelectionGroupActive\':monitorSelectionState.createGroup}"> <monitor-selection ms-monitors="monitors" ms-scale="monitorScale" ms-splits="monitorSplits" ms-selected-monitor="selectedMonitor" ms-make-selection="callbackSelectMonitor(monitor, toggleMonitorSelection === true)" ms-on-split-moved="callbackSplitMoved(location, position)" ms-split-dbl-click="callbackSplitDblClick(location)" ms-selection-state="monitorSelectionState" ms-create-group="callbackCreateGroup(monitors)" ms-groups="monitorGroups" ms-layout="wallpaperConfig.layout" ms-monitor-context-menu="callbackMonitorRightClick($event, monitor)" ms-split-context-menu="callbackSplitRightClick($event, location)"></monitor-selection> </div> </div> </div> </div> </div> <div class="buttonRow"> <a class="btn btn-primary" ng-click="toggleMonitorSelection()" translate="ui_browse_monitors_change_wallpaper"></a> <a class="btn btn-default" ng-click="callbackRemoveWallpaperAndPlaylistFromMonitor(selectedMonitor.location)" translate="ui_browse_monitors_remove_wallpaper"></a> </div> </div> </div> </div> <div ng-if="steamWorkshopStatus" ng-click="callbackClickSteamStatus()" class="browseWallpapersWorkshopStatus" ng-class="{\'workshopError\' : steamWorkshopStatus.error, \'invis\':steamWorkshopStatus.hidden}"> <div> <span class="fab fa-steam"></span></div> <div translate="{{steamWorkshopStatus.text}}" translate-values="{{steamWorkshopStatus}}"></div> </div> </div>'),e.put("views/views/editor.html",'<div ng-class="editorLayoutClass"> <filemenu fm-items="filemenu" fm-data="editorSettings"></filemenu> <div class="clientArea hasFilemenu"> <div class="editorLayoutToolbar"> <a ng-if="project.scene.is2d" class="fa-stack fa-2x editorToolbarButton" ng-click="setGizmoMode(\'multi\')" ng-class="{\'active\':gizmoMode===\'multi\'}" tooltip="ui_editor_gizmo_multi"> <span class="far fa-fw fa-circle fa-stack-1x" style="font-size: 1.3em"></span> <span class="fas fa-fw fa-arrows-alt fa-stack-1x" style="font-size: 0.8em"></span> </a> <a class="editorToolbarButton" ng-click="setGizmoMode(\'translate\')" ng-class="{\'active\':gizmoMode===\'translate\'}" tooltip="ui_editor_gizmo_translate"> <span class="fas fa-fw fa-arrows-alt"></span> </a> <a class="editorToolbarButton" ng-click="setGizmoMode(\'rotate\')" ng-class="{\'active\':gizmoMode===\'rotate\'}" tooltip="ui_editor_gizmo_rotate"> <span class="fas fa-fw fa-sync-alt"></span> </a> <a class="editorToolbarButton" ng-click="setGizmoMode(\'scale\')" ng-class="{\'active\':gizmoMode===\'scale\'}" tooltip="ui_editor_gizmo_scale"> <span class="fas fa-fw fa-expand-arrows-alt"></span> </a> <div class="editorToolbarSeparator"> <div></div> </div> <a class="editorToolbarButton" ng-click="toggleShowGrid()" ng-class="{\'active\':editorSettings.showgrid}" tooltip="ui_editor_filemenu_show_grid"> <span class="fas fa-fw fa-th"></span> </a> <a class="editorToolbarButton" ng-click="toggleShowSelectionBox()" ng-class="{\'active\':editorSettings.showselectionbox}" tooltip="ui_editor_filemenu_show_selection_box"> <span class="far fa-fw fa-square"></span> </a> <a class="editorToolbarButton" ng-click="toggleShowStats()" ng-class="{\'active\':editorSettings.showstats}" tooltip="ui_editor_filemenu_show_stats"> <span class="fas fa-fw fa-chart-line"></span> </a> \x3c!--             <a class="editorToolbarButton fa" ng-click="setCameraMode(\'fly\')" ng-class="{\'active\':cameraMode===\'fly\'}" tooltip="Camera mode \'fly\'">\r\n                <span class="fas fa-plane"></span>\r\n                <span class="editorToolbarButtonCameraAddon fas fa-camera"></span>\r\n            </a>\r\n            <a class="editorToolbarButton fa" ng-click="setCameraMode(\'pivot\')" ng-class="{\'active\':cameraMode===\'pivot\'}" tooltip="Camera mode \'pivot\'">\r\n                <span class="fas fa-street-view"></span>\r\n                <span class="editorToolbarButtonCameraAddon fas fa-camera"></span>\r\n            </a> --\x3e </div> <div class="editorLayoutTreeView"> <div class="editorContainerContentPane"> <div class="editorTreeViewContainer editorSceneGraphRootContainer" ng-if="leftPane===\'treeView\'"> <tree-view class="treeViewRoot" tv-drag-drop-tag="renderable" tv-drag-drop-enabled="project.data.type===\'scene\'" tv-data="project.tree" tv-mode="assetTreeViewMode" tv-selected-item="selectedResource" tv-remove-clicked="onResourceRemove(item)" tv-element-dragged="onResourceDragged(from, to)" tv-new-element-added="onResourceAddedToScene(item, index)" tv-send-asset-property-change="sendAssetPropertyChange(resource, property)" tv-context-menu="callbackAssetContextMenu($event, item)"></tree-view> <div class="editorTreeViewContainerSceneButtons"> <a class="btn btn-primary fullWidth" ng-click="showAddRenderableModal()"><span class="fas fa-plus"></span> {{\'ui_editor_camera_add_renderable\' | translate}}</a> </div> </div> <div class="editorTreeViewContainerFixed" ng-if="leftPane===\'cameraPaths\'"> <div class="editorTreeViewContainerCameraPaths"> <tree-view class="treeViewRoot" tv-drag-drop-tag="camera" tv-drag-drop-enabled="true" tv-data="project.camerapaths" tv-mode="assetTreeViewMode" tv-selected-item="selectedResource" tv-remove-clicked="onCameraPathRemove(item)" tv-element-dragged="onCameraPathDragged(from, to)"></tree-view> </div> <div class="editorTreeViewContainerCameraButtons"> <a class="btn btn-primary fullWidth" ng-click="addCameraPath()"><span class="fas fa-plus"></span> {{\'ui_editor_camera_add_path\' | translate}}</a> </div> </div> <div class="editorTreeViewContainer editorSceneOptionsPane" ng-if="leftPane===\'sceneOptions\'"> <div> <span class="olabel" translate="ui_editor_scene_options_bloom"></span> <span class="ocontent"><checkbox cb-checked="project.scenegeneraldata.bloom"></checkbox></span> </div> <div ng-if="project.scenegeneraldata.bloom"> <span class="olabel oinset" translate="ui_editor_scene_options_bloom_strength"></span> <span class="ocontentSlider"><rzslider rz-slider-model="project.scenegeneraldata.bloomstrength" rz-slider-options="{enforceStep:false, ceil:5, floor:0.01, step:0.01, precision:10}"></rzslider></span> <span class="odigitFloat"><input type="number" ng-model="project.scenegeneraldata.bloomstrength"></span> </div> <div ng-if="project.scenegeneraldata.bloom"> <span class="olabel oinset" translate="ui_editor_scene_options_bloom_threshold"></span> <span class="ocontentSlider"><rzslider rz-slider-model="project.scenegeneraldata.bloomthreshold" rz-slider-options="{enforceStep:false, ceil:0.99, floor:0.0, step:0.01, precision:10}"></rzslider></span> <span class="odigitFloat"><input type="number" ng-model="project.scenegeneraldata.bloomthreshold"></span> </div> <div> <span class="olabel" translate="ui_editor_scene_options_background_color"></span> <span class="ocontent"><spectrum-colorpicker options="colorPickerOptions" ng-model="project.scenegeneraldata.clearcolor" vec-color-converter on-show-options="{update:false}"></spectrum-colorpicker></span> </div> <div> <span class="olabel" translate="ui_editor_scene_options_camera_preview"></span> <span class="ocontent"><checkbox cb-checked="project.scenegeneraldata.camerapreview"></checkbox></span> </div> <div> <span class="olabel" translate="ui_editor_scene_options_camera_fade"></span> <span class="ocontent"><checkbox cb-checked="project.scenegeneraldata.camerafade"></checkbox></span> </div> <div> <span class="olabel" translate="ui_editor_scene_options_camera_shake"></span> <span class="ocontent"><checkbox cb-checked="project.scenegeneraldata.camerashake"></checkbox></span> </div> <div ng-if="project.scenegeneraldata.camerashake"> <span class="olabel oinset" translate="ui_editor_scene_options_camera_shake_speed"></span> <span class="ocontentSlider"><rzslider rz-slider-model="project.scenegeneraldata.camerashakespeed" rz-slider-options="{enforceStep:false, ceil:5, floor:0.1, precision:1, step:0.1}"></rzslider></span> <span class="odigitFloat"><input type="number" ng-model="project.scenegeneraldata.camerashakespeed"></span> </div> <div ng-if="project.scenegeneraldata.camerashake"> <span class="olabel oinset" translate="ui_editor_scene_options_camera_shake_amplitude"></span> <span class="ocontentSlider"><rzslider rz-slider-model="project.scenegeneraldata.camerashakeamplitude" rz-slider-options="{enforceStep:false, ceil:1, floor:0.01, precision:2, step:0.01}"></rzslider></span> <span class="odigitFloat"><input type="number" ng-model="project.scenegeneraldata.camerashakeamplitude"></span> </div> <div ng-if="project.scenegeneraldata.camerashake"> <span class="olabel oinset" translate="ui_editor_scene_options_camera_shake_roughness"></span> <span class="ocontentSlider"><rzslider rz-slider-model="project.scenegeneraldata.camerashakeroughness" rz-slider-options="{enforceStep:false, ceil:2, floor:0.1, precision:1, step:0.1}"></rzslider></span> <span class="odigit"><input type="number" ng-model="project.scenegeneraldata.camerashakeroughness"></span> </div> <div ng-if="project.scene.is2d"> <span class="olabel" translate="ui_editor_scene_options_camera_parallax"></span> <span class="ocontent"><checkbox cb-checked="project.scenegeneraldata.cameraparallax"></checkbox></span> </div> <div ng-if="project.scenegeneraldata.cameraparallax"> <span class="olabel oinset" translate="ui_editor_scene_options_camera_parallax_amount"></span> <span class="ocontentSlider"><rzslider rz-slider-model="project.scenegeneraldata.cameraparallaxamount" rz-slider-options="{enforceStep:false, ceil:2, floor:0.1, precision:1, step:0.1}"></rzslider></span> <span class="odigit"><input type="number" ng-model="project.scenegeneraldata.cameraparallaxamount"></span> </div> <div ng-if="project.scenegeneraldata.cameraparallax"> <span class="olabel oinset" translate="ui_editor_scene_options_camera_parallax_delay"></span> <span class="ocontentSlider"><rzslider rz-slider-model="project.scenegeneraldata.cameraparallaxdelay" rz-slider-options="{enforceStep:false, ceil:2, floor:0, precision:1, step:0.1}"></rzslider></span> <span class="odigit"><input type="number" ng-model="project.scenegeneraldata.cameraparallaxdelay"></span> </div> <div ng-if="project.scenegeneraldata.cameraparallax"> <span class="olabel oinset" translate="ui_editor_scene_options_camera_mouse_influence"></span> <span class="ocontentSlider"><rzslider rz-slider-model="project.scenegeneraldata.cameraparallaxmouseinfluence" rz-slider-options="{enforceStep:false, ceil:1, floor:-1, precision:2, step:0.01}"></rzslider></span> <span class="odigit"><input type="number" ng-model="project.scenegeneraldata.cameraparallaxmouseinfluence"></span> </div> </div> </div> <div class="editorContainerTabPane iconPanes"> <div ng-class="{\'inactive\':leftPane!==\'treeView\'}" class="editorFilesTab editorTabHeader" tooltip="ui_editor_treeview_header_files" ng-click="showTreeView()"> <span class="far fa-copy"></span> </div> <div ng-class="{\'inactive\':leftPane!==\'treeView\'}" class="editorSceneGraphTab editorTabHeader" tooltip="ui_editor_tooltip_layers" ng-click="showTreeView()"> <span class="fas fa-list"></span> </div> <div ng-class="{\'inactive\':leftPane!==\'cameraPaths\'}" class="editorCameraTab editorTabHeader" tooltip="ui_editor_pane_header_camera" ng-click="showCameraPaths()"> <span class="fas fa-camera"></span> </div> <div ng-class="{\'inactive\':leftPane!==\'sceneOptions\'}" class="editorSceneOptionsTab editorTabHeader" tooltip="ui_editor_tooltip_scene_options" ng-click="showSceneOptions()"> <span class="fas fa-cog"></span> </div> </div> </div> <div class="editorLayoutPreview" native-drop-target="dropFile(droppedFiles[0])" ndt-extension-tag="nativeDropOptions.previewExtension" ndt-desired-modal-depth="0"> <div class="editorContainerContentPane previewContainer"> <span ng-if="leftPane===\'cameraPaths\'" disable-animate class="editorOverlayIcon fas fa-video-camera fa-3x"></span> <span ng-if="paintOptions.enabled" disable-animate class="editorOverlayIcon fas fa-paint-brush fa-3x"></span> <div class="editorSceneStatsOverlay" ng-if="editorSettings.showstats"> <div><span translate="ui_editor_stats_title"></span></div> <div><span translate="ui_editor_stats_draw_calls"></span><span>{{renderStats.drawcalls}}</span></div> <div><span translate="ui_editor_stats_primitives"></span><span>{{renderStats.renderedprimitives}}</span></div> <div><span translate="ui_editor_stats_framebuffer_copies"></span><span>{{renderStats.framebuffercopies}}</span></div> <div><span translate="ui_editor_stats_particle_count"></span><span>{{renderStats.particlecount}}</span></div> <div><span translate="ui_editor_stats_particle_memory"></span><span>{{renderStats.particlememory | number : 2}}</span></div> <div><span translate="ui_editor_stats_particle_simulation_time"></span><span>{{renderStats.particlesimulationtime.toFixed(3)}}</span></div> <div><span translate="ui_editor_stats_render_target_changes"></span><span>{{renderStats.rendertargetstatechanges}}</span></div> <div><span translate="ui_editor_stats_texture_memory"></span><span>{{renderStats.texturememory}}</span></div> </div> <preview p-options="{tag:\'main\', ctrl:\'previewCtrl\', interactive:true}" p-aspect-ratio="editorSettings.previewratio"></preview> <camera-timeline ng-if="leftPane===\'cameraPaths\'" ct-data="selectedResource.item"></camera-timeline> <div class="editorPaintOverlay" ng-if="paintOptions.enabled"> <div class="editorPaintOverlayBrushControls"> <div class="editorPaintOverlayFlowModes" ng-if="paintOptions.mode == \'flowmask\'"> <a class="editorToolbarButton glyphicon glyphicon-arrow-right" ng-click="paintOptions.brushtype = \'\'" ng-class="{\'active\':!paintOptions.brushtype}" tooltip="ui_editor_paint_overlay_brush_tooltip_direction"></a> <a class="editorToolbarButton glyphicon glyphicon-resize-full" ng-click="paintOptions.brushtype = \'spread\'" ng-class="{\'active\':paintOptions.brushtype==\'spread\'}" tooltip="ui_editor_paint_overlay_brush_tooltip_spread"></a> <a class="editorToolbarButton glyphicon glyphicon-refresh" ng-click="paintOptions.brushtype = \'spin\'" ng-class="{\'active\':paintOptions.brushtype==\'spin\'}" tooltip="ui_editor_paint_overlay_brush_tooltip_spin"></a> \x3c!--                             <a class="editorToolbarButton glyphicon glyphicon-resize-small" ng-click="paintOptions.brushtype = \'pinch\'" ng-class="{\'active\':paintOptions.brushtype==\'pinch\'}" tooltip="ui_editor_paint_overlay_brush_tooltip_pinch"></a> --\x3e </div> <div class="editorPaintOverlaySettings"> <div class="paintControlLabels" ng-if="paintOptions.mode != \'rgbmask\'"> <span translate="ui_editor_paint_overlay_value"></span> <div> <rzslider rz-slider-model="paintOptions.value" rz-slider-options="{ceil:255, floor:0}"></rzslider> </div> <span>{{paintOptions.value}}</span> <span class="editorPaintOverlayValuePreview" ng-attr-style="background-color: rgb({{paintOptions.value}}, {{paintOptions.value}}, {{paintOptions.value}})"></span> </div> <div class="paintControlLabels" ng-if="paintOptions.mode == \'rgbmask\'"> <span translate="ui_editor_paint_overlay_color"></span> <div> <spectrum-colorpicker options="colorPickerSettings" ng-model="paintOptions.color" on-show-options="{update:false}" vec-color-converter></spectrum-colorpicker> </div> </div> <div class="paintControlLabels"> <span translate="ui_editor_paint_overlay_size"></span> <div> <rzslider rz-slider-model="paintOptions.size" rz-slider-options="paintOptionsSliderSize"></rzslider> </div> <span>{{paintOptions.size}}</span> </div> </div> <div class="editorPaintOverlaySettings"> <div class="paintControlLabels"> <span translate="ui_editor_paint_overlay_opacity"></span> <div> <rzslider rz-slider-model="paintOptions.opacity" rz-slider-options="{ceil:100, floor:1}"></rzslider> </div> <span>{{paintOptions.opacity}}</span> </div> <div class="paintControlLabels"> <span translate="ui_editor_paint_overlay_hardness"></span> <div> <rzslider rz-slider-model="paintOptions.hardness" rz-slider-options="{ceil:100, floor:0}"></rzslider> </div> <span>{{paintOptions.hardness}}</span> </div> <div class="paintControlLabels"> <span translate="ui_editor_paint_overlay_show_mask"></span> <div> <checkbox cb-checked="paintOptions.showmask"></checkbox> </div> </div> </div> </div> <div class="editorPaintOverlayControls"> <div> <div style="display:flex;flex-direction:row"> <a class="btn btn-default fullWidth" ng-disabled="!paintHistoryState.canundo" tooltip="Undo" ng-click="applyPaintHistory(true)"><span class="fas fa-undo"></span></a> <a class="btn btn-default fullWidth" ng-disabled="!paintHistoryState.canrepeat" tooltip="Repeat" ng-click="applyPaintHistory(false)"><span class="fas fa-redo"></span></a> </div> <a class="btn btn-primary fullWidth" ng-click="endPaint(true)"><span class="fas fa-save"></span> {{\'ui_ok\' | translate}}</a> </div> <div> <a class="btn btn-default fullWidth" ng-click="clearPaint()"><span class="far fa-file"></span> {{\'ui_editor_paint_overlay_clear\' | translate}}</a> <a class="btn btn-danger fullWidth" ng-click="endPaint(false)"><span class="fas fa-times"></span> {{\'ui_cancel\' | translate}}</a> </div> </div> </div> </div> <div class="editorContainerTabPane"> <div class="editorTabHeader" translate="ui_editor_pane_header_preview"></div> </div> </div> <div class="editorLayoutProperties"> <div class="editorContainerContentPane editorPropertyPaneRoot"> <div class="navigationHeader"> <span>{{\'ui_editor_properties_navigation\' | translate}} <a ng-repeat="nav in selectedResource.stack track by $index" ng-click="navigateProperty(nav.key, nav.id)"> {{nav.key}} </a></span> </div> <property-list p-list="selectedResource.item.properties" p-ctrl="propertyControl" p-owner="selectedResource.item" p-condition-scope="this" p-modal-depth="0"></property-list> </div> <div class="editorContainerTabPane"> <div class="editorTabHeader" translate="ui_editor_pane_header_properties"></div> </div> </div> <div class="editorLayoutAssets"> <div class="editorContainerContentPane editorAssetListingTreeViewContainer"> <tree-view class="treeViewRoot" tv-drag-drop-tag="renderable" tv-drag-drop-enabled="true" tv-data="project.availableassets" tv-mode="\'directory\'"></tree-view> </div> <div class="editorContainerTabPane"> <div class="editorTabHeader" translate="ui_editor_pane_header_assets"></div> </div> </div> </div> </div> '),e.put("views/views/empty.html",'<div class="text-center" style="padding-top: 15px;font-size: 170%"> <div>Nothing to see here.</div> <div style="color:#999;font-size:40%">(Either you started the UI directly or there has been an error)</div> <div style="padding-top: 15px"> <a class="btn btn-primary" style="font-size:150%;margin-top:20px" onclick="window.ui.close()">{{btnText}}</a> \x3c!-- ng-click="showimg = true;" --\x3e </div> \x3c!-- <div ng-if="showimg" onclick="window.ui.close()" style="position: absolute; left: 0px; top: 0px; width:100%; height:100%; background: url(\'https://media.giphy.com/media/2ZgsAUCqN0q1a/giphy.gif\'); background-size: cover;background-position: center center;"></div>--\x3e </div> '),e.put("views/views/settings.html",'<div class="clientArea"> <div> <uib-tabset class="tab-animation settingsTabs" active="tabInfo.activeIndex"> \x3c!--         \r\n        Performance tab\r\n --\x3e <uib-tab heading="{{\'ui_settings_performance\' | translate}}" select="refreshSlider()"> <div class="settingsContainer"> <div class="groupBox"> <div class="heading" translate="ui_settings_playback"></div> <div class="infoTable settingsPlaybackTable"> <div> <div class="infoTableLabel" translate="ui_settings_playback_focused"> </div> <div> <droplist dp-options="playbackOptionsFocus" dp-selected="generalSettings.playbackfocus"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_maximized"> </div> <div> <droplist dp-options="playbackOptionsMaximized" dp-selected="generalSettings.playbackmaximized"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_fullscreen"> </div> <div> <droplist dp-options="playbackOptionsFullscreen" dp-selected="generalSettings.playbackfullscreen"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_playing_audio"> </div> <div> <droplist dp-options="playbackOptionsAudio" dp-selected="generalSettings.playbackaudio"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_sleep"> </div> <div> <droplist dp-options="playbackOptionsSleep" dp-selected="generalSettings.playbacksleep"></droplist> </div> </div> <div ng-if="runtime.islaptop"> <div class="infoTableLabel" translate="ui_settings_playback_battery"> </div> <div> <droplist dp-options="playbackOptionsBattery" dp-selected="generalSettings.playbackonbattery"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_playback_application_rules"></div> <div> <button class="btn btn-primary fullWidth" translate="ui_settings_playback_application_rules_edit" ng-click="editPerApplicationSettings()"></button> </div> </div> </div> </div> <div class="groupBox"> <div class="heading" translate="ui_settings_gfx_quality"></div> <div class="infoTable settingsPlaybackTable"> <div> <div class="infoTableLabel" translate="ui_settings_gfx_preset"> </div> <div class="fullWidth alignRight"> <div class="btn-group"> <a class="btn btn-primary settingsQualityButton" ng-click="applyPreset(0)" translate="ui_settings_gfx_preset_low"></a> <a class="btn btn-primary settingsQualityButton" ng-click="applyPreset(1)" translate="ui_settings_gfx_preset_medium"></a> <a class="btn btn-primary settingsQualityButton" ng-click="applyPreset(2)" translate="ui_settings_gfx_preset_high"></a> </div> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_gfx_antialiasing"> </div> <div> <droplist dp-options="antiAliasingOptions" dp-selected="generalSettings.msaa"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_gfx_resolution"> </div> <div> <droplist dp-options="resolutionOptions" dp-selected="generalSettings.resolution"></droplist> </div> </div> <div style="position: relative"> <div class="infoTableLabel" translate="ui_settings_gfx_fps"> </div> <div class="rzsliderContainer" style="width: 200px"> <rzslider rz-slider-model="generalSettings.fps" rz-slider-options="fpsSlider"></rzslider> </div> <div style="width: 30px; text-align: right"> {{generalSettings.fps}} </div> <div ng-show="generalSettings.fps > 30" class="text-danger settingsFpsWarning" translate="ui_settings_gfx_fps_warning"> </div> </div> <div class="settingsQualityCheckboxRow"> <div class="infoTableLabel" translate="ui_settings_gfx_post_processing"> </div> <div> <checkbox cb-checked="generalSettings.bloom"></checkbox> </div> </div> <div class="settingsQualityCheckboxRow"> <div class="infoTableLabel" translate="ui_settings_gfx_reflections"> </div> <div> <checkbox cb-checked="generalSettings.reflection"></checkbox> </div> </div> </div> </div> </div> </uib-tab> \x3c!--         \r\n        General tab\r\n --\x3e <uib-tab heading="{{\'ui_settings_general\' | translate}}" select="refreshSlider()"> <div class="settingsContainer"> <div class="groupBox"> <div class="heading">{{\'ui_settings_miscellaneous\' | translate}}</div> <div class="infoTable settingsPlaybackTable"> <div class="settingsAutostartCheckboxRow"> <div class="infoTableLabel" translate="ui_settings_start_with_windows"> </div> <div> <checkbox cb-checked="generalSettings.autostart" cb-changed="toggleAutoStartRegistry(generalSettings.autostart)" class="autostart" cb-title="\'\'" ng-show="!generalSettings.autostartscheduler"></checkbox> <a class="btn btn-primary btn-sm autoStartButton" ng-class="{\'btn-success btn-autostart-set\':generalSettings.autostartscheduler}" ng-click="generalSettings.autostart&&toggleAutoStartScheduler(!generalSettings.autostartscheduler)" ng-disabled="!generalSettings.autostart"><img src="images/uac_small.png"> {{generalSettings.autostartscheduler ? \'ui_settings_remove_service\' : \'ui_settings_register_service\' | translate}}</a> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_adjust_windows_color"> </div> <div> <checkbox ng-if="!isWindows10OrGreater" cb-checked="generalSettings.adjustdwmcolor"></checkbox> <droplist ng-if="isWindows10OrGreater" dp-options="adjustDWMColorModes" dp-selected="generalSettings.adjustdwmcolormode"></droplist> </div> </div> <div style="position: relative"> <div class="infoTableLabel" translate="ui_settings_ui_language"> </div> <div> <droplist class="settingsLanguageDropList" dp-options="availableLanguages" dp-selected="generalSettings.language"></droplist> </div> <a onclick="window.ui.shellexecute(\'steam://url/GameHub/431960\\\\discussions\\\\7\\\\215439774876424597\')" style="position: absolute;color:#A03; font-size:90%; bottom: -5px">Help translate Wallpaper Engine!</a> </div> <div> \x3c!-- ng-if="generalSettings.konami" --\x3e <div class="infoTableLabel" translate="ui_settings_ui_skin"> </div> <div> <droplist dp-options="generalSettings.konami ? uiSkinsFull : uiSkins" dp-selected="generalSettings.uiskin"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_hotkeys"></div> <div> <button class="btn btn-primary fullWidth" translate="ui_settings_playback_application_rules_edit" ng-click="editHotkeys()"></button> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <div class="infoTableLabel" translate="ui_settings_icon_opacity"></div> </div> <div class="rzsliderContainer"> <rzslider rz-slider-model="generalSettings.iconopacity" rz-slider-options="iconOpacitySlider"></rzslider> <div class="rzsliderSuffix"> {{generalSettings.iconopacity}}% </div> </div> </div> </div> </div> <div class="groupBox"> <div class="heading" translate="ui_settings_media"></div> <div class="infoTable settingsPlaybackTable"> <div> <div class="infoTableLabel" translate="ui_settings_audio_input_device"> </div> <div> <droplist dp-empty-text="ui_settings_no_devices" dp-options="runtime.audiodevices" dp-selected="generalSettings.audioinputdevice"></droplist> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <span class="fas fa-microphone rzsliderLabelIcon"></span> <div class="infoTableLabel audioInputText" translate="ui_settings_recording_volume"></div> </div> <div class="rzsliderContainer"> <rzslider rz-slider-model="generalSettings.audioinputvolume" rz-slider-options="audioSlider"></rzslider> <div class="rzsliderSuffix"> <input class="rzsliderSuffixInput" type="number" ng-model="generalSettings.audioinputvolume"> </div> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <span class="fas fa-volume-up rzsliderLabelIcon"></span> <div class="infoTableLabel" ng-click="generalSettings.videoaudiooutput=!generalSettings.videoaudiooutput" translate="ui_settings_video_audio_label"></div> </div> <div class="rzsliderContainer"> <checkbox cb-checked="generalSettings.videoaudiooutput"></checkbox> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_video_hardware_acceleration_label" ng-click="generalSettings.videohardwareacceleration=!generalSettings.videohardwareacceleration"> </div> <div> <checkbox cb-checked="generalSettings.videohardwareacceleration"></checkbox> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_video_framework"> </div> <div> <droplist class="" dp-options="videoFrameworkOptions" dp-selected="generalSettings.videoframework"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_video_read"> </div> <div> <droplist class="" dp-options="videoReadOptions" dp-selected="generalSettings.videoreadmode"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_video_loop"> </div> <div> <droplist class="" dp-options="videoLoopOptions" dp-selected="generalSettings.videoloopmode"></droplist> </div> </div> </div> </div> <div class="groupBox"> <div class="heading" translate="ui_settings_advanced"></div> <div class="infoTable settingsPlaybackTable"> \x3c!--                         <div class="settingsQualityCheckboxRow">\r\n                            <div>\r\n                                Enable advanced options:\r\n                            </div>\r\n                            <div>\r\n                                <checkbox cb-checked="generalSettings.enableadvancedoptions"></checkbox>\r\n                            </div>\r\n                        </div> --\x3e \x3c!--                             <div>\r\n                                <div class="fullWidth">\r\n                                    <a class="btn btn-primary fullWidth" ng-click="resetAdvancedOptions()" translate="ui_settings_reset_advanced"></a>\r\n                                </div>\r\n                            </div> --\x3e <div> <div class="infoTableLabel" translate="ui_settings_process_priority"> </div> <div> <droplist class="" dp-options="priorityOptions" dp-selected="generalSettings.processpriority"></droplist> </div> </div> <div ng-if="!isWindows8OrGreater"> <div class="infoTableLabel" translate="ui_settings_windows_7_wallpaper_mode"> </div> <div> <droplist class="" dp-options="windows7WallpaperModeOptions" dp-selected="generalSettings.windows7mode"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_monitor_identification"> </div> <div> <droplist class="" dp-options="monitorDetectionOptions" dp-selected="generalSettings.monitordetection"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_graphics_api"> </div> <div> <droplist class="" dp-options="graphicsApiOptions" dp-selected="generalSettings.graphicsapi"></droplist> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_log_level"> </div> <div> <droplist dp-options="logLevelOptions" dp-selected="generalSettings.loglevel"></droplist> </div> </div> <div class="settingsQualityCheckboxRow"> <div class="infoTableLabel" ng-click="generalSettings.safemode=!generalSettings.safemode" translate="ui_settings_use_safe_mode"> </div> <div> <checkbox cb-checked="generalSettings.safemode"></checkbox> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <div class="infoTableLabel" ng-click="generalSettings.slideshowkiller=!generalSettings.slideshowkiller" translate="ui_settings_disable_slideshow"></div> </div> <div class="rzsliderContainer"> <checkbox cb-checked="generalSettings.slideshowkiller"></checkbox> </div> </div> <div class="settingsGeneralSlider"> <div class="rzsliderLabel"> <div class="infoTableLabel" ng-click="generalSettings.unpauseaero=!generalSettings.unpauseaero" translate="ui_settings_advanced_unpause_during_aero_peek"></div> </div> <div class="rzsliderContainer"> <checkbox cb-checked="generalSettings.unpauseaero"></checkbox> </div> </div> \x3c!--                             <div class="settingsQualityCheckboxRow">\r\n                                <div class="infoTableLabel" ng-click="generalSettings.uihardwareacceleration=!generalSettings.uihardwareacceleration"  translate="ui_settings_ui_hardware_acceleration">\r\n                                </div>\r\n                                <div>\r\n                                    <checkbox cb-checked="generalSettings.uihardwareacceleration"></checkbox>\r\n                                </div>\r\n                            </div> --\x3e \x3c!--                             <div class="settingsQualityCheckboxRow">\r\n                                <div class="infoTableLabel" ng-click="generalSettings.trayicon=!generalSettings.trayicon" translate="ui_settings_show_tray_icon">\r\n                                </div>\r\n                                <div>\r\n                                    <checkbox cb-checked="generalSettings.trayicon"></checkbox>\r\n                                </div>\r\n                            </div> --\x3e <div> <div class="infoTableLabel" translate="ui_settings_advanced_cef_command_line"> </div> <div> <input type="text" style="outline:none" class="fullWidth" ng-model="generalSettings.cefcommandline" ng-model-options="{debounce: 1200}"> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_cef_devtools_port"> </div> <div> <input type="number" style="outline:none" class="fullWidth" ng-model="generalSettings.cefdevtoolsport" ng-model-options="{debounce: 1200}"> </div> </div> <div> <div class="infoTableLabel" translate="ui_settings_advanced_reset_config"> </div> <div> <a class="btn btn-danger fullWidth" ng-click="resetConfig()" translate="ui_settings_advanced_reset_config_button"></a> </div> </div> </div> \x3c!--                     <div class="infoTable settingsPlaybackTable">\r\n                        <div>\r\n                            <div style="width: 100%">\r\n                                <a style="width: 100%" class="btn btn-primary">Show console (disabled)</a>\r\n                            </div>\r\n                        </div>\r\n                    </div> --\x3e </div> </div> </uib-tab> \x3c!-- \r\n            Plugins tab\r\n--\x3e <uib-tab heading="{{\'ui_settings_plugins\' | translate}}" ng-if="plugins.length > 0"> <div class="settingsContainer"> <div class="groupBox settingsPluginBox"> <div ng-repeat="plugin in plugins" class="settingsPluginRow"> <div class="pluginCheckbox"> <checkbox cb-checked="plugin.state.enabled"></checkbox> </div> <div class="pluginSettings"> <a ng-if="plugin.options.length > 0" ng-click="editPluginSettings(plugin)"><span class="fas fa-cog"></span></a> </div> <div class="pluginInfo"> <div> <span>{{plugin.name}}</span> <span class="pull-right" ng-class="{\'successText\':plugin.status, \'warningText\':!plugin.status}"> {{plugin.status ? \'ui_settings_plugins_status_loaded\' : \'ui_settings_plugins_status_not_loaded\' | translate}} </span> </div> <div class="pull-right pluginFileName pluginInfoText"> {{plugin.file}} </div> </div> </div> </div> </div> </uib-tab> \x3c!--         \r\n        About tab\r\n --\x3e <uib-tab heading="{{\'ui_settings_about\' | translate}}"> <div class="settingsAbout"> <div class="settingsAboutCopyright"> <div>Wallpaper Engine &copy 2016-2018 Kristjan Skutta. {{\'ui_settings_copyright\' | translate}}</div> <div>Build {{buildVersion}} <a ng-click="showChangelog()"> Changelog</a> </div> <div> <a onclick="window.ui.shellexecute(\'steam://url/GameHub/431960\')"> <span class="fab fa-steam bt-lg"></span> Community Hub </a> </div> <div> <a onclick="window.ui.shellexecute(\'mailto:wallpaperengine@gmail.com?Subject=Application%20Support\')"> <span class="fas fa-envelope"></span> wallpaperengine@gmail.com </a> </div> </div> <div class="groupBox" style="margin-top: 20px; height: 310px; flex: 1 0 auto; display: flex"> <div class="heading" translate="ui_settings_thirdparty"></div> <div style="overflow-y:auto" ng-include="\'views/includes/thirdpartynotices.html\'"></div> </div> </div> </uib-tab> </uib-tabset> </div> <div class="footer footerButtons"> <div class="left"> </div> <div class="right"> <a class="btn btn-primary" ng-click="callbackOk()"> <span ng-if="generalState.isRestartRequired" class="fas fa-exclamation-triangle warningText"></span> <span translate="ui_ok"></span> </a> <a class="btn btn-default" ng-click="callbackCancel()" translate="ui_cancel"></a> </div> </div> </div> '),e.put("views/views/welcome.html",'<div class="welcomeDialogRoot"> <div class="welcomeTitle"> <h3 translate="ui_welcome_header"></h3> \x3c!-- <img src="images/wp_logo.png"> --\x3e </div> <div class="welcomeBody container-fluid"> <div class="page" ng-class="{\'past\': page > 0}" ng-show="page===0||lastPage===0"> <div class="col-xs-12" translate="ui_welcome_intro"></div> <div> <div class="col-xs-5" translate="ui_welcome_preferred_language"></div> <div class="col-xs-7"> <droplist class="welcomeLanguageDropList" dp-options="availableLanguages" dp-selected="generalSettings.language"></droplist> <a onclick="window.ui.shellexecute(\'steam://url/GameHub/431960\\\\discussions\\\\7\\\\215439774876424597\')" style="position: absolute;color:#A03; font-size:90%; bottom: -20px; right: 15px">Help translate Wallpaper Engine!</a> </div> </div> <div class="col-xs-12 text-center" style="pointer-events: none"> <div class="wpAnim"> <img class="offset" src="images/wp_logo_blue_outer_rect.png"> <img class="spin" src="images/wp_logo_blue_inner_rect.png"> </div> </div> </div> <div class="page welcomeDialogOptions" ng-class="{\'past\': page > 1, \'future\': page < 1}" ng-show="page===1||lastPage===1"> <div class="col-xs-12"> <span class="wdLabel" translate="ui_welcome_quality_body"></span> <br> <br> <div class="row wdRow"> <div class="col-xs-5" translate="ui_welcome_quality_column_header"></div> <div class="col-xs-7"> <div class="btn-group"> <a class="btn btn-primary wdQualityButton" uib-btn-radio="\'low\'" ng-model="qualityPreset"><span translate="ui_settings_gfx_preset_low"></span></a> <a class="btn btn-primary wdQualityButton" uib-btn-radio="\'medium\'" ng-model="qualityPreset"><span translate="ui_settings_gfx_preset_medium"></span></a> <a class="btn btn-primary wdQualityButton" uib-btn-radio="\'high\'" ng-model="qualityPreset"><span translate="ui_settings_gfx_preset_high"></span></a> </div> </div> </div> <br> <div class="row"> <div class="col-xs-5" translate="ui_welcome_quality_description_header"> </div> <div class="col-xs-7 wdLabel"> <div class="row"> <div class="col-xs-6" translate="ui_welcome_quality_fps_limit"></div> <div class="col-xs-6">{{generalSettings.fps}}</div> </div> <div class="row"> <div class="col-xs-6" translate="ui_welcome_quality_anti_aliasing"></div> <div class="col-xs-6">MSAA {{generalSettings.msaa}}</div> </div> <div class="row"> <div class="col-xs-6" translate="ui_welcome_quality_bloom"></div> <div class="col-xs-6">{{generalSettings.bloom ? \'yes\' : \'no\'}}</div> </div> <div class="row"> <div class="col-xs-6" translate="ui_welcome_quality_reflections"></div> <div class="col-xs-6">{{generalSettings.reflection ? \'yes\' : \'no\'}}</div> </div> </div> </div> </div> </div> <div class="page welcomeDialogOptions" ng-class="{\'past\': page > 2, \'future\': page < 2}" ng-show="page===2||lastPage===2"> <div class="col-xs-12"> <span class="wdLabel" translate="ui_welcome_autostart_description"></span> <br> <div class="row wdRow"> <div class="col-xs-5" translate="ui_welcome_autostart_label"></div> <div class="col-xs-7"> <div class="wdAutoStart"> <checkbox cb-checked="generalSettings.autostart" cb-changed="toggleAutoStartRegistry(generalSettings.autostart)" cb-title="\'\'" cb-disabled="generalSettings.autostartscheduler" ng-show="!generalSettings.autostartscheduler"></checkbox> <a class="btn btn-primary" ng-class="{\'btn-success\':generalSettings.autostartscheduler}" ng-click="generalSettings.autostart&&toggleAutoStartScheduler(!generalSettings.autostartscheduler)" ng-disabled="!generalSettings.autostart"><img src="images/uac_small.png"> {{generalSettings.autostartscheduler ? \'ui_settings_remove_service\' : \'ui_settings_register_service\' | translate}}</a> </div> </div> </div> <br> <br> <span class="wdLabel" translate="ui_welcome_windows_color_description"></span> <br> <div class="row wdRow"> <div class="col-xs-5" translate="ui_welcome_windows_color_header"></div> <div class="col-xs-7"> <checkbox ng-if="!isWindows10OrGreater" cb-title="\'\'" cb-checked="generalSettings.adjustdwmcolor" style="position:relative;left:30px"></checkbox> <droplist ng-if="isWindows10OrGreater" dp-options="adjustDWMColorModes" dp-selected="generalSettings.adjustdwmcolormode"></droplist> </div> </div> </div> </div> <div class="page welcomeDialogOptions" ng-class="{\'past\': page > 3, \'future\': page < 3}" ng-show="page===3||lastPage===3"> <div class="col-xs-12"> <span translate="ui_welcome_finish_body"></span> <div class="text-center"> <img src="images/tray_example.png"> </div> </div> </div> </div> <div class="welcomeFooter container-fluid"> <div class="row"> <div class="col-xs-12 text-center"> <a class="navigationDot" ng-class="{\'active\':page===0}" ng-click="page=0"></a> <a class="navigationDot" ng-class="{\'active\':page===1}" ng-click="page=1"></a> <a class="navigationDot" ng-class="{\'active\':page===2}" ng-click="page=2"></a> <a class="navigationDot" ng-class="{\'active\':page===3}" ng-click="page=3"></a> </div> </div> <div style="display: flex"> <div style="flex-grow: 1"> <div style="padding-top: 4px" ng-show="page===3"> <checkbox cb-checked="showBrowseWallpapers" cb-title="\'ui_welcome_browse_wallpapers_now\'"></checkbox> </div> </div> <div> <a class="btn btn-primary buttonParent btn-lg pull-right" ng-click="advancePage()"> <div class="buttonFade" ng-show="page===0"><span translate="ui_welcome_button_first_page"></span> <span class="glyphicon pull-right glyphicon-chevron-right"></span></div> <div class="buttonFade" ng-show="page!==0&&page!==3"><span translate="ui_welcome_button_next_page"></span> <span class="glyphicon pull-right glyphicon-chevron-right"></span></div> <div class="buttonFade" ng-show="page===3"> <span translate="ui_welcome_button_last_page"></span> <span class="fas pull-right fa-check" style="position:relative;top:2px"></span></div> </a> </div> </div> </div> </div> ')}]);